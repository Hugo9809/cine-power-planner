<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="Plan your film rig and calculate power consumption &amp; battery life." />
  <meta property="og:title" content="Cine Power Planner" />
  <meta property="og:description" content="Plan your film rig and calculate power consumption &amp; battery life." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="src/icons/app-icon.png" />
  <meta name="theme-color" content="#f9f9f9" />
  <meta name="application-name" content="Cine Power Planner" />
  <meta name="apple-mobile-web-app-title" content="Cine Power Planner" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self'; img-src 'self' data:; script-src 'self'; style-src 'self' 'unsafe-inline'; font-src 'self' data:; manifest-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self';" />
  <meta name="referrer" content="no-referrer" />
  <meta name="color-scheme" content="light dark" />
  <title>Cine Power Planner</title>
  <link rel="stylesheet" href="src/styles/style.css" />
  <link rel="stylesheet" href="src/styles/overview-print.css" media="print" />
  <link rel="icon" href="src/icons/app-icon.svg" type="image/svg+xml" />
  <link rel="icon" href="src/icons/app-icon.png" type="image/png" />
  <link rel="apple-touch-icon" href="src/icons/app-icon.png" />
  <link rel="manifest" href="manifest.webmanifest">
</head>
<body>
  <a href="#mainContent" class="skip-link" id="skipLink">Skip to content</a>
  <div id="offlineIndicator" role="status" aria-live="polite">Offline</div>
  <div
    id="installPromptBanner"
    class="install-banner"
    hidden
    role="region"
    aria-live="polite"
  >
    <button
      id="installPromptBannerAction"
      class="install-banner-action"
      type="button"
      aria-haspopup="dialog"
      aria-controls="installGuideDialog"
    >
      <span
        id="installPromptBannerIcon"
        class="install-banner-icon btn-icon icon-glyph"
        aria-hidden="true"
        data-icon-font="uicons"
      >&#xE9D4;</span>
      <span id="installPromptBannerText">Install Cine Power Planner on your device for quick access.</span>
    </button>
    <button
      id="installPromptBannerDismiss"
      class="install-banner-dismiss"
      type="button"
      aria-label="Dismiss"
    >
      <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF131;</span>
      <span class="visually-hidden">Dismiss</span>
    </button>
  </div>
  <header id="topBar">
    <a class="branding" href="index.html">
      <svg id="logo" viewBox="0 0 1024 1024" aria-hidden="true">
        <defs>
          <style>
            .logo-background { fill: var(--logo-background-color, var(--accent-color)); }
            .cls-1 { fill: var(--logo-accent-color, var(--accent-color)); }
            .cls-2 { fill: var(--logo-center-color, #fff); }
          </style>
        </defs>
        <rect class="logo-background" width="1024" height="1024" rx="128" ry="128" />
        <path class="cls-1" d="M332.79,264.29c-66.13,6.4-105.19,79.54-74.31,138.73,35.25,67.58,131.84,67.97,167.69.65,35.6-66.85-18.81-146.6-93.38-139.38ZM532.8,264.3c-51.89,4.85-90.78,55.06-84.79,106.19,9.73,82.92,118.85,114.08,169.97,46.99,51.33-67.37-2.29-160.92-85.18-153.18ZM689.21,517.2l.28,157.8,82.46,50.54c9.27,5.08,19.04.97,20.1-10-.62-80.73,1-161.7-.82-242.28-2.55-6.41-9.86-10.22-16.21-6.74l-85.81,50.68ZM274.74,468.24c-12.21,3.53-19.68,12.51-20.77,25.23l.05,221.03c1.77,14.87,11.57,24.26,26.45,25.55h326.07c14.13-1.11,25.08-10,26.51-24.49v-223.08c-1.21-13.19-11.34-23.3-24.5-24.5l-333.8.28ZM672,530h-19v134h19v-134Z" />
        <path class="cls-2 logo-center" d="M274.74,468.24l333.8-.28c13.16,1.2,23.29,11.31,24.5,24.5v223.08c-1.43,14.49-12.37,23.38-26.51,24.49h-326.07c-14.89-1.28-24.69-10.68-26.45-25.55l-.05-221.03c1.09-12.71,8.56-21.7,20.77-25.23ZM467,582l14.91-68.61c-3.75-14.34-10.29-10.19-17.88-1.86-28.03,30.79-51.9,68.87-79.85,100.15-4.19,3.66-1.94,14.32,3.32,14.32h42.5l-14.07,67.5c.6,11.86,10.68,13.88,17.04,3.97l79.87-102.13c3.57-4.95,1.6-13.34-5.34-13.34h-40.5Z" />
        <path class="cls-2" d="M532.8,264.3c82.89-7.74,136.51,85.82,85.18,153.18-51.12,67.08-160.24,35.92-169.97-46.99-6-51.12,32.9-101.34,84.79-106.19ZM539.79,321.27c-49.71,4.46-43.19,80.2,6.71,75.72,49.16-4.42,42.05-80.09-6.71-75.72Z" />
        <path class="cls-2" d="M332.79,264.29c74.57-7.22,128.98,72.53,93.38,139.38-35.85,67.31-132.44,66.92-167.69-.65-30.87-59.18,8.09-132.33,74.31-138.73ZM315.35,332.35c-32.21,32.16,12.32,84.81,49.14,57.64,43.84-32.35-11.25-95.49-49.14-57.64Z" />
        <path class="cls-2" d="M689.21,517.2l85.81-50.68c6.35-3.48,13.67.34,16.21,6.74,1.82,80.58.2,161.55.82,242.28-1.06,10.97-10.83,15.09-20.1,10l-82.46-50.54-.28-157.8Z" />
        <rect class="cls-2" x="653" y="530" width="19" height="134" />
        <path class="cls-1" d="M467,582h40.5c6.94,0,8.9,8.4,5.34,13.34l-79.87,102.13c-6.36,9.92-16.44,7.89-17.04-3.97l14.07-67.5h-42.5c-5.26,0-7.51-10.65-3.32-14.32,27.95-31.29,51.81-69.37,79.85-100.15,7.59-8.33,14.13-12.49,17.88,1.86l-14.91,68.61Z" />
        <path class="cls-1" d="M539.79,321.27c48.76-4.38,55.87,71.3,6.71,75.72-49.9,4.48-56.42-71.26-6.71-75.72Z" />
        <path class="cls-1" d="M315.35,332.35c37.9-37.85,92.98,25.3,49.14,57.64-36.82,27.17-81.35-25.48-49.14-57.64Z" />
      </svg>
      <h1 id="mainTitle">Cine Power Planner</h1>
    </a>
    <button id="menuToggle" aria-label="Menu" aria-expanded="false">
      <span class="icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE198;</span>
    </button>
    <div class="feature-search">
      <div id="featureSearchContainer">
        <input type="search" id="featureSearch" list="featureList" placeholder="Search features or devices..." aria-label="Search features, devices and help" />
      </div>
      <datalist id="featureList"></datalist>
    </div>
    <nav class="controls" aria-label="Main controls">
      <select id="languageSelect" aria-label="Select language">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="it">Italiano</option>
      </select>
      <button id="darkModeToggle" title="Toggle dark mode" aria-label="Toggle dark mode" aria-pressed="false">
        <span class="icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEC7E;</span>
      </button>
      <button id="pinkModeToggle" title="Toggle pink mode" aria-label="Toggle pink mode" aria-pressed="false">
        <span class="icon-glyph icon-svg pink-mode-icon" aria-hidden="true">
          <svg viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path
              d="m1 40c0-8 3-17 3-17a4.84 4.84 0 0 0-1.829-3.064 1 1 0 0 1 .45-1.716 19.438 19.438 0 0 1 4.379-.22c.579-2.317-1.19-3.963-2.782-4.938a1 1 0 0 1 .393-1.85 14.128 14.128 0 0 1 6.389.788c0-.958-1.147-2.145-2.342-3.122a1 1 0 0 1 .708-1.773 40.655 40.655 0 0 1 6.634.895 3.723 3.723 0 0 0-1.049-2.264 1 1 0 0 1 .823-1.652c6.151.378 9.226 1.916 9.226 1.916l10-1s8.472-2.311 15.954.5a1 1 0 0 1-.084 1.9c-1.455.394-2.87 1.143-2.87 2.6 0 0 4.426.738 5.675 4.114a1 1 0 0 1-1.228 1.317c-1.64-.48-4.273-.88-6.447.569Z"
              fill="#805333"
            />
            <path
              d="m30.18 42.82c1.073 2.7 2.6 9.993 3.357 13.8a2 2 0 0 1-1.964 2.38h-28.573a2 2 0 0 1-2-2v-18c0-2.55 10.03-22.11 23.99-23.87Z"
              fill="#a56a43"
            />
            <path
              d="m55.67 48.46-6.34 2.97a6 6 0 0 1-7.98-2.88l-.25-.54-.76-1.6a4.956 4.956 0 0 0-4.68-2.87c-.22.01-.44.02-.66.02a16.019 16.019 0 0 1-8.28-29.66c-1.81-2.97-3.45-8.03 2.03-12.49a2.1 2.1 0 0 1 2.5 0c4.23 3.45 4.21 7.25 3.16 10.17a16 16 0 0 1 15.91 11.36l5.31 11.31 2.92 6.22a6.008 6.008 0 0 1-2.88 7.99Z"
              fill="#cb8252"
            />
            <circle cx="42" cy="26" r="3" fill="#2c2f38" />
            <circle cx="54" cy="43" r="1" fill="#805333" />
            <path
              d="m58.55 40.47-2.92-6.22-14.53 13.76.25.54a6 6 0 0 0 7.98 2.88l6.34-2.97a6.008 6.008 0 0 0 2.88-7.99Zm-4.55 3.53a1 1 0 1 1 1-1 1 1 0 0 1-1 1Z"
              fill="#cf976a"
            />
            <circle cx="41" cy="25" r="1.25" fill="#ecf0f1" />
          </svg>
        </span>
      </button>
      <button id="settingsButton" aria-label="Settings" aria-haspopup="dialog" aria-controls="settingsDialog" title="Settings">
        <span class="icon-glyph icon-svg" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path
              d="M9.593 3.94c.09-.542.559-.94 1.11-.94h2.594c.55 0 1.019.398 1.11.94l.213 1.281c.062.374.312.686.644.87.074.041.147.083.22.127.326.196.721.257 1.076.124l1.217-.456a1.125 1.125 0 0 1 1.369.491l1.297 2.246a1.125 1.125 0 0 1-.259 1.431l-1.004.826c-.293.241-.438.612-.431.991.001.042.002.084.002.127s0 .085-.002.127c-.007.379.138.75.431.991l1.004.827a1.125 1.125 0 0 1 .259 1.43l-1.297 2.247a1.125 1.125 0 0 1-1.369.49l-1.217-.455a1.35 1.35 0 0 0-1.076.124 5.58 5.58 0 0 1-.864.495 1.35 1.35 0 0 0-.644.87l-.213 1.281c-.09.542-.559.94-1.11.94H10.703a1.125 1.125 0 0 1-1.11-.94l-.214-1.281a1.35 1.35 0 0 0-.644-.87 5.446 5.446 0 0 1-.864-.495 1.35 1.35 0 0 0-1.076-.124l-1.217.455a1.125 1.125 0 0 1-1.369-.49L3.557 15.377a1.125 1.125 0 0 1 .259-1.431l1.004-.826c.292-.241.437-.613.43-.992a4.643 4.643 0 0 1-.002-.254c0-.042.001-.084.002-.127.007-.379-.138-.75-.43-.991l-1.005-.827A1.125 1.125 0 0 1 3.557 8.623l1.297-2.246a1.125 1.125 0 0 1 1.369-.491l1.217.456c.355.133.75.072 1.076-.124.073-.044.147-.086.22-.127.332-.183.582-.495.644-.87l.213-1.281Z"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </span>
      </button>
      <button id="helpButton" aria-label="Help" aria-haspopup="dialog" aria-controls="helpDialog" title="Help (press ?, H, F1 or Ctrl+/)">
        <span class="icon-glyph icon-text" aria-hidden="true" data-icon-font="uicons">?</span>
      </button>
      <button id="reloadButton" title="Force reload" aria-label="Force reload">
        <span class="icon-glyph icon-svg" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <polyline
              points="23 4 23 10 17 10"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </span>
      </button>
    </nav>
  </header>

  <nav id="sideMenu" class="side-menu" aria-label="Sidebar navigation" hidden>
    <div class="sidebar-controls"></div>
    <ul>
      <li><a href="#setup-manager" data-nav-key="setupManageHeading">Project Overview</a></li>
      <li><a href="#setup-config" data-nav-key="deviceSelectionHeading">Configure Devices</a></li>
      <li><a href="#results" data-nav-key="resultsHeading">Power Summary</a></li>
      <li><a href="#setupDiagram" data-nav-key="setupDiagramHeading">Connection Diagram</a></li>
      <li><a href="#batteryComparison" data-nav-key="batteryComparisonHeading">Battery Comparison</a></li>
      <li><a href="#projectRequirementsOutput" data-nav-key="projectRequirementsNav">Project Requirements</a></li>
      <li><a href="#gearListOutput" data-nav-key="gearListNav">Gear List</a></li>
      <li><a href="#device-manager" data-nav-key="deviceManagerHeading">Device Library</a></li>
      <li class="sidebar-divider" role="separator" aria-hidden="true"></li>
      <li>
        <button
          type="button"
          data-nav-key="openSettingsNav"
          data-sidebar-action="open-settings"
          aria-haspopup="dialog"
          aria-controls="settingsDialog"
        >
          Open Settings
        </button>
      </li>
      <li>
        <button
          type="button"
          data-nav-key="openHelpNav"
          data-sidebar-action="open-help"
          aria-haspopup="dialog"
          aria-controls="helpDialog"
        >
          Open Help Center
        </button>
      </li>
    </ul>
  </nav>
  <div id="menuOverlay" class="hidden"></div>

  <main id="mainContent" tabindex="-1">

  <p id="tagline">Plan your film rig and calculate power consumption &amp; battery life.</p>

  <section id="setup-manager">
    <h2 id="setupManageHeading">Project Overview</h2>
    <div class="form-row">
      <label for="setupSelect" id="savedSetupsLabel">Saved Projects:</label>
      <div class="select-wrapper">
        <select id="setupSelect" aria-labelledby="savedSetupsLabel">
          <option value="">-- New Project --</option>
        </select>
      </div>
      <button id="deleteSetupBtn" title="Delete selected project">
        <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF254;</span>Delete
      </button>
    </div>
    <div class="form-row">
      <label for="setupName" id="setupNameLabel">Project Name:</label>
      <input type="text" id="setupName" placeholder="Project name" aria-labelledby="setupNameLabel" />
      <button id="saveSetupBtn"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF207;</span>Save</button>
    </div>
    <div class="form-row form-row-actions" role="group" aria-label="Project actions">
      <span class="form-label-spacer" aria-hidden="true"></span>
      <div class="form-actions">
        <button id="shareSetupBtn">
          <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE7AB;</span>
          Export Project
        </button>
        <div id="sharedLinkRow" class="share-import-group">
          <label for="applySharedLinkBtn" id="sharedLinkLabel" class="visually-hidden">Project file</label>
          <input
            type="file"
            id="sharedLinkInput"
            accept=".json"
            aria-hidden="true"
            tabindex="-1"
            class="visually-hidden"
          />
          <button id="applySharedLinkBtn">
            <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE7C7;</span>
            Import Project
          </button>
        </div>
      </div>
    </div>
    <p id="shareLinkMessage" class="hidden status-message" role="status" aria-live="polite"></p>
    <div class="form-row form-row-actions" role="group" aria-label="Project exports">
      <span class="form-label-spacer" aria-hidden="true"></span>
      <div class="form-actions">
        <button id="generateOverviewBtn">
          <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF1F5;</span>
          Generate Overview
        </button>
        <button id="generateGearListBtn" type="button">
          <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE467;</span>
          Generate Gear List and Project Requirements
        </button>
        <button id="deleteGearListProjectBtn" type="button" class="hidden"></button>
      </div>
    </div>
  </section>

  <section id="setup-config">
    <h2 id="deviceSelectionHeading">Configure Devices</h2>
      <div class="form-row">
        <label for="cameraSelect" id="cameraLabel">Camera:</label>
        <div class="select-wrapper">
          <select id="cameraSelect" aria-labelledby="cameraLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="monitorSelect" id="monitorLabel">Monitor:</label>
        <div class="select-wrapper">
          <select id="monitorSelect" aria-labelledby="monitorLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="videoSelect" id="videoLabel">Wireless Transmitter:</label>
        <div class="select-wrapper">
          <select id="videoSelect" aria-labelledby="videoLabel"></select>
        </div>
      </div>

      <div class="form-row hidden" id="cageSelectRow">
        <label for="cageSelect" id="cageLabel">Camera Cage:</label>
        <div class="select-wrapper">
          <select id="cageSelect" aria-labelledby="cageLabel"></select>
        </div>
      </div>

    <fieldset>
      <legend id="fizLegend">FIZ (Follow Focus) Systems</legend>
      <div class="form-row">
        <label for="motor1Select" id="fizMotorsLabel">FIZ Motors:</label>
        <div class="select-wrapper">
          <select id="motor1Select" aria-labelledby="fizMotorsLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="motor2Select"></label>
        <select id="motor2Select" aria-label="Additional FIZ motor"></select>
      </div>
      <div class="form-row">
        <label for="motor3Select"></label>
        <select id="motor3Select" aria-label="Additional FIZ motor"></select>
      </div>
      <div class="form-row">
        <label for="motor4Select"></label>
        <select id="motor4Select" aria-label="Additional FIZ motor"></select>
      </div>
      <div class="form-row">
        <label for="controller1Select" id="fizControllersLabel">FIZ Controllers:</label>
        <div class="select-wrapper">
          <select id="controller1Select" aria-labelledby="fizControllersLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="controller2Select"></label>
        <select id="controller2Select" aria-label="Additional FIZ controller"></select>
      </div>
      <div class="form-row">
        <label for="controller3Select"></label>
        <select id="controller3Select" aria-label="Additional FIZ controller"></select>
      </div>
      <div class="form-row">
        <label for="controller4Select"></label>
        <select id="controller4Select" aria-label="Additional FIZ controller"></select>
      </div>
      <div class="form-row">
        <label for="distanceSelect" id="distanceLabel">Distance Sensor:</label>
        <div class="select-wrapper">
          <select id="distanceSelect" aria-labelledby="distanceLabel"></select>
        </div>
      </div>
    </fieldset>

    <div class="form-row" id="batteryPlateRow">
      <label for="batteryPlateSelect" id="batteryPlateLabel">Battery Plate:</label>
      <select id="batteryPlateSelect" aria-labelledby="batteryPlateLabel"></select>
    </div>

      <div class="form-row">
        <label for="batterySelect" id="batteryLabel">Battery:</label>
        <div class="select-wrapper">
          <select id="batterySelect" aria-labelledby="batteryLabel"></select>
        </div>
      </div>
    <div class="form-row" id="batteryHotswapRow">
      <label for="batteryHotswapSelect" id="batteryHotswapLabel">Battery Hotswap:</label>
      <div class="select-wrapper">
        <select id="batteryHotswapSelect" aria-labelledby="batteryHotswapLabel"></select>
      </div>
    </div>
  </section>

  <section id="results">
    <h2 id="resultsHeading">Power Summary</h2>
    <ul id="breakdownList">
      <!-- Device breakdown will be inserted here by script.js -->
    </ul>
    <div id="powerDiagram" class="hidden power-diagram">
      <div id="powerDiagramBar" class="power-bar" role="img" aria-label="Power usage diagram"></div>
      <div id="powerDiagramLegend" class="power-diagram-legend"></div>
      <p id="maxPowerText" class="status-message power-diagram-note"></p>
    </div>
    <p><strong><span id="totalPowerLabel">Total Consumption:</span></strong> <span id="totalPower">0.0</span> W</p>
    <p><strong><span id="totalCurrent144Label">Total Current (at 14.4V):</span></strong> <span id="totalCurrent144">0.00</span> A</p>
    <p><strong><span id="totalCurrent12Label">Total Current (at 12V):</span></strong> <span id="totalCurrent12">0.00</span> A</p>
    <p><strong><span id="batteryLifeLabel">Runtime (estimated):</span></strong> <span id="batteryLife">0.00</span> <span id="batteryLifeUnit">hrs</span> <span id="runtimeAverageNote"></span></p>
    <p><strong><span id="batteryCountLabel">Batteries for 10h shoot:</span></strong> <span id="batteryCount">–</span></p>
    <p id="pinWarning" class="status-message" role="status" aria-live="polite" aria-describedby="batteryLabel"></p>
    <p id="dtapWarning" class="status-message" role="status" aria-live="polite" aria-describedby="batteryLabel"></p>
    <p id="hotswapWarning" class="status-message" role="status" aria-live="polite" aria-describedby="batteryHotswapLabel"></p>
    <div id="temperatureNote"></div>
    <button id="runtimeFeedbackBtn" type="button">
      <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF13E;</span>Submit User Runtime Feedback
    </button>
    <div id="feedbackTableContainer" class="hidden">
      <table id="userFeedbackTable" class="hidden"></table>
    </div>
  </section>

  <section id="setupDiagram">
    <h2 id="setupDiagramHeading">Connection Diagram</h2>
    <p id="compatWarning" class="status-message" role="status" aria-live="polite"></p>
    <p id="diagramDesc" class="visually-hidden">Visual representation of connected devices.</p>
    <div id="diagramArea" role="img" aria-label="Project diagram" aria-describedby="diagramDesc">
      <div id="diagramPopup" class="diagram-popup"></div>
    </div>
    <div id="diagramLegend" class="diagram-legend"></div>
    <div class="diagram-controls">
      <button id="zoomOut" type="button" title="Zoom out" aria-label="Zoom out">
        <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE9E0;</span>
      </button>
      <button id="zoomIn" type="button" title="Zoom in" aria-label="Zoom in">
        <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE02E;</span>
      </button>
      <button id="resetView" type="button">
        <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEB6D;</span>
        Reset View
      </button>
      <button id="gridSnapToggle" type="button" aria-pressed="false">Snap to Grid</button>
    </div>
    <p id="diagramHint" class="diagram-hint"></p>
  </section>

  <section id="projectRequirementsOutput" class="hidden"></section>

  <section id="gearListOutput" class="hidden"></section>

  <section id="batteryComparison" class="battery-comparison-section" style="display: none;">
    <h2 id="batteryComparisonHeading">Battery Comparison</h2>
    <div id="batteryTableContainer" class="battery-table-container">
      <table id="batteryTable"></table>
    </div>
  </section>

  <button id="toggleDeviceManager" aria-controls="device-manager" aria-expanded="false">Edit Device Data…</button>

  <section id="device-manager" class="hidden">
    <h2 id="deviceManagerHeading">Device Library</h2>
    <div class="button-group"> <!-- Changed from form-row to a generic div for button grouping -->
<h3 id="addDeviceHeading">Add New Device</h3>
    <div class="form-row">
      <label for="newCategory" id="categoryLabel">Category:</label>
      <select id="newCategory"></select>
    </div>
    <div class="form-row" id="subcategoryField" hidden>
      <label for="newSubcategory" id="subcategoryLabel">Subcategory:</label>
      <select id="newSubcategory"></select>
    </div>
    <div class="form-row">
      <label for="newName" id="deviceNameLabel">Name:</label>
      <input type="text" id="newName" placeholder="Device name" aria-labelledby="deviceNameLabel" />
    </div>
    <div class="form-row" id="wattField">
      <label for="newWatt" id="consumptionLabel">Consumption (W):</label>
      <input type="number" id="newWatt" step="0.1" placeholder="e.g. 12.5" aria-labelledby="consumptionLabel" />
    </div>
    <div id="dynamicFields" hidden></div>
    <div id="cameraFields" class="hidden">
      <div class="camera-subsection">
        <h4 id="powerInputsHeading">Power Inputs</h4>
        <div class="form-row">
          <label for="cameraWatt" id="cameraWattLabel">Power Draw (W):</label>
          <input type="number" id="cameraWatt" step="0.1" aria-labelledby="cameraWattLabel" />
        </div>
        <div class="form-row">
          <label for="cameraVoltage" id="cameraVoltageLabel">Voltage Range:</label>
          <input type="text" id="cameraVoltage" aria-labelledby="cameraVoltageLabel" />
        </div>
        <div class="form-row">
          <label for="cameraPortType" id="cameraPortTypeLabel">Port Type:</label>
          <select id="cameraPortType" aria-labelledby="cameraPortTypeLabel"></select>
        </div>
        <div class="form-row">
          <div class="form-row-label" id="cameraPlatesLabel">Battery Plates:</div>
          <div
            id="batteryPlatesContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraPlatesLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="powerDistributionHeading">Power Distribution</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraPowerDistLabel">Outputs:</div>
          <div
            id="powerDistContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraPowerDistLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="videoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraVideoOutputsLabel">Outputs:</div>
          <div
            id="videoOutputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraVideoOutputsLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="fizConnectorHeading">FIZ Connector</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraFIZConnectorLabel">Connectors:</div>
          <div
            id="fizConnectorContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraFIZConnectorLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="mediaHeading">Media</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraMediaLabel">Recording Media:</div>
          <div
            id="cameraMediaContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraMediaLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="viewfinderHeading">Viewfinder</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraViewfinderLabel">Viewfinders:</div>
          <div
            id="viewfinderContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraViewfinderLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="lensMountHeading">Lens Mount</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraLensMountLabel">Lens Mount:</div>
          <div
            id="lensMountContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraLensMountLabel"
          ></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="timecodeHeading">Timecode</h4>
        <div class="form-row">
          <div class="form-row-label" id="cameraTimecodeLabel">Timecode:</div>
          <div
            id="timecodeContainer"
            class="flex-1"
            role="group"
            aria-labelledby="cameraTimecodeLabel"
          ></div>
        </div>
      </div>
    </div>
    <div id="monitorFields" class="hidden">
      <div class="monitor-subsection">
        <h4 id="monitorDetailsHeading">Monitor Details</h4>
        <div class="form-row">
          <label for="monitorScreenSize" id="monitorScreenSizeLabel">Screen Size (in):</label>
          <input type="number" id="monitorScreenSize" step="0.1" aria-labelledby="monitorScreenSizeLabel" />
        </div>
        <div class="form-row">
          <label for="monitorBrightness" id="monitorBrightnessLabel">Brightness (nits):</label>
          <input type="number" id="monitorBrightness" step="1" aria-labelledby="monitorBrightnessLabel" />
        </div>
      </div>
      <div class="monitor-subsection">
        <h4 id="monitorPowerHeading">Power Input</h4>
        <div class="form-row">
          <label for="monitorWatt" id="monitorWattLabel">Power Draw (W):</label>
          <input type="number" id="monitorWatt" step="0.1" aria-labelledby="monitorWattLabel" />
        </div>
        <div class="form-row">
          <label for="monitorVoltage" id="monitorVoltageLabel">Voltage Range:</label>
          <input type="text" id="monitorVoltage" aria-labelledby="monitorVoltageLabel" />
        </div>
        <div class="form-row">
          <label for="monitorPortType" id="monitorPortTypeLabel">Port Type:</label>
          <select id="monitorPortType" aria-labelledby="monitorPortTypeLabel"></select>
        </div>
      </div>
      <div class="monitor-subsection">
        <h4 id="monitorVideoInputsHeading">Video Inputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="monitorVideoInputsLabel">Inputs:</div>
          <div
            id="monitorVideoInputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="monitorVideoInputsLabel"
          ></div>
        </div>
      </div>
      <div class="monitor-subsection">
        <h4 id="monitorVideoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="monitorVideoOutputsLabel">Outputs:</div>
          <div
            id="monitorVideoOutputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="monitorVideoOutputsLabel"
          ></div>
        </div>
      </div>
      <div class="form-row">
        <label for="monitorWirelessTx" id="monitorWirelessTxLabel">Wireless TX:</label>
        <input type="checkbox" id="monitorWirelessTx" aria-labelledby="monitorWirelessTxLabel" />
      </div>
      <div class="form-row">
        <label for="monitorLatency" id="monitorLatencyLabel">Latency:</label>
        <input type="text" id="monitorLatency" aria-labelledby="monitorLatencyLabel" />
      </div>
      <div class="form-row">
        <label for="monitorAudioOutput" id="monitorAudioOutputLabel">Audio Output:</label>
        <input type="text" id="monitorAudioOutput" aria-labelledby="monitorAudioOutputLabel" />
      </div>
    </div>
    <div id="viewfinderFields" class="hidden">
      <div class="viewfinder-subsection">
        <h4 id="viewfinderDetailsHeading">Viewfinder Details</h4>
        <div class="form-row">
          <label for="viewfinderScreenSize" id="viewfinderScreenSizeLabel">Screen Size (in):</label>
          <input type="number" id="viewfinderScreenSize" step="0.1" aria-labelledby="viewfinderScreenSizeLabel" />
        </div>
        <div class="form-row">
          <label for="viewfinderBrightness" id="viewfinderBrightnessLabel">Brightness (nits):</label>
          <input type="number" id="viewfinderBrightness" step="1" aria-labelledby="viewfinderBrightnessLabel" />
        </div>
      </div>
      <div class="viewfinder-subsection">
        <h4 id="viewfinderPowerHeading">Power Input</h4>
        <div class="form-row">
          <label for="viewfinderWatt" id="viewfinderWattLabel">Power Draw (W):</label>
          <input type="number" id="viewfinderWatt" step="0.1" aria-labelledby="viewfinderWattLabel" />
        </div>
        <div class="form-row">
          <label for="viewfinderVoltage" id="viewfinderVoltageLabel">Voltage Range:</label>
          <input type="text" id="viewfinderVoltage" aria-labelledby="viewfinderVoltageLabel" />
        </div>
        <div class="form-row">
          <label for="viewfinderPortType" id="viewfinderPortTypeLabel">Port Type:</label>
          <select id="viewfinderPortType" aria-labelledby="viewfinderPortTypeLabel"></select>
        </div>
      </div>
      <div class="viewfinder-subsection">
        <h4 id="viewfinderVideoInputsHeading">Video Inputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="viewfinderVideoInputsLabel">Inputs:</div>
          <div
            id="viewfinderVideoInputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="viewfinderVideoInputsLabel"
          ></div>
        </div>
      </div>
      <div class="viewfinder-subsection">
        <h4 id="viewfinderVideoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="viewfinderVideoOutputsLabel">Outputs:</div>
          <div
            id="viewfinderVideoOutputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="viewfinderVideoOutputsLabel"
          ></div>
        </div>
      </div>
      <div class="form-row">
        <label for="viewfinderWirelessTx" id="viewfinderWirelessTxLabel">Wireless TX:</label>
        <input type="checkbox" id="viewfinderWirelessTx" aria-labelledby="viewfinderWirelessTxLabel" />
      </div>
      <div class="form-row">
        <label for="viewfinderLatency" id="viewfinderLatencyLabel">Latency:</label>
        <input type="text" id="viewfinderLatency" aria-labelledby="viewfinderLatencyLabel" />
      </div>
    </div>
    <div id="videoFields" class="hidden">
      <div class="form-row">
        <label for="videoPower" id="videoPowerInputLabel">Power Input:</label>
        <input type="text" id="videoPower" aria-labelledby="videoPowerInputLabel" />
      </div>
      <div class="video-subsection">
        <h4 id="videoVideoInputsHeading">Video Inputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="videoVideoInputsLabel">Inputs:</div>
          <div
            id="videoVideoInputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="videoVideoInputsLabel"
          ></div>
        </div>
      </div>
      <div class="video-subsection">
        <h4 id="videoVideoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <div class="form-row-label" id="videoVideoOutputsLabel">Outputs:</div>
          <div
            id="videoVideoOutputsContainer"
            class="flex-1"
            role="group"
            aria-labelledby="videoVideoOutputsLabel"
          ></div>
        </div>
      </div>
      <div class="form-row">
        <label for="videoFrequency" id="videoFrequencyLabel">Frequency:</label>
        <input type="text" id="videoFrequency" aria-labelledby="videoFrequencyLabel" />
      </div>
      <div class="form-row">
        <label for="videoLatency" id="videoLatencyLabel">Latency:</label>
        <input type="text" id="videoLatency" aria-labelledby="videoLatencyLabel" />
      </div>
    </div>
    <div id="motorFields" class="hidden">
      <div class="form-row">
        <label for="motorConnector" id="motorConnectorLabel">Connector:</label>
        <select id="motorConnector" aria-labelledby="motorConnectorLabel"></select>
      </div>
      <div class="form-row">
        <label for="motorInternal" id="motorInternalLabel">Internal Controller:</label>
        <input type="checkbox" id="motorInternal" aria-labelledby="motorInternalLabel" />
      </div>
      <div class="form-row">
        <label for="motorTorque" id="motorTorqueLabel">Torque (Nm):</label>
        <input type="number" id="motorTorque" step="0.1" aria-labelledby="motorTorqueLabel" />
      </div>
      <div class="form-row">
        <label for="motorGearTypes" id="motorGearLabel">Gear Types:</label>
        <input type="text" id="motorGearTypes" aria-labelledby="motorGearLabel" />
      </div>
      <div class="form-row">
        <label for="motorNotes" id="motorNotesLabel">Notes:</label>
        <input type="text" id="motorNotes" aria-labelledby="motorNotesLabel" />
      </div>
    </div>
    <div id="controllerFields" class="hidden">
      <div class="form-row">
        <label for="controllerConnector" id="controllerConnectorLabel">Connector:</label>
        <select id="controllerConnector" aria-labelledby="controllerConnectorLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerPower" id="controllerPowerLabel">Power Source:</label>
        <select id="controllerPower" aria-labelledby="controllerPowerLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerBattery" id="controllerBatteryLabel">Battery Type:</label>
        <select id="controllerBattery" aria-labelledby="controllerBatteryLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerConnectivity" id="controllerConnectivityLabel">Connectivity:</label>
        <select id="controllerConnectivity" aria-labelledby="controllerConnectivityLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerNotes" id="controllerNotesLabel">Notes:</label>
        <input type="text" id="controllerNotes" aria-labelledby="controllerNotesLabel" />
      </div>
    </div>
    <div id="distanceFields" class="hidden">
      <div class="form-row">
        <label for="distanceConnection" id="distanceConnectionLabel">Connection:</label>
        <select id="distanceConnection" aria-labelledby="distanceConnectionLabel"></select>
      </div>
      <div class="form-row">
        <label for="distanceMethod" id="distanceMethodLabel">Method:</label>
        <select id="distanceMethod" aria-labelledby="distanceMethodLabel"></select>
      </div>
      <div class="form-row">
        <label for="distanceRange" id="distanceRangeLabel">Range:</label>
        <input type="text" id="distanceRange" aria-labelledby="distanceRangeLabel" />
      </div>
      <div class="form-row">
        <label for="distanceAccuracy" id="distanceAccuracyLabel">Accuracy:</label>
        <input type="text" id="distanceAccuracy" aria-labelledby="distanceAccuracyLabel" />
      </div>
      <div class="form-row">
        <label for="distanceOutput" id="distanceOutputLabel">Display:</label>
        <select id="distanceOutput" aria-labelledby="distanceOutputLabel"></select>
      </div>
      <div class="form-row">
        <label for="distanceNotes" id="distanceNotesLabel">Notes:</label>
        <input type="text" id="distanceNotes" aria-labelledby="distanceNotesLabel" />
      </div>
    </div>
    <div id="batteryFields" class="hidden">
      <div class="form-row">
        <label for="newCapacity" id="capacityLabel">Capacity (Wh):</label>
        <input type="number" id="newCapacity" step="0.1" placeholder="e.g. 98" aria-labelledby="capacityLabel" />
      </div>
      <div class="form-row">
        <label for="newPinA" id="pinLabel">Max Pin A:</label>
        <input type="number" id="newPinA" step="0.1" placeholder="e.g. 10" aria-labelledby="pinLabel" />
      </div>
      <div class="form-row">
        <label for="newDtapA" id="dtapLabel">Max D-Tap A:</label>
        <input type="number" id="newDtapA" step="0.1" placeholder="e.g. 5" aria-labelledby="dtapLabel" />
      </div>
    </div>
    <button id="addDeviceBtn">Add</button>
    <button id="cancelEditBtn" class="hidden"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF131;</span>Cancel</button>
      <button id="exportDataBtn"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE7AB;</span>Export Database</button>
      <button id="importDataBtn"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE7C7;</span>Import Database</button>
      <input type="file" id="importFileInput" accept=".json" class="hidden" />
      <button id="exportAndRevertBtn">Export and Revert to default Database</button>
    </div>
    <textarea id="exportOutput" class="hidden" readonly></textarea>

    <h3 id="existingDevicesHeading">Existing Devices</h3>
    <div id="deviceListContainer" class="device-list-container"></div>
  </section>
  </main>

  <footer id="siteFooter">
    <a id="impressumLink" href="legal/impressum-en.html">Imprint</a>
    |
    <a id="privacyLink" href="legal/datenschutz-en.html">Privacy Policy</a>
  </footer>

  <dialog id="settingsDialog" class="app-modal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" hidden>
    <div class="modal-surface modal-surface-scrollable settings-content">
      <h2 id="settingsTitle">Settings</h2>
      <div
        id="settingsTablist"
        class="settings-tabs"
        role="tablist"
        aria-label="Settings sections"
        aria-orientation="horizontal"
      >
        <button
          type="button"
          class="settings-tab"
          id="settingsTab-general"
          role="tab"
          aria-controls="settingsPanel-general"
          aria-selected="true"
        >
          <span
            class="settings-tab-icon icon-glyph"
            aria-hidden="true"
            data-icon-font="uicons"
          >
            &#xEAC4;
          </span>
          <span class="settings-tab-label">General</span>
        </button>
        <button
          type="button"
          class="settings-tab"
          id="settingsTab-autoGear"
          role="tab"
          aria-controls="settingsPanel-autoGear"
          aria-selected="false"
          tabindex="-1"
        >
          <span
            class="settings-tab-icon icon-glyph"
            aria-hidden="true"
            data-icon-font="uicons"
          >
            &#xE467;
          </span>
          <span class="settings-tab-label">Automatic Gear</span>
        </button>
        <button
          type="button"
          class="settings-tab"
          id="settingsTab-accessibility"
          role="tab"
          aria-controls="settingsPanel-accessibility"
          aria-selected="false"
          tabindex="-1"
        >
          <span
            class="settings-tab-icon icon-glyph"
            aria-hidden="true"
            data-icon-font="uicons"
          >
            &#xE597;
          </span>
          <span class="settings-tab-label">Accessibility</span>
        </button>
        <button
          type="button"
          class="settings-tab"
          id="settingsTab-backup"
          role="tab"
          aria-controls="settingsPanel-backup"
          aria-selected="false"
          tabindex="-1"
        >
          <span
            class="settings-tab-icon icon-glyph"
            aria-hidden="true"
            data-icon-font="uicons"
          >
            &#xE825;
          </span>
          <span class="settings-tab-label">Backup &amp; Restore</span>
        </button>
        <button
          type="button"
          class="settings-tab"
          id="settingsTab-data"
          role="tab"
          aria-controls="settingsPanel-data"
          aria-selected="false"
          tabindex="-1"
        >
          <span
            class="settings-tab-icon icon-glyph"
            aria-hidden="true"
            data-icon-font="uicons"
          >
            &#xF2DF;
          </span>
          <span class="settings-tab-label">Data &amp; Storage</span>
        </button>
        <button
          type="button"
          class="settings-tab"
          id="settingsTab-about"
          role="tab"
          aria-controls="settingsPanel-about"
          aria-selected="false"
          tabindex="-1"
        >
          <span
            class="settings-tab-icon icon-glyph"
            aria-hidden="true"
            data-icon-font="uicons"
          >
            &#xF139;
          </span>
          <span class="settings-tab-label">About &amp; Support</span>
        </button>
      </div>
      <section
        id="settingsPanel-general"
        class="settings-panel"
        role="tabpanel"
        aria-labelledby="settingsTab-general generalSettingsHeading"
      >
        <h3 id="generalSettingsHeading">General</h3>
        <div class="form-row">
          <label for="settingsLanguage" id="settingsLanguageLabel">Language</label>
          <select id="settingsLanguage">
            <option value="en">English</option>
            <option value="de">Deutsch</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
            <option value="it">Italiano</option>
          </select>
        </div>
        <div class="form-row">
          <label for="settingsDarkMode" id="settingsDarkModeLabel">Dark mode</label>
          <input type="checkbox" id="settingsDarkMode" />
        </div>
        <div class="form-row">
          <label for="settingsPinkMode" id="settingsPinkModeLabel">Pink mode</label>
          <input type="checkbox" id="settingsPinkMode" />
        </div>
        <div class="form-row">
          <label for="accentColorInput" id="accentColorLabel">Accent color</label>
          <input type="color" id="accentColorInput" value="#001589" />
          <button type="button" id="accentColorReset" class="inline-form-button">
            Reset to default
          </button>
        </div>
        <div class="form-row">
          <label for="settingsTemperatureUnit" id="settingsTemperatureUnitLabel">Temperature unit</label>
          <select id="settingsTemperatureUnit">
            <option value="celsius">Celsius (°C)</option>
            <option value="fahrenheit">Fahrenheit (°F)</option>
          </select>
        </div>
        <div class="form-row">
          <label for="settingsFontSize" id="settingsFontSizeLabel">Font size</label>
          <select id="settingsFontSize">
            <option value="12">12px (Smaller)</option>
            <option value="14">14px</option>
            <option value="16">16px</option>
            <option value="18">18px</option>
            <option value="20">20px (Bigger)</option>
          </select>
        </div>
        <div class="form-row">
          <label for="settingsFontFamily" id="settingsFontFamilyLabel">Font</label>
          <select id="settingsFontFamily">
            <optgroup label="Bundled fonts" id="bundledFontOptions">
              <option value="'Ubuntu', sans-serif">Ubuntu</option>
              <option value="'Arial', sans-serif">Arial</option>
              <option value="'Times New Roman', serif">Times New Roman</option>
              <option value="'Courier New', monospace">Courier New</option>
            </optgroup>
            <optgroup label="Local fonts" id="localFontsGroup"></optgroup>
          </select>
          <button type="button" id="localFontsButton" class="inline-form-button" hidden>
            Add local font…
          </button>
          <input
            type="file"
            id="localFontsInput"
            class="visually-hidden"
            accept=".woff2,.woff,.ttf,.otf,.ttc,application/font-woff,application/font-woff2,application/x-font-ttf,application/x-font-opentype,font/ttf,font/otf,font/woff,font/woff2"
            multiple
            hidden
          />
          <p id="localFontsStatus" class="settings-hint" role="status" aria-live="polite" hidden></p>
        </div>
        <div class="form-row">
          <label for="settingsLogo" id="settingsLogoLabel">Logo (SVG)</label>
          <div class="file-input-wrapper">
            <input type="file" id="settingsLogo" accept="image/svg+xml" />
            <div id="settingsLogoPreview" class="logo-preview" hidden aria-live="polite"></div>
          </div>
        </div>
      </section>
      <section
        id="settingsPanel-autoGear"
        class="settings-panel"
        role="tabpanel"
        aria-labelledby="settingsTab-autoGear autoGearHeading"
        hidden
      >
        <h3 id="autoGearHeading">Automatic Gear Rules</h3>
        <p id="autoGearDescription" class="settings-hint"></p>
        <div id="autoGearPresetPanel" class="auto-gear-preset-panel">
          <p id="autoGearPresetDescription" class="settings-hint"></p>
          <div class="auto-gear-preset-row">
            <label for="autoGearPresetSelect" id="autoGearPresetLabel">Preset</label>
            <select id="autoGearPresetSelect" class="auto-gear-preset-select" disabled>
              <option value="">Custom rules</option>
            </select>
            <button type="button" id="autoGearSavePreset">Save preset</button>
            <button type="button" id="autoGearDeletePreset" disabled>Delete preset</button>
          </div>
        </div>
        <div id="autoGearBackupsSection" class="auto-gear-backups">
          <div class="auto-gear-backup-header">
            <h4 id="autoGearBackupsHeading">Automatic backups</h4>
            <div class="auto-gear-backup-toggle-row">
              <input type="checkbox" id="autoGearShowBackups" />
              <label for="autoGearShowBackups" id="autoGearShowBackupsLabel">Show automatic backups</label>
            </div>
          </div>
          <p id="autoGearBackupsDescription" class="settings-hint"></p>
          <p id="autoGearBackupsHidden" class="settings-hint" hidden></p>
          <div id="autoGearBackupControls" class="auto-gear-backup-controls" aria-live="polite">
            <label for="autoGearBackupSelect" id="autoGearBackupSelectLabel">Choose a backup</label>
            <div class="auto-gear-backup-row">
              <select id="autoGearBackupSelect" class="auto-gear-backup-select" disabled>
                <option value="">Select a backup to restore</option>
              </select>
              <button type="button" id="autoGearBackupRestore" disabled>Restore</button>
            </div>
            <p id="autoGearBackupEmpty" class="auto-gear-backup-empty" hidden>No automatic backups yet.</p>
          </div>
        </div>
        <div id="autoGearFilters" class="auto-gear-filters" role="search">
          <div class="auto-gear-filter-field">
            <label for="autoGearSearch" id="autoGearSearchLabel">Search rules</label>
            <input
              type="search"
              id="autoGearSearch"
              placeholder="Search by name, scenario or item"
              autocomplete="off"
            />
          </div>
          <div class="auto-gear-filter-field">
            <label for="autoGearFilterScenario" id="autoGearFilterScenarioLabel">Filter by scenario</label>
            <select id="autoGearFilterScenario" class="auto-gear-filter-select" disabled>
              <option value="all">All scenarios</option>
            </select>
          </div>
          <button type="button" id="autoGearFilterClear" class="auto-gear-filter-clear" hidden>
            Clear filters
          </button>
        </div>
        <div id="autoGearRulesList" class="auto-gear-rules" aria-live="polite"></div>
        <div class="auto-gear-action-row">
          <button type="button" id="autoGearAddRule">Add rule</button>
          <button type="button" id="autoGearResetFactory">Reset to factory additions</button>
          <button type="button" id="autoGearExport">Export rules</button>
          <button type="button" id="autoGearImport">Import rules</button>
          <input type="file" id="autoGearImportInput" accept=".json,application/json" hidden />
        </div>
        <div id="autoGearEditor" class="auto-gear-editor" hidden>
          <div class="form-row">
            <label for="autoGearRuleName" id="autoGearRuleNameLabel">Rule name</label>
            <input type="text" id="autoGearRuleName" />
          </div>
          <div class="form-row">
            <label for="autoGearScenarios" id="autoGearScenariosLabel">Required scenarios</label>
            <select
              id="autoGearScenarios"
              class="auto-gear-scenarios auto-gear-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearMattebox" id="autoGearMatteboxLabel">Mattebox options</label>
            <select
              id="autoGearMattebox"
              class="auto-gear-mattebox auto-gear-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearCameraHandle" id="autoGearCameraHandleLabel">Camera handles</label>
            <select
              id="autoGearCameraHandle"
              class="auto-gear-camera-handle auto-gear-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearViewfinderExtension" id="autoGearViewfinderExtensionLabel">Viewfinder extension</label>
            <select
              id="autoGearViewfinderExtension"
              class="auto-gear-viewfinder-extension auto-gear-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row" hidden>
            <label for="autoGearVideoDistribution" id="autoGearVideoDistributionLabel">Video distribution</label>
            <select
              id="autoGearVideoDistribution"
              class="auto-gear-video-distribution auto-gear-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearCamera" id="autoGearCameraLabel">Camera</label>
            <select
              id="autoGearCamera"
              class="auto-gear-camera auto-gear-multiselect auto-gear-device-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row" hidden>
            <label for="autoGearMonitor" id="autoGearMonitorLabel">Onboard monitor</label>
            <select
              id="autoGearMonitor"
              class="auto-gear-monitor auto-gear-multiselect auto-gear-device-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row" hidden>
            <label for="autoGearWireless" id="autoGearWirelessLabel">Wireless transmitter</label>
            <select
              id="autoGearWireless"
              class="auto-gear-wireless auto-gear-multiselect auto-gear-device-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearMotors" id="autoGearMotorsLabel">FIZ motors</label>
            <select
              id="autoGearMotors"
              class="auto-gear-motors auto-gear-multiselect auto-gear-device-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearControllers" id="autoGearControllersLabel">FIZ controllers</label>
            <select
              id="autoGearControllers"
              class="auto-gear-controllers auto-gear-multiselect auto-gear-device-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="form-row">
            <label for="autoGearDistance" id="autoGearDistanceLabel">FIZ distance devices</label>
            <select
              id="autoGearDistance"
              class="auto-gear-distance auto-gear-multiselect"
              multiple
              size="10"
            ></select>
          </div>
          <div class="auto-gear-editor-columns">
            <div class="auto-gear-column">
              <h4 id="autoGearAddItemsHeading">Add these items</h4>
              <div class="auto-gear-add-controls">
                <div class="auto-gear-field">
                  <label for="autoGearAddName" id="autoGearAddItemLabel">Item</label>
                  <input type="text" id="autoGearAddName" list="autoGearItemCatalog" />
                </div>
                <div class="auto-gear-field">
                  <label for="autoGearAddCategory" id="autoGearAddCategoryLabel">Category</label>
                  <select id="autoGearAddCategory"></select>
                </div>
                <div class="auto-gear-field">
                  <label for="autoGearAddQuantity" id="autoGearAddQuantityLabel">Qty</label>
                  <input type="number" id="autoGearAddQuantity" min="1" value="1" />
                </div>
                <div class="auto-gear-field" hidden>
                  <label for="autoGearAddScreenSize" id="autoGearAddScreenSizeLabel">Screen size</label>
                  <input type="text" id="autoGearAddScreenSize" inputmode="decimal" />
                </div>
                <div class="auto-gear-field" hidden>
                  <label for="autoGearAddSelectorType" id="autoGearAddSelectorTypeLabel">Selector</label>
                  <select id="autoGearAddSelectorType">
                    <option value="none">No selector</option>
                    <option value="monitor">Monitor selector</option>
                    <option value="directorMonitor">Director monitor selector</option>
                  </select>
                </div>
                <div class="auto-gear-field" hidden>
                  <label for="autoGearAddSelectorDefault" id="autoGearAddSelectorDefaultLabel">Default item</label>
                  <input type="text" id="autoGearAddSelectorDefault" list="autoGearMonitorCatalog" />
                </div>
                <div class="auto-gear-field auto-gear-checkbox-field" hidden>
                  <input type="checkbox" id="autoGearAddSelectorInclude" />
                  <label for="autoGearAddSelectorInclude" id="autoGearAddSelectorIncludeLabel">Include selector</label>
                </div>
                <div class="auto-gear-field auto-gear-notes-field">
                  <label for="autoGearAddNotes" id="autoGearAddNotesLabel">Notes</label>
                  <textarea id="autoGearAddNotes" rows="2"></textarea>
                </div>
                <button type="button" id="autoGearAddItemButton">Add item</button>
              </div>
              <ul id="autoGearAddList" class="auto-gear-item-list"></ul>
            </div>
            <div class="auto-gear-column">
              <h4 id="autoGearRemoveItemsHeading">Remove these items</h4>
              <div class="auto-gear-add-controls">
                <div class="auto-gear-field">
                  <label for="autoGearRemoveName" id="autoGearRemoveItemLabel">Item</label>
                  <input type="text" id="autoGearRemoveName" list="autoGearItemCatalog" />
                </div>
                <div class="auto-gear-field">
                  <label for="autoGearRemoveCategory" id="autoGearRemoveCategoryLabel">Category</label>
                  <select id="autoGearRemoveCategory"></select>
                </div>
                <div class="auto-gear-field">
                  <label for="autoGearRemoveQuantity" id="autoGearRemoveQuantityLabel">Qty</label>
                  <input type="number" id="autoGearRemoveQuantity" min="1" value="1" />
                </div>
                <div class="auto-gear-field" hidden>
                  <label for="autoGearRemoveScreenSize" id="autoGearRemoveScreenSizeLabel">Screen size</label>
                  <input type="text" id="autoGearRemoveScreenSize" inputmode="decimal" />
                </div>
                <div class="auto-gear-field" hidden>
                  <label for="autoGearRemoveSelectorType" id="autoGearRemoveSelectorTypeLabel">Selector</label>
                  <select id="autoGearRemoveSelectorType">
                    <option value="none">No selector</option>
                    <option value="monitor">Monitor selector</option>
                    <option value="directorMonitor">Director monitor selector</option>
                  </select>
                </div>
                <div class="auto-gear-field" hidden>
                  <label for="autoGearRemoveSelectorDefault" id="autoGearRemoveSelectorDefaultLabel">Default item</label>
                  <input type="text" id="autoGearRemoveSelectorDefault" list="autoGearMonitorCatalog" />
                </div>
                <div class="auto-gear-field auto-gear-checkbox-field" hidden>
                  <input type="checkbox" id="autoGearRemoveSelectorInclude" />
                  <label for="autoGearRemoveSelectorInclude" id="autoGearRemoveSelectorIncludeLabel">Include selector</label>
                </div>
                <div class="auto-gear-field auto-gear-notes-field">
                  <label for="autoGearRemoveNotes" id="autoGearRemoveNotesLabel">Notes</label>
                  <textarea id="autoGearRemoveNotes" rows="2"></textarea>
                </div>
                <button type="button" id="autoGearRemoveItemButton">Add removal</button>
              </div>
              <ul id="autoGearRemoveList" class="auto-gear-item-list"></ul>
            </div>
          </div>
          <div class="button-row">
            <button type="button" id="autoGearSaveRule"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF207;</span>Save rule</button>
            <button type="button" id="autoGearCancelEdit"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF131;</span>Cancel</button>
          </div>
        </div>
        <datalist id="autoGearItemCatalog"></datalist>
        <datalist id="autoGearMonitorCatalog"></datalist>
      </section>
      <section
        id="settingsPanel-accessibility"
        class="settings-panel"
        role="tabpanel"
        aria-labelledby="settingsTab-accessibility accessibilityHeading"
        hidden
      >
        <h3 id="accessibilityHeading">Accessibility</h3>
        <div class="form-row">
          <label for="settingsHighContrast" id="settingsHighContrastLabel">High contrast</label>
          <input type="checkbox" id="settingsHighContrast" />
        </div>
        <p id="settingsHighContrastHelp" class="settings-hint">
          Increase contrast for text and outlines to boost readability in any theme.
        </p>
        <div class="form-row">
          <label for="settingsReduceMotion" id="settingsReduceMotionLabel">Reduce motion</label>
          <input type="checkbox" id="settingsReduceMotion" />
        </div>
        <p id="settingsReduceMotionHelp" class="settings-hint">
          Limit color and interface animations so transitions feel steady for motion-sensitive users.
        </p>
        <div class="form-row">
          <label for="settingsRelaxedSpacing" id="settingsRelaxedSpacingLabel">Relaxed spacing</label>
          <input type="checkbox" id="settingsRelaxedSpacing" />
        </div>
        <p id="settingsRelaxedSpacingHelp" class="settings-hint">
          Increase line spacing and control padding to make text easier to scan and tap.
        </p>
      </section>
      <section
        id="settingsPanel-backup"
        class="settings-panel"
        role="tabpanel"
        aria-labelledby="settingsTab-backup backupHeading"
        hidden
      >
        <h3 id="backupHeading">Backup &amp; Restore</h3>
        <div class="form-row">
          <label for="settingsShowAutoBackups" id="settingsShowAutoBackupsLabel">Show auto backups in project list</label>
          <input type="checkbox" id="settingsShowAutoBackups" />
        </div>
        <div class="button-row">
          <button id="backupSettings">Backup</button>
          <input type="file" id="restoreSettingsInput" accept="application/json" hidden />
          <button id="restoreSettings">Restore</button>
          <button id="factoryResetButton">Factory reset</button>
        </div>
      </section>
      <section
        id="settingsPanel-data"
        class="settings-panel"
        role="tabpanel"
        aria-labelledby="settingsTab-data dataHeading"
        hidden
      >
        <h3 id="dataHeading">Data &amp; Storage</h3>
        <p id="storageSummaryIntro" class="storage-summary-note">
          Everything below stays on this device.
        </p>
        <ul id="storageSummaryList" class="storage-summary" aria-live="polite"></ul>
        <p id="storageSummaryEmpty" class="storage-summary-note" hidden>No planner data stored yet.</p>
        <p id="storageSummaryFootnote" class="storage-summary-note">
          Backups export each entry as human-readable JSON.
        </p>
      </section>
      <section
        id="settingsPanel-about"
        class="settings-panel"
        role="tabpanel"
        aria-labelledby="settingsTab-about aboutHeading"
        hidden
      >
        <h3 id="aboutHeading">About &amp; Support</h3>
        <p id="aboutVersion">Version 1.0.6</p>
        <p><a href="https://github.com" id="supportLink" target="_blank">Support</a></p>
      </section>
      <div class="button-row action-buttons">
        <button id="settingsSave"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF207;</span>Save</button>
        <button id="settingsCancel"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF131;</span>Cancel</button>
      </div>
    </div>
  </dialog>

  <div
    id="installGuideDialog"
    role="dialog"
    aria-modal="true"
    aria-labelledby="installGuideTitle"
    aria-describedby="installGuideIntro"
    hidden
  >
    <div class="modal-surface modal-surface-scrollable install-guide-content">
      <h2 id="installGuideTitle">Install Cine Power Planner</h2>
      <p id="installGuideIntro">Add the planner to your Home Screen to use it like an app.</p>
      <ol id="installGuideSteps">
        <li>Open Cine Power Planner in your browser.</li>
        <li>Open the browser menu.</li>
        <li>Choose Add to Home Screen and confirm.</li>
      </ol>
      <p id="installGuideNote">After installation, launch Cine Power Planner from your Home Screen.</p>
      <section id="installGuideMigration" aria-labelledby="installGuideMigrationTitle" hidden>
        <h3 id="installGuideMigrationTitle">Move your existing data into the app</h3>
        <p id="installGuideMigrationIntro">
          Safari keeps the browser tab and the installed app separate. To move your Cine Power Planner data into the app:
        </p>
        <ol id="installGuideMigrationSteps">
          <li>Open Cine Power Planner in Safari where your projects are still visible.</li>
          <li>Go to Settings → Backup &amp; Restore → Backup to download a copy of your data.</li>
          <li>Open Cine Power Planner from your home screen.</li>
          <li>Go to Settings → Backup &amp; Restore → Restore and pick the backup file.</li>
        </ol>
        <p id="installGuideMigrationNote">
          After restoring once, all changes stay inside the installed app. Keep the backup if you plan to reinstall or switch
          devices.
        </p>
      </section>
      <div class="button-row install-guide-actions">
        <button id="installGuideClose" type="button">Close</button>
      </div>
    </div>
  </div>

  <div
    id="iosPwaHelpDialog"
    role="dialog"
    aria-modal="true"
    aria-labelledby="iosPwaHelpTitle"
    aria-describedby="iosPwaHelpIntro"
    hidden
  >
    <div class="modal-surface modal-surface-scrollable ios-pwa-help-content">
      <h2 id="iosPwaHelpTitle">Keep your data when installing on iOS</h2>
      <p id="iosPwaHelpIntro">
        Safari keeps the browser tab and the installed app separate. To move your Cine Power Planner data into the app:
      </p>
      <ol id="iosPwaHelpSteps">
        <li id="iosPwaHelpStep1">Open Cine Power Planner in Safari where your projects are still visible.</li>
        <li id="iosPwaHelpStep2">Go to Settings → Backup &amp; Restore → Backup to download a copy of your data.</li>
        <li id="iosPwaHelpStep3">Open Cine Power Planner from your home screen.</li>
        <li id="iosPwaHelpStep4">Go to Settings → Backup &amp; Restore → Restore and pick the backup file.</li>
      </ol>
      <p id="iosPwaHelpNote">
        After restoring once, all changes stay inside the installed app. Keep the backup if you plan to reinstall or switch
        devices.
      </p>
      <div class="button-row ios-pwa-help-actions">
        <button id="iosPwaHelpClose">Got it</button>
      </div>
    </div>
  </div>

  <dialog
    id="helpDialog"
    class="app-modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="helpTitle"
    tabindex="-1"
    hidden
  >
    <div class="modal-surface modal-surface-scrollable help-content">
      <button id="closeHelp">Close</button>
      <h2 id="helpTitle">How to use</h2>
      <div id="helpSearchContainer">
        <input type="text" id="helpSearch" placeholder="Search help topics..." aria-label="Search help topics" />
        <button
          id="helpSearchClear"
          class="clear-input-btn"
          type="button"
          aria-label="Clear search"
          title="Clear search"
          hidden
        >
          <span class="icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF131;</span>
        </button>
      </div>
      <button id="hoverHelpButton" type="button">Hover for help</button>
      <nav id="helpQuickLinks" aria-label="Help topics" hidden>
        <h3 id="helpQuickLinksHeading">Jump to a topic</h3>
        <ul id="helpQuickLinksList"></ul>
      </nav>
      <p
        id="helpResultsSummary"
        class="help-results-summary"
        aria-live="polite"
        hidden
      ></p>
      <p id="helpNoResults" aria-live="polite" hidden>No results found.</p>
      <div id="helpSections">
        <section
          data-help-section
          id="helpBasics"
          data-help-keywords="help basics introduction start here navigation search filter quick links keyboard shortcuts hover tooltip instructions"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEAC4;</span>Start Here</h3>
          <ul>
            <li>
              Open this guide from the header <strong>Help</strong> button or press <strong>?</strong>, <strong>H</strong>,
              <strong>F1</strong> or <strong>Ctrl+/</strong> (<strong>⌘/</strong> on Mac). Press <strong>Esc</strong> to close
              the dialog and return to your project.
            </li>
            <li>
              The search box filters topics as you type and highlights matching words. Use the × button to clear the query, or
              press <strong>/</strong> or <strong>Ctrl+F</strong> (<strong>⌘F</strong>) while the dialog is open to jump
              straight to search.
            </li>
            <li>
              Use the <strong>Jump to a topic</strong> quick links for instant navigation. The list stays in sync with your
              search and focuses the selected heading so you can start reading immediately.
            </li>
            <li>
              Select <strong>Hover for help</strong> to turn the cursor into a help pointer. Move across buttons, menus and
              form fields to read concise tooltips without leaving this dialog.
            </li>
            <li>
              Buttons inside each article highlight or focus the matching controls in the planner, making it easy to follow
              along and verify every step.
            </li>
          </ul>
          <div
            id="helpQuickStartGuide"
            class="help-callout"
            role="note"
            aria-label="Quick start checklist"
          >
            <h4>Quick start checklist</h4>
            <ol>
              <li>
                Name your project and press <strong>Save</strong> (or press <kbd>Enter</kbd>/<kbd>Ctrl</kbd>+<kbd>S</kbd>) to
                capture the current rig before experimenting—saved entries stay available offline.
              </li>
              <li>
                Walk through <em>Configure Devices</em>, the <em>Power Summary</em> and the <em>Connection Diagram</em> in
                order. Each section updates immediately so you can verify power draw, cable routing and runtime checks at a
                glance.
              </li>
              <li>
                Before wrapping up, download an <strong>Export project</strong> JSON and a full-app <strong>Backup</strong> so
                you have two offline recovery copies that can be restored from the <em>Backup &amp; Restore</em> panel.
              </li>
            </ol>
            <p class="help-callout-note">
              Tip: Keep backups on separate drives when travelling—restoring always makes a fresh safety copy so nothing is
              lost if you undo a change.
            </p>
          </div>
          <div
            id="helpKeyboardShortcuts"
            class="help-callout"
            role="note"
            aria-label="Essential keyboard shortcuts"
          >
            <h4>Essential shortcuts</h4>
            <ul>
              <li><kbd>?</kbd>, <kbd>H</kbd> or <kbd>F1</kbd> — open this help dialog instantly.</li>
              <li><kbd>Ctrl</kbd>+<kbd>/</kbd> (<kbd>⌘</kbd>+<kbd>/</kbd>) — toggle help even while typing in a field.</li>
              <li><kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> (<kbd>⌘</kbd>+<kbd>F</kbd>) — jump straight to the help search.</li>
              <li><kbd>Ctrl</kbd>+<kbd>K</kbd> (<kbd>⌘</kbd>+<kbd>K</kbd>) — focus the global feature search and jump to any
                planner screen.</li>
              <li><kbd>Ctrl</kbd>+<kbd>,</kbd> (<kbd>⌘</kbd>+<kbd>,</kbd>) — open Settings to adjust themes, backups and
                preferences.</li>
              <li><kbd>Ctrl</kbd>+<kbd>S</kbd> (<kbd>⌘</kbd>+<kbd>S</kbd>) — save the active project without leaving the
                planner.</li>
              <li><kbd>D</kbd> — toggle dark mode on or off to match your lighting environment.</li>
              <li><kbd>P</kbd> — switch the playful pink theme and store the preference for next time.</li>
            </ul>
          </div>
          <div class="help-link-group" aria-label="Help basics shortcuts">
            <a
              class="help-link button-link"
              href="#helpQuickStartGuide"
              data-help-target="#helpQuickStartGuide"
              data-help-highlight="#helpQuickStartGuide"
            >Quick start checklist</a>
            <a
              class="help-link button-link"
              href="#helpKeyboardShortcuts"
              data-help-target="#helpKeyboardShortcuts"
              data-help-highlight="#helpKeyboardShortcuts"
            >Keyboard shortcuts</a>
            <a
              class="help-link button-link"
              href="#helpDialog"
              data-help-target="#hoverHelpButton"
              data-help-highlight="#hoverHelpButton"
            >Enable hover help</a>
          </div>
        </section>
        <section
          data-help-section
          id="featuresOverview"
          data-help-keywords="overview summary capabilities highlights offline offline-mode favorites favourites pinned search global keyboard shortcuts themes personalization backups tour"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF139;</span>Features at a Glance</h3>
          <ul>
            <li>Plan complete camera rigs and compute power draw and battery life.</li>
            <li>Save multiple projects, export or import them and print overviews.</li>
            <li>Visualize power and video connections with an interactive diagram—drag to rearrange, pan, snap to grid, reset the view, zoom and download the layout.</li>
            <li>Compare battery runtimes and check against safe output limits.</li>
            <li>Customize the device database with your own gear.</li>
            <li>Star frequently used devices to pin them at the top of dropdowns.</li>
            <li>Generate categorized gear lists and printable project overviews with one click.</li>
            <li>Refine runtime estimates with user feedback and a visual weighting dashboard.</li>
            <li>Use the global search bar to jump straight to features, device selectors or help topics from anywhere.</li>
            <li>Open a searchable help dialog with step-by-step guides and FAQ.</li>
            <li>Switch languages, toggle dark or playful pink themes and work fully offline. Theme settings persist.</li>
            <li>Personalize the interface from Settings—adjust accent color, base font size and typeface, toggle high contrast and upload a custom logo that appears in backups and printable overviews.</li>
            <li>Start fresh at any time with the Factory reset button in Settings. It automatically downloads a backup before removing saved projects, custom devices, favorites and runtime feedback in one step.</li>
            <li>Automatic snapshots save the current project every 10 minutes and hourly full-app backups download timestamped JSON archives so you always have a recovery point.</li>
            <li>Force reload clears cached files and updates the app without deleting saved data.</li>
            <li>Save automatic gear rules as presets, recover them from background backups and include them in shared project bundles with per-import controls.</li>
            <li>Cameras with both V- and B-Mount plates let you swap battery types; the list updates automatically.</li>
          </ul>
          <div class="help-link-group" aria-label="Jump to key features">
            <a
              class="help-link button-link"
              href="#setup-manager"
              data-help-target="#setupName"
              data-help-highlight="#setup-manager"
            >Project Overview</a>
            <a
              class="help-link button-link"
              href="#setup-config"
              data-help-target="#cameraSelect"
              data-help-highlight="#setup-config"
            >Configure Devices</a>
            <a
              class="help-link button-link"
              href="#results"
              data-help-target="#resultsHeading"
              data-help-highlight="#results"
            >Power Summary</a>
            <a
              class="help-link button-link"
              href="#setupDiagram"
              data-help-target="#setupDiagramHeading"
              data-help-highlight="#setupDiagram"
            >Connection Diagram</a>
            <a
              class="help-link button-link"
              href="#device-manager"
              data-help-target="#deviceManagerHeading"
              data-help-highlight="#device-manager"
            >Device Library</a>
          </div>
        </section>
        <section
          data-help-section
          id="gettingStarted"
          data-help-keywords="quickstart onboarding tutorial first steps workflow basics getting started new project guide"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEF93;</span>Getting Started</h3>
          <ol>
            <li>
              Select a camera, monitor and other devices from the dropdown menus in the
              <a
                class="help-link"
                href="#setup-config"
                data-help-target="#cameraSelect"
                data-help-highlight="#setup-config"
              >Configure Devices</a>
              section.
            </li>
            <li>Use the search boxes inside each dropdown to quickly filter the lists.</li>
            <li>
              Open the Project Requirements dialog with the
              <a
                class="help-link"
                href="#projectRequirementsOutput"
                data-help-target="#generateGearListBtn"
              >Generate Gear List and Project Requirements</a>
              button when you need to capture crew, schedule or scenario notes; those details feed printouts and gear lists.
            </li>
            <li>
              Choose a battery in the
              <a
                class="help-link"
                href="#setup-config"
                data-help-target="#batterySelect"
                data-help-highlight="#setup-config"
              >Battery</a>
              dropdown to update total draw and estimated runtime.
            </li>
            <li>
              Name the project in the
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#setupName"
                data-help-highlight="#setup-manager"
              >Project Name</a>
              field and click
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#saveSetupBtn"
                data-help-highlight="#setup-manager"
              ><strong>Save</strong></a>
              so you can revisit, share or print the setup later.
            </li>
          </ol>
        </section>
        <section
          data-help-section
          id="managingSetups"
          data-help-keywords="save saved projects load manage share backup restore export import delete rename factory reset clear project cache local storage browser reopen"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE852;</span>Managing Projects</h3>
          <ul>
            <li>
              Use
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#saveSetupBtn"
                data-help-highlight="#setup-manager"
              ><strong>Save</strong></a>
              to store the current configuration in your browser. Press Enter or Ctrl+S (⌘S on macOS) to save quickly; the Save button stays disabled until a name is entered.
            </li>
            <li>
              Select a saved project from the
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#setupSelect"
                data-help-highlight="#setup-manager"
              >Saved Projects</a>
              dropdown to load it instantly; adjust gear and click
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#saveSetupBtn"
                data-help-highlight="#setup-manager"
              ><strong>Save</strong></a>
              again to update the entry.
            </li>
            <li>
              Saved projects live in your browser&rsquo;s cache so they stay available after closing or reopening tabs and browsers,
              as long as the cache isn&rsquo;t cleared.
            </li>
            <li>
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#shareSetupBtn"
                data-help-highlight="#setup-manager"
              ><strong>Export Project</strong></a>
              downloads a JSON file containing your selections, project requirements, gear list, runtime feedback and any custom devices so you can back up or share the setup.
            </li>
            <li>
              Open
              <a
                class="help-link button-link"
                href="#settingsButton"
                data-help-target="#settingsButton"
              ><strong>Settings</strong></a>
              to fine-tune accent color, base font size, typeface and high contrast mode, upload a custom logo and manage full planner backups or restores.
            </li>
            <li>
              Select a JSON file in the
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#applySharedLinkBtn"
                data-help-highlight="#setup-manager"
              ><strong>Import Project</strong></a>
              field and click
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#applySharedLinkBtn"
                data-help-highlight="#setup-manager"
              ><strong>Import</strong></a>
              to restore a shared configuration.
            </li>
            <li>
              Use
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#deleteSetupBtn"
                data-help-highlight="#setup-manager"
              ><strong>Delete</strong></a>
              to remove the saved entry or pick
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#setupSelect"
                data-help-highlight="#setup-manager"
              ><strong>-- New Project --</strong></a>
              from the Saved Projects menu to wipe the current selection without touching saved copies.
            </li>
            <li>
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#generateOverviewBtn"
                data-help-highlight="#setup-manager"
              ><strong>Generate Overview</strong></a>
              produces a printable summary of any saved project.
            </li>
            <li>
              Need a clean slate? Choose
              <a
                class="help-link button-link"
                href="#settingsButton"
                data-help-target="#factoryResetButton"
              ><strong>Factory reset</strong></a>
              in Settings → Backup &amp; Restore. The tool prompts you to download a backup, then clears saved projects, custom devices, favorites and runtime submissions.
            </li>
          </ul>
        </section>
        <section
          data-help-section
          id="savingAndSharing"
          data-help-keywords="save saving project projects share sharing export import backup restore safety offline data management json download recover undo history verify verification checklist data safety integrity redundancy autosave snapshot timeline auto-backup auto backups hourly schedule"
        >
          <h3>
            <span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF207;</span>Saving, Sharing &amp; Restoring Projects
          </h3>
          <ul>
            <li>
              Name your project in <em>Project Overview</em> and press <strong>Save</strong> (or hit Enter/Ctrl+S/⌘S) to
              capture the current configuration without leaving the planner. Saving with the same name updates that entry;
              change the name first if you want to keep both versions side by side.
            </li>
            <li>
              <strong>Export project</strong> downloads a portable JSON bundle with devices, requirements, automatic gear rules
              and runtime feedback so you can archive or share the setup safely offline using your own storage or transfer
              tools.
            </li>
            <li>
              Use <strong>Import project</strong> to load any saved JSON file. Imports never overwrite your existing projects
              until you press <strong>Save</strong>, and you can choose whether shared automatic gear rules should stay with the
              project, update your global library or be ignored altogether.
            </li>
            <li>
              Open Settings → <em>Backup &amp; Restore</em> whenever you need a full-application snapshot. <strong>Backup</strong>
              includes saved projects, device edits, preferences, favorites, automatic gear rules and runtime feedback.
              <strong>Restore</strong> always captures a fresh safety copy before applying the selected file so nothing is lost
              by mistake.
            </li>
            <li>
              Before using <strong>Force reload</strong>, <strong>Factory reset</strong> or clearing the browser cache, download
              a backup so every project, device edit and auto-gear preset remains recoverable. Hourly background backups and the
              10‑minute auto snapshots below add extra insurance without disrupting your workflow.
            </li>
            <li>
              After each major milestone, run through the
              <a
                class="help-link"
                href="#projectDataSafetyChecklist"
                data-help-target="#projectDataSafetyChecklist"
                data-help-highlight="#projectDataSafetyChecklist"
              >Project data safety checklist</a>
              to confirm your share, import, backup and restore workflows are ready before you leave the browser.
            </li>
          </ul>
          <div
            id="automaticSafetyCopies"
            class="help-callout"
            role="note"
            aria-label="Automatic safety copies"
          >
            <h4>Automatic safety copies</h4>
            <ul>
              <li>
                <strong>Auto snapshots</strong> capture the active project every 10 minutes. Enable
                <a
                  class="help-link"
                  href="#settingsDialog"
                  data-help-target="#settingsShowAutoBackups"
                >Show auto backups in project list</a>
                to reveal the timestamped <code>auto-backup-…</code> entries beneath your regular saves and convert any snapshot
                into a permanent project with <strong>Save</strong>.
              </li>
              <li>
                <strong>Hourly full-app backups</strong> download JSON archives named with the current time (for example,
                “2024-06-15T14-00-00 full app backup.json”). Each file contains saved projects, automatic gear rules, device
                edits, preferences, favorites and runtime logs so you can copy them to external storage for offline safekeeping.
              </li>
              <li>
                <strong>Restore safeguards</strong> always create a brand-new safety backup before applying the file you choose,
                giving you an immediate rollback point if you need to undo the restore.
              </li>
              <li>
                Combine the automatic layers with manual <strong>Export project</strong> and Device Database <strong>Export</strong>
                files when sharing work or moving between machines without internet access.
              </li>
            </ul>
            <p class="help-callout-note">
              Tip: Verify important archives by importing them on a spare profile or computer before going on set so you know
              every recovery path works offline.
            </p>
          </div>
          <div
            id="projectDataSafetyChecklist"
            class="help-callout"
            role="note"
            aria-label="Project data safety checklist"
          >
            <h4>Project data safety checklist</h4>
            <ol>
              <li>
                Save the active setup under a new name before experimenting so earlier versions stay available for comparison.
              </li>
              <li>
                Download both a full-app <strong>Backup</strong> and the current project JSON immediately after important updates
                so you have self-contained copies you can move offline.
              </li>
              <li>
                Store at least two copies of every file (for example, on your laptop and an external SSD) to guard against device
                loss when you are travelling or on set.
              </li>
              <li>
                Open each project JSON through <strong>Import project</strong> to confirm it loads correctly; close the dialog or
                skip saving if you are only testing the archive.
              </li>
              <li>
                Periodically test full-app backups by running <strong>Restore</strong>. The planner automatically creates a fresh
                safety snapshot before applying the file, letting you revert instantly if anything looks unexpected.
              </li>
            </ol>
            <p class="help-callout-note">
              Tip: Rename archived files with the project name and date (for example, “2024-06-15 camera-rig backup.json”) so the
              newest verified copy is obvious when you need to recover or share offline.
            </p>
          </div>
          <div class="help-link-group" aria-label="Saving and sharing shortcuts">
            <a
              class="help-link button-link"
              href="#setup-manager"
              data-help-target="#saveSetupBtn"
              data-help-highlight="#setup-manager"
            >Save project</a>
            <a
              class="help-link button-link"
              href="#setup-manager"
              data-help-target="#shareSetupBtn"
              data-help-highlight="#setup-manager"
            >Export project</a>
            <a
              class="help-link button-link"
              href="#setup-manager"
              data-help-target="#applySharedLinkBtn"
              data-help-highlight="#setup-manager"
            >Import project</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#backupSettings"
            >Open Backup</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#restoreSettings"
            >Open Restore</a>
            <a
              class="help-link button-link"
              href="#automaticSafetyCopies"
              data-help-target="#automaticSafetyCopies"
              data-help-highlight="#automaticSafetyCopies"
            >Automatic safety copies</a>
            <a
              class="help-link button-link"
              href="#projectDataSafetyChecklist"
              data-help-target="#projectDataSafetyChecklist"
              data-help-highlight="#projectDataSafetyChecklist"
            >Data safety checklist</a>
          </div>
        </section>
        <section
          data-help-section
          id="settingsHelp"
          data-help-keywords="settings preferences customization customise personalize colour color font typeface accent high contrast theme backup restore"
        >
          <h3>
            <span class="help-icon icon-glyph icon-svg" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path
                  d="M9.593 3.94c.09-.542.559-.94 1.11-.94h2.594c.55 0 1.019.398 1.11.94l.213 1.281c.062.374.312.686.644.87.074.041.147.083.22.127.326.196.721.257 1.076.124l1.217-.456a1.125 1.125 0 0 1 1.369.491l1.297 2.246a1.125 1.125 0 0 1-.259 1.431l-1.004.826c-.293.241-.438.612-.431.991.001.042.002.084.002.127s0 .085-.002.127c-.007.379.138.75.431.991l1.004.827a1.125 1.125 0 0 1 .259 1.43l-1.297 2.247a1.125 1.125 0 0 1-1.369.49l-1.217-.455a1.35 1.35 0 0 0-1.076.124 5.58 5.58 0 0 1-.864.495 1.35 1.35 0 0 0-.644.87l-.213 1.281c-.09.542-.559.94-1.11.94H10.703a1.125 1.125 0 0 1-1.11-.94l-.214-1.281a1.35 1.35 0 0 0-.644-.87 5.446 5.446 0 0 1-.864-.495 1.35 1.35 0 0 0-1.076-.124l-1.217.455a1.125 1.125 0 0 1-1.369-.49L3.557 15.377a1.125 1.125 0 0 1 .259-1.431l1.004-.826c.292-.241.437-.613.43-.992a4.643 4.643 0 0 1-.002-.254c0-.042.001-.084.002-.127.007-.379-.138-.75-.43-.991l-1.005-.827A1.125 1.125 0 0 1 3.557 8.623l1.297-2.246a1.125 1.125 0 0 1 1.369-.491l1.217.456c.355.133.75.072 1.076-.124.073-.044.147-.086.22-.127.332-.183.582-.495.644-.87l.213-1.281Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
            Settings &amp; Personalization
          </h3>
          <ul>
            <li>Switch languages instantly; the planner remembers your preference for next time.</li>
            <li>Tune the interface with dark mode, high contrast, pink accents and a custom accent color to match your production.</li>
            <li>Adjust the base font size or pick a different typeface. Add local fonts from your computer when the browser supports it.</li>
            <li>Upload an SVG logo to brand printable overviews and configuration backups.</li>
            <li>
              Use <strong>Backup</strong> to download a JSON snapshot of settings, projects, custom devices, favorites, automatic gear rules and runtime feedback; <strong>Restore</strong> captures a fresh safety copy first and then loads the selected file.
            </li>
          </ul>
          <div class="help-link-group" aria-label="Settings shortcuts">
            <a class="help-link button-link" href="#settingsButton" data-help-target="#settingsButton">Open Settings</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#accentColorInput"
            >Accent color</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#settingsLogo"
            >Upload logo</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#backupSettings"
            >Backup</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#restoreSettings"
            >Restore</a>
            <a
              class="help-link button-link"
              href="#settingsButton"
              data-help-target="#factoryResetButton"
            >Factory reset</a>
          </div>
        </section>
        <section
          data-help-section
          id="autoBackupsHelp"
          data-help-keywords="auto backup automatic snapshot restore recovery safety hourly download full app backup notification show saved projects setting verification checklist redundancy"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE825;</span>Automatic Backups</h3>
          <ul>
            <li>The planner saves an auto backup every 10 minutes without interrupting your work. Entries are timestamped and stored alongside saved projects.</li>
            <li>Enable <strong>Show auto backups in project list</strong> in Settings → Backup &amp; Restore to temporarily reveal those snapshots in the <em>Saved Projects</em> dropdown.</li>
            <li>Select an auto backup to review it. Press <strong>Save</strong> to keep it as a regular project or return to your current setup without overwriting anything.</li>
            <li>A full JSON export downloads automatically every hour with a name like “2024-05-12T14-00-00 full app backup.json” so you always have an offline safety copy.</li>
            <li>Move hourly downloads and snapshots into your archive and follow the <a class="help-link" href="#projectDataSafetyChecklist" data-help-target="#projectDataSafetyChecklist" data-help-highlight="#projectDataSafetyChecklist">Project data safety checklist</a> so each file is verified, labelled and stored on redundant media.</li>
          </ul>
          <div class="help-link-group" aria-label="Automatic backup controls">
            <a class="help-link button-link" href="#settingsDialog" data-help-target="#settingsShowAutoBackups">Show auto backups setting</a>
            <a
              class="help-link button-link"
              href="#setup-manager"
              data-help-target="#setupSelect"
              data-help-highlight="#setup-manager"
            >Saved Projects</a>
            <a class="help-link button-link" href="#settingsDialog" data-help-target="#backupSettings">Download backup</a>
          </div>
        </section>
        <section
          data-help-section
          id="projectRequirementsHelp"
          data-help-keywords="project requirements brief notes metadata crew schedule prep shoot forms multi-select documentation"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE469;</span>Project Requirements</h3>
          <ul>
            <li>Capture production metadata such as production company, rental house, DoP, crew roles with email contacts and prep/shoot day ranges alongside delivery notes like resolutions, sensor modes, codecs and base frame rates so every project stays traceable.</li>
            <li>Track creative requirements with lens sets, matte box and filter choices, monitoring configurations, frame guides, aspect mask opacity, user button layouts, video distribution and tripod preferences—all of which flow into project summaries.</li>
            <li>Multi-select lists let you specify multiple scenarios, accessories or monitoring setups.</li>
            <li>Use the + buttons to add crew entries or prep/shoot ranges, and tap the − buttons to remove items as plans change.</li>
            <li>A live summary under <strong>Required Scenarios</strong> displays icon-labelled chips for every selection so you can confirm which accessory packs will trigger; choosing <strong>Dolly</strong> unlocks <strong>Remote Head</strong> and automatically surfaces default monitor options to keep downstream lists complete.</li>
            <li>The information is saved with the project and included in printed overviews and gear lists.</li>
          </ul>
          <div class="help-link-group" aria-label="Project requirement tools">
            <a
              class="help-link button-link"
              href="#setup-manager"
              data-help-target="#generateGearListBtn"
              data-help-highlight="#setup-manager"
            >Generate Gear List</a>
          </div>
        </section>
        <section
          data-help-section
          id="gearListHelp"
          data-help-keywords="gear list equipment inventory export print accessories scenarios quantity breakdown report"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE467;</span>Gear List</h3>
            <ul>
              <li>The <strong>Generate Gear List</strong> button expands every selected device and project detail into a rich table grouped by category and quantity.</li>
              <li>Any change to devices, lenses, batteries or project information rebuilds the list so it always reflects the current configuration.</li>
              <li>The generator assembles the table step&nbsp;by&nbsp;step:
                <ol>
                  <li>Each chosen device is cloned so accessories and rules can be applied without altering the source data.</li>
                  <li>Default accessories such as power cables or mounting brackets are attached according to each device definition.</li>
                  <li>Scenario rules from <em>Required Scenarios</em> inject rigging and weather protection.</li>
                  <li>Entries from the <em>Project Requirements</em> form contribute additional hardware and notes.</li>
                  <li>An internal slug (manufacturer&nbsp;+&nbsp;model) is generated; matching slugs are merged and their quantities summed.</li>
                  <li>Lines are sorted into Camera, Lens, Power, Monitoring and Accessories sections and then alphabetically.</li>
                  <li>Tooltips list weight, dimensions and other metadata for quick reference.</li>
                </ol>
              </li>
              <li>Accessory packs ensure common dependencies are covered:
                <ul>
                  <li><strong>Handheld + Easyrig</strong> adds a telescopic handle, shoulder rig and compatible quick‑release plates.</li>
                  <li><strong>Gimbal</strong> supplies the selected gimbal, balancing accessories, power feed cables and any required filters or sunshades.</li>
                  <li><strong>Outdoor</strong> adds spigots, umbrellas, CapIt rain covers and water‑resistant cable wraps for monitor protection.</li>
                  <li><strong>Vehicle</strong> or <strong>Steadicam</strong> scenarios append suction mounts, hard‑mount plates or isolation arms where defined.</li>
                </ul>
              </li>
              <li>Lens selections append front diameter, weight and rod requirements, introduce lens supports and matte box hardware, and warn about incompatible rod standards or filter trays.</li>
              <li>Battery entries mirror counts from the power calculator; if draw exceeds safe limits the list adds hotswap plates or the selected hotswap device.</li>
              <li>Monitoring preferences contribute default screens for each role (Director, DoP, Focus Puller, Client), matching video transmitters and pre‑bundled cable sets.</li>
              <li>The <strong>Project Requirements</strong> form acts as a template for the list. Each field adds context and gear:
                <ul>
                  <li><strong>Project Name</strong>, <strong>Production Company</strong>, <strong>Rental House</strong>, <strong>DoP</strong>, <strong>Prep</strong> and <strong>Shooting Days</strong> populate the printed header and can trigger weather gear with outdoor scenarios.</li>
                  <li><strong>Crew</strong> entries keep names, roles and email addresses attached so contact lists and call sheets stay current.</li>
                  <li><strong>Delivery Resolution</strong>, <strong>Recording Resolution</strong>, <strong>Sensor Mode</strong>, <strong>Aspect Ratio</strong>, <strong>Codec</strong> and <strong>Base Frame Rate</strong> lock in capture specs so printed summaries and exports show the intended format.</li>
                  <li><strong>Required Scenarios</strong> toggle accessory packs as described above.</li>
                  <li><strong>Lenses</strong> define the core set for the shoot, surface front diameters for matte-box adapters and inform balancing accessories when scenarios like gimbals are active.</li>
                  <li><strong>Camera Handle</strong>, <strong>Viewfinder Extension</strong> and <strong>User Button Layouts</strong> supply matching handles, VF extensions and quick-reference notes for camera, monitor and viewfinder controls.</li>
                  <li><strong>Matte Box</strong> and <strong>Filter Set</strong> selections insert filter trays, donuts, adapters and storage cases.</li>
                  <li><strong>Monitoring Configuration</strong>, <strong>Frame Guides</strong>, <strong>Aspect Mask Opacity</strong> and <strong>Video Distribution</strong> choices attach wireless links, overlays, splitters, antennas and channel‑assignment notes.</li>
                  <li><strong>Viewfinder Settings</strong> and <strong>Tripod Preferences</strong> add EVF mounts, extension brackets, tripod heads, spreaders and counterbalance details.</li>
                </ul>
              </li>
              <li>The resulting gear list appears in printable overviews and exported project files so collaborators see full context.</li>
              <li>Gear lists save automatically with the project; <strong>Export</strong> downloads a JSON file, <strong>Import</strong> restores it and <strong>Delete</strong> removes the saved list and shows the generator again.</li>
              <li>Gear list forms use fork buttons to duplicate your entries instantly, making alternate configurations easy to explore.</li>
            </ul>
            <div class="help-link-group" aria-label="Gear list shortcuts">
              <a
                class="help-link button-link"
                href="#setup-manager"
                data-help-target="#generateGearListBtn"
                data-help-highlight="#setup-manager"
              >Generate Gear List</a>
              <a
                class="help-link button-link"
                href="#projectRequirementsOutput"
                data-help-target="#projectRequirementsOutput"
              >Project Requirements output</a>
              <a
                class="help-link button-link"
                href="#gearListOutput"
                data-help-target="#gearListOutput"
              >Gear List output</a>
            </div>
          </section>
        <section
          data-help-section
          id="autoGearRulesHelp"
          data-help-keywords="automatic gear rules auto add remove custom scenario requirements generator list automation backup restore snapshots history"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="film">&#xF129;</span>Automatic Gear Rules</h3>
          <ul>
            <li>
              Open <em>Settings → Automatic Gear Rules</em> to create custom additions or removals that run when specific
              <strong>Required Scenarios</strong> are active.
            </li>
            <li>
              Choose any combination of <strong>Required Scenarios</strong>, <strong>Mattebox options</strong>,
              <strong>Camera handles</strong>, <strong>Viewfinder extension</strong> and <strong>Video distribution</strong>
              values to define when the rule fires. All selected conditions must match the project before the automation runs,
              and at least one condition is required to save a rule.
            </li>
            <li>
              Rules execute after the planner assembles the gear list, so your adjustments stack on top of built-in accessories
              and scenario packs.
            </li>
            <li>
              Click <strong>Add rule</strong> to reveal the editor, name the rule for quick reference and select one or more
              scenarios that must be enabled for it to trigger.
            </li>
            <li>
              Use <strong>Add these items</strong> to insert gear lines with category and quantity; pick <em>Custom Additions</em>
              for notes, bespoke equipment or reminders.
            </li>
            <li>
              <strong>Remove these items</strong> hides entries the generator would normally include—match the item name and
              category shown in the gear list to target the right row.
            </li>
            <li>
              Tap <strong>Reset to factory additions</strong> whenever you want to restore the default helper rules that ship
              with the planner.
            </li>
            <li>
              Save frequently used combinations as presets via the <strong>Preset</strong> menu, then switch or delete them as
              your workflow evolves.
            </li>
            <li>
              Background automatic backups capture rule changes every 10 minutes. Toggle <strong>Show automatic backups</strong>
              to reveal the timeline inside Automatic Gear Rules.
            </li>
            <li>
              When backups are visible, pick a timestamped snapshot from the <strong>Choose a backup</strong> dropdown to review
              its details and press <strong>Restore</strong> to roll back to that version. Each entry lists how many rules it
              contains so you can recover confidently even while offline.
            </li>
            <li>
              <strong>Export rules</strong> downloads a JSON copy of your automation set; <strong>Import rules</strong> loads an
              existing file so crews can sync configurations without relying on connectivity.
            </li>
            <li>
              Rules travel with backups and exports. Include them when sharing a project, then decide on import whether to apply
              the shared rules only to the opened project or add them to all projects.
            </li>
          </ul>
          <div class="help-link-group" aria-label="Automatic gear rule controls">
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearHeading"
              data-help-highlight="#settingsDialog"
            >Settings → Automatic Gear Rules</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearAddRule"
            >Add rule</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearResetFactory"
            >Reset to factory additions</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearRulesList"
            >Rules list</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearPresetSelect"
            >Preset menu</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearExport"
            >Export rules</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearImport"
            >Import rules</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearShowBackups"
            >Show automatic backups</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearBackupSelect"
              data-help-highlight="#autoGearBackupsSection"
            >Choose a backup</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#autoGearBackupRestore"
              data-help-highlight="#autoGearBackupsSection"
            >Restore backup</a>
          </div>
        </section>
        <section
          data-help-section
          id="powerCalculator"
          data-help-keywords="power calculator runtime estimator watt hours consumption battery life current warnings hotswap compare energy"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF1F8;</span>Power Calculator</h3>
          <ul>
            <li>Select a battery to see estimated runtime, current draw and required batteries for a 10&nbsp;h shoot.</li>
            <li>A temperature note helps account for runtime changes in hot or cold conditions.</li>
            <li>Warnings appear if the configuration exceeds battery output limits.</li>
            <li>Select a <strong>Battery Hotswap</strong> to factor in dual plates or adapters; its capacity and pin limits are merged into the calculation.</li>
            <li>The optional <strong>Battery Comparison</strong> panel shows runtimes for all batteries at once.</li>
          </ul>
          <div class="help-link-group" aria-label="Power calculator controls">
            <a
              class="help-link button-link"
              href="#setup-config"
              data-help-target="#batterySelect"
              data-help-highlight="#setup-config"
            >Battery dropdown</a>
            <a
              class="help-link button-link"
              href="#results"
              data-help-target="#resultsHeading"
              data-help-highlight="#results"
            >Power Summary</a>
            <a
              class="help-link button-link"
              href="#setup-config"
              data-help-target="#batteryHotswapSelect"
              data-help-highlight="#setup-config"
            >Battery Hotswap</a>
            <a
              class="help-link button-link"
              href="#batteryComparison"
              data-help-target="#batteryComparisonHeading"
              data-help-highlight="#batteryComparison"
            >Battery Comparison</a>
          </div>
        </section>
        <section
          data-help-section
          id="calculationDetails"
          data-help-keywords="calculation math formula codec weighting brightness wifi runtime details advanced explanation"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF123;</span>Calculation Details</h3>
          <ul>
            <li>Each device contributes its power draw in watts to <em>Total Consumption</em>.</li>
            <li>Current at 14.4 V (33.6 V for B‑Mount) and 12 V (21.6 V for B‑Mount) equals total watts divided by voltage.</li>
            <li>Runtime&nbsp;=&nbsp;battery capacity (Wh)&nbsp;÷&nbsp;total consumption.</li>
            <li>
              User-submitted runtimes are adjusted for temperature and weighted before
              averaging:
              <ul>
                <li>Temperature: ×2 at ≤−20 °C, ×1.6 at ≤−10 °C, ×1.25 at ≤0 °C.</li>
                <li>Resolution: ≥12K ×3, ≥8K ×2, ≥4K ×1.5, ≥1080p ×1; lower scales with 1080p.</li>
                <li>Frame rate scales linearly from 24 fps (e.g. 48 fps = ×2).</li>
                <li>Wi‑Fi adds 10 %; monitor entries below spec are weighted by their brightness ratio.</li>
                <li>
                  Codec factors: RAW/BRAW/ARRIRAW/R3D/CinemaDNG/Canon RAW/X‑OCN ×1;
                  ProRes ×1.1; DNx/AVID ×1.2; All‑Intra ×1.3; H.264/AVC ×1.5; H.265/HEVC ×1.7.
                </li>
                <li>The final weight reflects each device's share of total power draw.</li>
              </ul>
            </li>
            <li>Warnings highlight when current approaches or exceeds main or D‑Tap output ratings.</li>
          </ul>
          <div class="help-link-group" aria-label="Power detail links">
            <a
              class="help-link button-link"
              href="#results"
              data-help-target="#resultsHeading"
              data-help-highlight="#results"
            >View power summary</a>
          </div>
        </section>
        <section
          data-help-section
          id="runtimeFeedbackHelp"
          data-help-keywords="runtime feedback user measurements field data submit temperature weighting crowdsource"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF13E;</span>User Runtime Feedback</h3>
          <ul>
            <li>Click <strong>Submit User Runtime Feedback</strong> below the runtime to add your own measurement.</li>
            <li>Include temperature for more accurate weighting.</li>
            <li>Use <strong>Use Current Location</strong> to capture an approximate position in the log—everything stays stored on this device for offline reference.</li>
            <li>Your entries are stored locally and refine the runtime estimate.</li>
          </ul>
          <div class="help-link-group" aria-label="Runtime feedback tools">
            <a
              class="help-link button-link"
              href="#results"
              data-help-target="#runtimeFeedbackBtn"
              data-help-highlight="#results"
            >Submit feedback</a>
            <a
              class="help-link button-link"
              href="#feedbackDialog"
              data-help-target="#feedbackDialogHeading"
            >Feedback form</a>
          </div>
        </section>
        <section
          data-help-section
          id="setupDiagramHelp"
          data-help-keywords="connection diagram project diagram layout connections map wiring visualize nodes drag zoom pan svg jpg export reset snap grid"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEF8C;</span>Connection Diagram</h3>
          <ul>
            <li>Visualizes power and video connections between selected devices.</li>
            <li>Drag nodes to rearrange the layout; use +/– buttons to zoom.</li>
            <li>Drag empty space to pan the diagram.</li>
            <li>Enable <strong>Snap to Grid</strong> to align items precisely.</li>
            <li>Click <strong>Reset View</strong> to restore the default layout and zoom.</li>
            <li>Export the diagram as SVG or JPG via the <em>Download</em> button.</li>
            <li>Icons denote device types and warn when FIZ brands are incompatible.</li>
            <li>Hover or tap devices to see popup details; on touch devices, tapping a node keeps its popup until another is selected.</li>
          </ul>
          <div class="help-link-group" aria-label="Diagram controls">
            <a
              class="help-link button-link"
              href="#setupDiagram"
              data-help-target="#setupDiagramHeading"
              data-help-highlight="#setupDiagram"
            >View diagram</a>
            <a
              class="help-link button-link"
              href="#setupDiagram"
              data-help-target="#zoomIn"
            >Zoom in</a>
            <a
              class="help-link button-link"
              href="#setupDiagram"
              data-help-target="#resetView"
            >Reset view</a>
            <a
              class="help-link button-link"
              href="#setupDiagram"
              data-help-target="#gridSnapToggle"
            >Snap to Grid</a>
          </div>
        </section>
        <section
          data-help-section
          id="deviceEditorHelp"
          data-help-keywords="device editor database custom gear add edit modify remove import export revert data management"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF2DF;</span>Device Database Editor</h3>
          <ul>
            <li>Open with <em>Edit Device Data…</em> to add, modify or remove devices.</li>
            <li>Changes are stored locally; use <em>Export</em> and <em>Import</em> to share databases.</li>
            <li><em>Revert</em> restores defaults from the files in <code>devices/</code>.</li>
          </ul>
          <div class="help-link-group" aria-label="Device editor controls">
            <a
              class="help-link button-link"
              href="#device-manager"
              data-help-target="#toggleDeviceManager"
            >Edit Device Data…</a>
            <a
              class="help-link button-link"
              href="#device-manager"
              data-help-target="#deviceManagerHeading"
              data-help-highlight="#device-manager"
            >Device Library</a>
            <a
              class="help-link button-link"
              href="#device-manager"
              data-help-target="#exportDataBtn"
            >Export database</a>
            <a
              class="help-link button-link"
              href="#device-manager"
              data-help-target="#importDataBtn"
            >Import database</a>
          </div>
        </section>
        <section
          data-help-section
          id="deviceCategoriesHelp"
          data-help-keywords="device categories slots limits optional required types selection count overview"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE84A;</span>Device Categories</h3>
          <ul>
            <li><strong>Camera</strong> (1)</li>
            <li><strong>Monitor</strong> (optional)</li>
            <li><strong>Wireless Transmitter</strong> (optional)</li>
            <li><strong>FIZ Motors</strong> (0–4)</li>
            <li><strong>FIZ Controllers</strong> (0–4)</li>
            <li><strong>Distance Sensor</strong> (0–1)</li>
            <li><strong>Battery Plate</strong> (on supported cameras)</li>
            <li><strong>V‑ or B‑Mount Battery</strong> (0–1)</li>
          </ul>
          <p>The number in parentheses shows how many of that type you can select.</p>
          <div class="help-link-group" aria-label="Device selection">
            <a
              class="help-link button-link"
              href="#setup-config"
              data-help-target="#cameraSelect"
              data-help-highlight="#setup-config"
            >Configure Devices</a>
          </div>
        </section>
        <section
          data-help-section
          id="searchFiltering"
          data-help-keywords="search filter filtering favourites favorites quick find slash ctrl+f ctrl+k global search star pinned clear query"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF016;</span>Search &amp; Filtering</h3>
          <ul>
            <li>Every dropdown and list can be filtered via its search box.</li>
            <li>The help dialog itself is searchable using the field at the top.</li>
            <li>The global search bar jumps to features, device selectors or help topics; press <kbd>Ctrl</kbd>+<kbd>K</kbd> (<kbd>⌘</kbd>+<kbd>K</kbd> on macOS) to focus it from anywhere, press Enter to navigate and use × to clear. On small screens the side menu opens automatically.</li>
            <li>Click the star beside a dropdown to mark favorites; pinned items move to the top and persist between sessions.</li>
            <li>Press <kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> (<kbd>⌘</kbd>+<kbd>F</kbd> on macOS) to focus the nearest search box.</li>
            <li>Use the × button in any search field to reset the query and show all items.</li>
          </ul>
          <div class="help-link-group" aria-label="Search controls">
            <a
              class="help-link button-link"
              href="#topBar"
              data-help-target="#featureSearch"
            >Global search</a>
            <a
              class="help-link button-link"
              href="#helpDialog"
              data-help-target="#helpSearch"
            >Help search</a>
            <a
              class="help-link button-link"
              href="#setup-config"
              data-help-target="#cameraSelect"
              data-help-highlight="#setup-config"
            >Filter a dropdown</a>
          </div>
        </section>
        <section
          data-help-section
          id="helpDialogHelp"
          data-help-keywords="help dialog window modal question mark f1 instructions search toggle open close clear focus"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEEFB;</span>Help Dialog</h3>
          <ul>
            <li>Open with the <strong>?</strong> button or press <kbd>?</kbd>, <kbd>H</kbd>, <kbd>F1</kbd> or <kbd>Ctrl</kbd>+<kbd>/</kbd> (<kbd>⌘</kbd>+<kbd>/</kbd> on macOS); shortcuts work even while typing.</li>
            <li>Type keywords or alternate spellings to filter topics; the search resets automatically whenever you close the dialog.</li>
            <li>Quick links update as you type—use <kbd>Tab</kbd> or click to focus a link, then press <kbd>Enter</kbd> to scroll to that section.</li>
            <li>Click the × button to clear the search and show all topics again, or press <kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> (<kbd>⌘</kbd>+<kbd>F</kbd> on macOS) to jump back to the search box.</li>
            <li>The search matches common keywords and alternate spellings, so queries like “favourites” still highlight the Favorites tips.</li>
            <li>Close the dialog with <kbd>Escape</kbd> or by clicking outside.</li>
          </ul>
          <div class="help-link-group" aria-label="Help dialog controls">
            <a class="help-link button-link" href="#helpButton" data-help-target="#helpButton">Help button</a>
            <a class="help-link button-link" href="#helpDialog" data-help-target="#helpSearch">Help search</a>
            <a class="help-link button-link" href="#helpDialog" data-help-target="#helpSearchClear">Clear search</a>
          </div>
        </section>
        <section
          data-help-section
          id="troubleshootingHelp"
          data-help-keywords="troubleshooting recovery issue problem stuck blank update reload cache backup restore revert factory reset missing gear lost data verification safety checklist"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF2DF;</span>Troubleshooting &amp; Recovery</h3>
          <ul>
            <li>
              If the interface looks stuck or outdated, click
              <a class="help-link" href="#reloadButton" data-help-target="#reloadButton"><em>Force reload</em></a>
              to clear cached files without deleting saved projects or custom devices.
            </li>
            <li>
              Lost work? Open Settings → Backup &amp; Restore and enable
              <a
                class="help-link"
                href="#settingsDialog"
                data-help-target="#settingsShowAutoBackups"
              >Show auto backups in project list</a>
              to restore a recent snapshot.
            </li>
            <li>
              Before resetting anything, download your current database with
              <a class="help-link" href="#device-manager" data-help-target="#exportDataBtn"><em>Export</em></a>
              and keep project JSON files via
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#shareSetupBtn"
                data-help-highlight="#setup-manager"
              ><em>Export Project</em></a>
              so you can re-import them later.
            </li>
            <li>
              When you run <a class="help-link" href="#settingsDialog" data-help-target="#restoreSettings"><em>Restore</em></a>
              the planner downloads a fresh safety backup first. Keep that file until you have confirmed the restored data so you
              can revert instantly if anything looks off.
            </li>
            <li>
              To wipe everything clean, use
              <a class="help-link" href="#settingsDialog" data-help-target="#factoryResetButton"><em>Factory reset</em></a>
              or open the Device Database Editor and click
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#exportAndRevertBtn"
              ><em>Export and Revert</em></a>
              —both actions prompt you to save a safety backup first.
            </li>
          </ul>
          <div class="help-link-group" aria-label="Troubleshooting tools">
            <a class="help-link button-link" href="#reloadButton" data-help-target="#reloadButton"><em>Force reload</em></a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#settingsShowAutoBackups"
            >Auto backups</a>
            <a
              class="help-link button-link"
              href="#settingsDialog"
              data-help-target="#factoryResetButton"
            >Factory reset</a>
            <a
              class="help-link button-link"
              href="#device-manager"
              data-help-target="#exportAndRevertBtn"
            >Export &amp; Revert</a>
          </div>
        </section>
        <section
          data-help-section
          id="hoverHelp"
          data-help-keywords="hover help tooltips hints guidance cursor descriptions overlay tips"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE597;</span>Hover Help</h3>
          <ul>
            <li>Activate tooltip mode with <strong>Hover for help</strong> in the help dialog.</li>
            <li>Move the cursor over buttons, fields, dropdowns or headers to see brief explanations.</li>
            <li>Click anywhere or press <kbd>Escape</kbd> to exit.</li>
          </ul>
          <div class="help-link-group" aria-label="Hover help control">
            <a class="help-link button-link" href="#helpDialog" data-help-target="#hoverHelpButton">Hover for help button</a>
          </div>
        </section>
        <section
          data-help-section
          id="languageHelp"
          data-help-keywords="language translation locale localisation english german spanish french italian switch change"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEAE7;</span>Language</h3>
          <ul>
            <li>Use the dropdown in the top right to switch languages.</li>
            <li>Your choice is remembered for the next visit.</li>
          </ul>
          <div class="help-link-group" aria-label="Language controls">
            <a class="help-link button-link" href="#languageSelect" data-help-target="#languageSelect">Header language menu</a>
            <a class="help-link button-link" href="#settingsDialog" data-help-target="#settingsLanguage">Settings language</a>
          </div>
        </section>
        <section
          data-help-section
          id="darkModeHelp"
          data-help-keywords="dark mode night theme low light brightness contrast toggle d key"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEC7E;</span>Dark Mode</h3>
          <ul>
            <li>Click the moon button or press <kbd>D</kbd> to toggle dark mode.</li>
            <li>The setting persists between visits.</li>
          </ul>
          <div class="help-link-group" aria-label="Theme controls">
            <a class="help-link button-link" href="#darkModeToggle" data-help-target="#darkModeToggle">Dark mode toggle</a>
          </div>
        </section>
        <section
          data-help-section
          id="pinkModeHelp"
          data-help-keywords="pink mode horse unicorn accent theme playful sparkle colour color toggle p key animation cycle rotating"
        >
          <h3>
            <span id="pinkModeHelpIcon" class="help-icon icon-glyph icon-svg pink-mode-icon" aria-hidden="true">
              <svg viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path
                  d="m1 40c0-8 3-17 3-17a4.84 4.84 0 0 0-1.829-3.064 1 1 0 0 1 .45-1.716 19.438 19.438 0 0 1 4.379-.22c.579-2.317-1.19-3.963-2.782-4.938a1 1 0 0 1 .393-1.85 14.128 14.128 0 0 1 6.389.788c0-.958-1.147-2.145-2.342-3.122a1 1 0 0 1 .708-1.773 40.655 40.655 0 0 1 6.634.895 3.723 3.723 0 0 0-1.049-2.264 1 1 0 0 1 .823-1.652c6.151.378 9.226 1.916 9.226 1.916l10-1s8.472-2.311 15.954.5a1 1 0 0 1-.084 1.9c-1.455.394-2.87 1.143-2.87 2.6 0 0 4.426.738 5.675 4.114a1 1 0 0 1-1.228 1.317c-1.64-.48-4.273-.88-6.447.569Z"
                  fill="#805333"
                />
                <path
                  d="m30.18 42.82c1.073 2.7 2.6 9.993 3.357 13.8a2 2 0 0 1-1.964 2.38h-28.573a2 2 0 0 1-2-2v-18c0-2.55 10.03-22.11 23.99-23.87Z"
                  fill="#a56a43"
                />
                <path
                  d="m55.67 48.46-6.34 2.97a6 6 0 0 1-7.98-2.88l-.25-.54-.76-1.6a4.956 4.956 0 0 0-4.68-2.87c-.22.01-.44.02-.66.02a16.019 16.019 0 0 1-8.28-29.66c-1.81-2.97-3.45-8.03 2.03-12.49a2.1 2.1 0 0 1 2.5 0c4.23 3.45 4.21 7.25 3.16 10.17a16 16 0 0 1 15.91 11.36l5.31 11.31 2.92 6.22a6.008 6.008 0 0 1-2.88 7.99Z"
                  fill="#cb8252"
                />
                <circle cx="42" cy="26" r="3" fill="#2c2f38" />
                <circle cx="54" cy="43" r="1" fill="#805333" />
                <path
                  d="m58.55 40.47-2.92-6.22-14.53 13.76.25.54a6 6 0 0 0 7.98 2.88l6.34-2.97a6.008 6.008 0 0 0 2.88-7.99Zm-4.55 3.53a1 1 0 1 1 1-1 1 1 0 0 1-1 1Z"
                  fill="#cf976a"
                />
                <circle cx="41" cy="25" r="1.25" fill="#ecf0f1" />
              </svg>
            </span>
            Pink Mode
          </h3>
          <ul>
            <li>
              Click the unicorn button for a playful pink accent theme. When pink mode is on, the button cycles through unicorn
              icons every 30 seconds with a gentle pop animation and becomes a horse again when you return to the default theme.
            </li>
            <li>The setting persists between visits and works in light or dark mode.</li>
            <li>Press <kbd>P</kbd> to toggle pink mode.</li>
          </ul>
          <div class="help-link-group" aria-label="Theme controls">
            <a class="help-link button-link" href="#pinkModeToggle" data-help-target="#pinkModeToggle">Pink mode toggle</a>
          </div>
        </section>
        <section
          data-help-section
          id="shortcuts"
          data-help-keywords="keyboard shortcuts hotkeys key commands quick reference controls"
        >
          <h3><span class="help-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xEAB8;</span>Keyboard Shortcuts</h3>
          <ul>
            <li><kbd>?</kbd>, <kbd>H</kbd>, <kbd>F1</kbd> or <kbd>Ctrl</kbd>+<kbd>/</kbd> – toggle help</li>
            <li><kbd>Ctrl</kbd>+<kbd>K</kbd> (<kbd>⌘</kbd>+<kbd>K</kbd>) – focus the global search field</li>
            <li><kbd>Escape</kbd> – close dialogs</li>
            <li><kbd>D</kbd> – toggle dark mode</li>
            <li><kbd>P</kbd> – toggle pink mode</li>
            <li><kbd>Enter</kbd> or <kbd>Ctrl</kbd>+<kbd>S</kbd> (<kbd>⌘</kbd>+<kbd>S</kbd> on macOS) – save project</li>
            <li>Type in dropdowns to filter options</li>
          </ul>
        </section>
        <section
          data-help-section
          id="faq"
          data-help-keywords="faq questions answers troubleshooting tips"
        >
          <h3>
            <span class="help-icon icon-glyph icon-text" aria-hidden="true" data-icon-font="uicons">?</span>FAQ
          </h3>
          <details
            class="faq-item"
            data-help-keywords="save project saved projects ctrl+s enter autosave rename update"
          >
            <summary>How do I save a project?</summary>
            <p>
              Enter a name in the
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#setupName"
                data-help-highlight="#setup-manager"
              >Project Name</a>
              field and click
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#saveSetupBtn"
                data-help-highlight="#setup-manager"
              >Save</a>.
              It will then appear in the
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#setupSelect"
                data-help-highlight="#setup-manager"
              >Saved Projects</a>
              list. Selecting an entry loads it instantly; tweak the setup and press
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#saveSetupBtn"
                data-help-highlight="#setup-manager"
              >Save</a>
              again to update it, use
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#deleteSetupBtn"
                data-help-highlight="#setup-manager"
              >Delete</a>
              to remove it entirely or pick
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#setupSelect"
                data-help-highlight="#setup-manager"
              >-- New Project --</a>
              to start fresh without touching saved copies.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="share backup export import json download upload restore collaboration file"
          >
            <summary>How do I share or back up a project?</summary>
            <p>
              Click
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#shareSetupBtn"
                data-help-highlight="#setup-manager"
              ><em>Export Project</em></a>
              to open the export dialog. Choose a file name and optionally include automatic gear rules before downloading a JSON bundle with your selections, project requirements, gear list, runtime feedback and any custom devices. Send the file to collaborators or keep it as a backup, then choose it in the
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#applySharedLinkBtn"
                data-help-highlight="#setup-manager"
              ><em>Import Project</em></a>
              field and press
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#applySharedLinkBtn"
                data-help-highlight="#setup-manager"
              ><em>Import</em></a>
              to restore it. When the file contains automatic gear rules you'll be asked whether to apply them only to the current project or add them to all projects before continuing.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="auto backup automatic snapshot restore recover hourly download show saved projects setting safety net redundancy full app before restore factory reset"
          >
            <summary>How do automatic backups work?</summary>
            <p>
              Cine Power Planner layers three automatic safety nets alongside your manual saves:
            </p>
            <ul>
              <li>
                <strong>Auto snapshots</strong> capture the active project every 10 minutes. Enable
                <a class="help-link" href="#settingsDialog" data-help-target="#settingsShowAutoBackups">Show auto backups in project list</a>
                in Settings → Backup &amp; Restore to reveal the timestamped <code>auto-backup-…</code> entries beneath the
                <a
                  class="help-link"
                  href="#setup-manager"
                  data-help-target="#setupSelect"
                  data-help-highlight="#setup-manager"
                >Saved Projects</a>
                dropdown so you can load, review and rename them.
              </li>
              <li>
                <strong>Hourly full-app backups</strong> download JSON archives (for example, “2024-06-15T14-00-00 full app backup.json”) that bundle every project, automatic gear rule, device edit, favorite and runtime log. Keep at least two copies on separate drives so you always have an offline recovery point.
              </li>
              <li>
                <strong>Restore safeguards</strong> run whenever you restore or perform a factory reset. The planner creates a fresh “before” backup automatically so you can revert immediately if the new file is not what you expected.
              </li>
            </ul>
            <p>
              Open any auto snapshot to inspect it; press
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#saveSetupBtn"
                data-help-highlight="#setup-manager"
              >Save</a>
              if you want to keep the snapshot as a regular project. Archive the hourly downloads once verified, or delete them after you have stored redundant copies elsewhere.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="automatic gear rules scenarios add remove custom items generator overrides"
          >
            <summary>How do Automatic Gear Rules work?</summary>
            <p>
              Open <em>Settings → Automatic Gear Rules</em> and click
              <a class="help-link" href="#settingsDialog" data-help-target="#autoGearAddRule">Add rule</a>
              to reveal the editor. Name the rule so it is easy to recognise later.
            </p>
            <p>
              Select at least one condition from <strong>Required Scenarios</strong>, <strong>Mattebox options</strong>,
              <strong>Camera handles</strong>, <strong>Viewfinder extension</strong> or <strong>Video distribution</strong>.
              The rule runs only when every chosen value is active in the
              <a
                class="help-link"
                href="#projectRequirementsOutput"
                data-help-target="#projectRequirementsOutput"
              >Project Requirements</a>
              form. Add gear lines with category and quantity in <strong>Add these items</strong>—choose
              <em>Custom Additions</em> for notes or bespoke kit.
            </p>
            <p>
              Use the <strong>Remove these items</strong> list to hide entries the generator adds by default. Rules are stored in
              Settings, included in backups and apply to printable gear lists and exported project bundles. Use
              <strong>Reset to factory additions</strong> to restore the built-in helpers, or download and reload JSON sets with
              <strong>Export rules</strong> and <strong>Import rules</strong> when collaborating offline.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="edit device data database editor custom gear add remove modify"
          >
            <summary>How do I edit device data?</summary>
            <p>
              Click the
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#toggleDeviceManager"
              ><em>Edit Device Data…</em></a>
              button to open the database editor where you can add, change or remove devices.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="battery runtime calculation estimate formula watt hours consumption"
          >
            <summary>How is battery runtime calculated?</summary>
            <p>The app divides the selected battery's capacity (in watt-hours) by the total power consumption of your devices. For example, a 98&nbsp;Wh battery powering a 24&nbsp;W project is estimated to run for about 4&nbsp;hours.</p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="warning colors alerts orange red overload limit dtap safety"
          >
            <summary>What do the warning colors mean?</summary>
            <p>Orange messages indicate the project is nearing the battery's output limit. Red warnings mean the estimated current exceeds the safe rating and could damage the battery.</p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="projects saved storage localstorage browser offline data persistence"
          >
            <summary>Where are my projects saved?</summary>
            <p>
              Projects and device edits are stored in your browser's <code>localStorage</code>. Use
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#shareSetupBtn"
                data-help-highlight="#setup-manager"
              ><em>Export Project</em></a>
              to download a setup file, and use the Device Database Editor's
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#exportDataBtn"
              ><em>Export</em></a>
              /
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#importDataBtn"
              ><em>Import</em></a>
              buttons to back up custom gear.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="offline pwa cached caching service worker airplane mode"
          >
            <summary>Does the planner work offline?</summary>
            <p>Yes. Once the fonts and database are cached on first load, all features continue to work without an internet connection.</p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="install app pwa add to home screen desktop ios android progressive web app"
          >
            <summary>Can I install the planner as an app?</summary>
            <p>You can install the planner like an app on most platforms:</p>
            <ul>
              <li><strong>Chrome/Edge (desktop):</strong> Click the install icon in the address bar.</li>
              <li><strong>Android:</strong> Open the browser menu and choose <em>Add to Home Screen</em>.</li>
              <li><strong>iOS/iPadOS Safari:</strong> Tap the <em>Share</em> button and select <em>Add to Home Screen</em>.</li>
              <li>After installation it runs offline and updates automatically.</li>
            </ul>
          </details>
          <details
            class="faq-item"
            data-help-keywords="reset defaults revert factory reset wipe data clear restore"
          >
            <summary>How do I reset everything to the defaults?</summary>
            <p>
              Open the device editor and choose
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#exportAndRevertBtn"
              ><em>Export and Revert</em></a>
              to restore the default database. Delete projects individually using the
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#deleteSetupBtn"
                data-help-highlight="#setup-manager"
              >Delete</a>
              button, or open <em>Settings → Backup &amp; Restore</em> and press
              <a
                class="help-link"
                href="#settingsButton"
                data-help-target="#factoryResetButton"
              ><em>Factory reset</em></a>
              to download a safety backup and wipe saved projects, favorites and runtime data at once.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="change language translation locale switch english german spanish french italian"
          >
            <summary>How do I change the language?</summary>
            <p>
              Use the
              <a class="help-link" href="#languageSelect" data-help-target="#languageSelect">language dropdown</a>
              in the top right to pick a language. The planner remembers your choice for the next visit.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="print overview pdf summary report generate overview"
          >
            <summary>How can I print a project overview?</summary>
            <p>
              Save the project, then click
              <a
                class="help-link"
                href="#setup-manager"
                data-help-target="#generateOverviewBtn"
                data-help-highlight="#setup-manager"
              ><em>Generate Overview</em></a>
              and print from the dialog.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="compare batteries battery comparison runtime chart list options"
          >
            <summary>How do I compare different batteries?</summary>
            <p>
              The
              <a
                class="help-link"
                href="#batteryComparison"
                data-help-target="#batteryComparisonHeading"
                data-help-highlight="#batteryComparison"
              >Battery Comparison</a>
              section shows estimated run time for all batteries once a configuration is calculated.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="device database import export json share data backup"
          >
            <summary>How do I import or export the device database?</summary>
            <p>
              Open the
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#toggleDeviceManager"
              >Device Database Editor</a>
              and use the
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#exportDataBtn"
              ><em>Export</em></a>
              button to download your current database as JSON. Use
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#importDataBtn"
              ><em>Import</em></a>
              to load a JSON file and replace your local data.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="add devices edit custom gear database editor create modify remove"
          >
            <summary>Can I edit or add devices?</summary>
            <p>
              Yes. In the
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#deviceManagerHeading"
                data-help-highlight="#device-manager"
              >Device Database Editor</a>
              you can create new devices, change existing ones or delete entries. The changes appear immediately in the dropdown menus.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="connection diagram project diagram connections cables layout wiring nodes visual map"
          >
            <summary>What does the Connection Diagram show?</summary>
            <p>
              The
              <a
                class="help-link"
                href="#setupDiagram"
                data-help-target="#setupDiagramHeading"
                data-help-highlight="#setupDiagram"
              >diagram</a>
              illustrates how power and video cables connect between your chosen devices. Drag the nodes to arrange them and use the buttons to zoom or download an image.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="device categories types list optional required slots selections"
          >
            <summary>Which device categories are available?</summary>
            <p>
              Categories include Camera, Monitor, Wireless Transmitter, FIZ Motors, FIZ Controllers, Distance Sensor, Battery Plate and V‑/B‑Mount Battery. You can configure them in
              <a
                class="help-link"
                href="#setup-config"
                data-help-target="#cameraSelect"
                data-help-highlight="#setup-config"
              >Configure Devices</a>.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="clear cache update refresh reload force reload service worker"
          >
            <summary>How do I clear cached files or update the app?</summary>
            <p>
              Use the
              <a class="help-link" href="#reloadButton" data-help-target="#reloadButton"><em>Force reload</em></a>
              button (<span class="icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF202;</span>) in the top bar to clear cached files and reload without losing saved data.
            </p>
          </details>
          <details
            class="faq-item"
            data-help-keywords="device data source manufacturer specs defaults dataset"
          >
            <summary>Where does the device data come from?</summary>
            <p>
              The default database is defined in the files under <code>devices/</code> from manufacturer specifications. You can modify or replace them via the
              <a
                class="help-link"
                href="#device-manager"
                data-help-target="#deviceManagerHeading"
                data-help-highlight="#device-manager"
              >Device Database Editor</a>.
            </p>
          </details>
        </section>
      </div>
    </div>
  </dialog>
  <dialog
    id="powerWarningDialog"
    class="app-modal"
    role="alertdialog"
    aria-modal="true"
    aria-labelledby="powerWarningTitle"
    aria-describedby="powerWarningMessage powerWarningLimitsHeading powerWarningPinsDetail powerWarningDtapDetail powerWarningAdvice"
  >
    <form method="dialog" class="modal-surface power-warning-dialog">
      <div class="power-warning-header">
        <span
          class="icon-glyph power-warning-icon"
          aria-hidden="true"
          data-icon-font="essential"
        >&#xF26F;</span>
        <h3 id="powerWarningTitle" class="power-warning-title">Battery cannot power this load</h3>
      </div>
      <section class="power-warning-summary" aria-labelledby="powerWarningTitle">
        <p id="powerWarningMessage"></p>
      </section>
      <section class="power-warning-section" aria-labelledby="powerWarningLimitsHeading">
        <h4 id="powerWarningLimitsHeading">Output limits</h4>
        <ul class="power-warning-details">
          <li id="powerWarningPinsDetail"></li>
          <li id="powerWarningDtapDetail"></li>
        </ul>
      </section>
      <p id="powerWarningAdvice" class="power-warning-advice">
        Choose another battery, reduce the draw, or add power distribution.
      </p>
      <div class="dialog-actions">
        <button type="button" id="powerWarningCloseBtn" class="primary">Understood</button>
      </div>
    </form>
  </dialog>

  <dialog
    id="shareDialog"
    class="app-modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="shareDialogHeading"
  >
    <form id="shareForm" method="dialog" class="modal-surface share-dialog">
      <h3 id="shareDialogHeading">Export Project</h3>
      <p id="shareFilenameMessage">Enter a name for the exported project file (default: project).</p>
      <div class="form-row">
        <label for="shareFilename" id="shareFilenameLabel">Export file name</label>
        <input type="text" id="shareFilename" name="shareFilename" />
      </div>
      <label id="shareIncludeAutoGearLabel" class="share-option">
        <input type="checkbox" id="shareIncludeAutoGear" />
        <span id="shareIncludeAutoGearText">Include automatic gear rules</span>
      </label>
      <div class="dialog-actions">
        <button type="button" id="shareCancelBtn">Cancel</button>
        <button type="submit" id="shareConfirmBtn">Download</button>
      </div>
    </form>
  </dialog>

  <dialog id="sharedImportDialog" class="app-modal" aria-labelledby="sharedImportDialogHeading" aria-modal="true">
    <form id="sharedImportForm" method="dialog" class="modal-surface share-import-dialog">
      <h3 id="sharedImportDialogHeading">Automatic gear rules</h3>
      <p id="sharedImportDialogMessage">Choose how to apply the shared automatic gear rules from this project.</p>
      <fieldset id="sharedImportOptions" class="share-import-options">
        <legend id="sharedImportLegend">Automatic gear rules</legend>
        <select
          id="sharedImportModeSelect"
          class="share-import-mode-select"
          name="sharedImportMode"
          multiple
          size="3"
          aria-labelledby="sharedImportLegend"
        >
          <option id="sharedImportModeNoneOption" value="none" selected>
            Do not import automatic gear rules
          </option>
          <option id="sharedImportModeProjectOption" value="project" disabled>
            Use shared rules for this project only
          </option>
          <option id="sharedImportModeGlobalOption" value="global" disabled>
            Use shared rules for all projects
          </option>
        </select>
      </fieldset>
      <div class="dialog-actions">
        <button type="button" id="sharedImportCancelBtn">Cancel</button>
        <button type="submit" id="sharedImportConfirmBtn">Apply</button>
      </div>
    </form>
  </dialog>

  <dialog id="projectDialog" class="app-modal" aria-labelledby="projectDialogHeading">
    <form id="projectForm" method="dialog" class="modal-surface modal-surface-scrollable project-dialog">
      <div class="project-dialog-header">
        <h2 id="projectDialogHeading">Project Requirements</h2>
      </div>
      <div class="project-dialog-body">
        <section class="project-dialog-section project-dialog-section-basic">
          <div class="project-section-content">
            <div class="form-row">
              <label for="productionCompany" id="productionCompanyLabel">Production Company:</label>
              <input type="text" id="productionCompany" name="productionCompany" />
            </div>
            <div class="form-row">
              <label for="rentalHouse" id="rentalHouseLabel">Rental House:</label>
              <input type="text" id="rentalHouse" name="rentalHouse" />
            </div>
          </div>
        </section>
        <section class="project-dialog-section" aria-labelledby="crewHeading">
          <h3 id="crewHeading" class="project-section-title">Crew</h3>
          <div class="project-section-content">
            <div class="form-row" id="crewListRow">
              <div class="form-row-label" id="crewLabel">Crew:</div>
              <div id="crewContainer" role="group" aria-labelledby="crewLabel"></div>
              <button type="button" id="addPersonBtn">
                <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE02E;</span>
              </button>
            </div>
            <div class="form-row" id="prepListRow">
              <div class="form-row-label" id="prepLabel">Prep Days:</div>
              <div id="prepContainer" role="group" aria-labelledby="prepLabel"></div>
              <button type="button" id="addPrepBtn">
                <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE02E;</span>
              </button>
            </div>
            <div class="form-row" id="shootListRow">
              <div class="form-row-label" id="shootLabel">Shooting Days:</div>
              <div id="shootContainer" role="group" aria-labelledby="shootLabel"></div>
              <button type="button" id="addShootBtn">
                <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE02E;</span>
              </button>
            </div>
          </div>
        </section>
        <section class="project-dialog-section project-dialog-section-camera">
          <div class="project-section-content">
            <div class="form-row">
              <label for="deliveryResolution" id="deliveryResolutionLabel">Delivery Resolution:</label>
              <select id="deliveryResolution" name="deliveryResolution">
                <option value=""></option>
                <option value="720p">720p</option>
                <option value="1080p">1080p</option>
                <option value="1440p">1440p</option>
                <option value="2K">2K</option>
                <option value="2.7K">2.7K</option>
                <option value="3.2K UHD">3.2K UHD</option>
                <option value="4K">4K</option>
                <option value="4.5K">4.5K</option>
                <option value="5K">5K</option>
                <option value="5.7K">5.7K</option>
                <option value="6K">6K</option>
                <option value="7K">7K</option>
                <option value="8K">8K</option>
                <option value="9K">9K</option>
                <option value="12K">12K</option>
                <option value="16K">16K</option>
              </select>
            </div>
            <div class="form-row">
              <label for="recordingResolution" id="recordingResolutionLabel">Recording Resolution:</label>
              <select id="recordingResolution" name="recordingResolution"></select>
            </div>
            <div class="form-row">
              <label for="sensorMode" id="sensorModeLabel">Sensor Mode:</label>
              <select id="sensorMode" name="sensorMode"></select>
            </div>
            <div class="form-row">
              <label for="aspectRatio" id="aspectRatioLabel">Aspect Ratio:</label>
              <select id="aspectRatio" name="aspectRatio" multiple size="20">
                <option value="16:9">16:9</option>
                <option value="17:9">17:9</option>
                <option value="4:3">4:3</option>
                <option value="1.85:1">1.85:1</option>
                <option value="2.39:1">2.39:1</option>
                <option value="1:1">1:1</option>
                <option value="3:2">3:2</option>
                <option value="2:1">2:1</option>
                <option value="9:16">9:16</option>
                <option value="21:9">21:9</option>
                <option value="1.37:1">1.37:1</option>
                <option value="1.66:1">1.66:1</option>
                <option value="1.90:1">1.90:1</option>
                <option value="2.20:1">2.20:1</option>
                <option value="2.35:1">2.35:1</option>
                <option value="2.40:1">2.40:1</option>
                <option value="2.76:1">2.76:1</option>
                <option value="4:5">4:5</option>
                <option value="5:4">5:4</option>
                <option value="16:10">16:10</option>
              </select>
            </div>
            <div class="form-row">
              <label for="codec" id="codecLabel">Codec:</label>
              <select id="codec" name="codec"></select>
            </div>
            <div class="form-row">
              <label for="baseFrameRate" id="baseFrameRateLabel">Base Frame Rate:</label>
              <select id="baseFrameRate" name="baseFrameRate">
                <option value=""></option>
                <option value="23.976">23.976</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="29.97">29.97</option>
                <option value="30">30</option>
                <option value="50">50</option>
                <option value="59.94">59.94</option>
                <option value="60">60</option>
              </select>
            </div>
          </div>
        </section>
        <section class="project-dialog-section" aria-labelledby="lensesHeading">
          <h3 id="lensesHeading" class="project-section-title">Lenses</h3>
          <div class="project-section-content">
            <div class="form-row lens-selector-row">
              <label for="lenses" id="lensesLabel">Lenses:</label>
              <div class="select-wrapper lens-selector">
                <select id="lenses" name="lenses" multiple size="10" aria-labelledby="lensesLabel"></select>
              </div>
            </div>
          </div>
        </section>
        <section class="project-dialog-section" aria-labelledby="riggingHeading">
          <h3 id="riggingHeading" class="project-section-title">Rigging</h3>
          <div class="project-section-content">
            <div class="form-row">
              <label for="requiredScenarios" id="requiredScenariosLabel">What required scenarios do we have for this shoot?</label>
              <select id="requiredScenarios" name="requiredScenarios" multiple size="25">
                <option value="Indoor">Indoor</option>
                <option value="Outdoor">Outdoor</option>
                <option value="Studio">Studio</option>
                <option value="Tripod">Tripod</option>
                <option value="Handheld">Handheld</option>
                <option value="Easyrig">Easyrig</option>
                <option value="Cine Saddle">Cine Saddle</option>
                <option value="Steadybag">Steadybag</option>
                <option value="Dolly">Dolly</option>
                <option value="Slider">Slider</option>
                <option value="Steadicam">Steadicam</option>
                <option value="Gimbal">Gimbal</option>
                <option value="Trinity">Trinity</option>
                <option value="Rollcage">Rollcage</option>
                <option value="Car Mount">Car Mount</option>
                <option value="Jib">Jib</option>
                <option value="Undersling mode">Undersling mode</option>
                <option value="Crane">Crane</option>
                <option value="Remote Head">Remote Head</option>
                <option value="Extreme cold (snow)">Extreme cold (snow)</option>
                <option value="Extreme rain">Extreme rain</option>
                <option value="Extreme heat">Extreme heat</option>
                <option value="Rain Machine">Rain Machine</option>
                <option value="Slow Motion">Slow Motion</option>
                <option value="Battery Belt">Battery Belt</option>
              </select>
              <div id="requiredScenariosSummary" class="scenario-summary" aria-live="polite"></div>
            </div>
            <div class="form-row">
              <label for="cameraHandle" id="cameraHandleLabel">Camera Handle:</label>
              <select id="cameraHandle" name="cameraHandle" multiple size="3">
                <option value="Handle Extension">Handle Extension</option>
                <option value="L-Handle">L-Handle</option>
                <option value="Hand Grips">Hand Grips</option>
              </select>
            </div>
            <div class="form-row hidden" id="viewfinderExtensionRow">
              <label for="viewfinderExtension" id="viewfinderExtensionLabel">Viewfinder Extension:</label>
              <select id="viewfinderExtension" name="viewfinderExtension">
                <option value="" selected>No</option>
                <option value="ARRI VEB-3 Viewfinder Extension Bracket">Yes</option>
              </select>
            </div>
          </div>
        </section>

        <input type="hidden" id="viewfinderEyeLeatherColor" name="viewfinderEyeLeatherColor" value="Red" />

        <section class="project-dialog-section" aria-labelledby="matteboxFilterHeading">
          <h3 id="matteboxFilterHeading" class="project-section-title">Mattebox and Filter</h3>
          <div class="project-section-content">
            <div class="form-row">
              <label for="mattebox" id="matteboxLabel">Mattebox:</label>
              <select id="mattebox" name="mattebox">
                <option value="">-- Select --</option>
                <option value="Rod based">Rod based</option>
                <option value="Clamp On">Clamp On</option>
                <option value="Swing Away">Swing Away</option>
              </select>
            </div>
            <div class="form-row">
              <label for="filter" id="filterLabel">Filter:</label>
              <select id="filter" name="filter" multiple size="10"></select>
            </div>
            <div class="form-row visually-hidden" id="filterDetails" aria-hidden="true"></div>
          </div>
        </section>
        <section class="project-dialog-section" aria-labelledby="monitoringHeading">
          <h3 id="monitoringHeading" class="project-section-title">Monitoring</h3>
          <div class="project-section-content">
            <div class="form-row">
              <label for="monitoringConfiguration" id="monitoringConfigurationLabel">Camera Monitoring Configuration:</label>
              <select id="monitoringConfiguration" name="monitoringConfiguration">
                <option value="Viewfinder only">Viewfinder only</option>
                <option value="Viewfinder and Onboard">Viewfinder and Onboard</option>
                <option value="Onboard Only">Onboard Only</option>
              </select>
            </div>
            <div class="form-row hidden" id="viewfinderSettingsRow">
              <label for="viewfinderSettings" id="viewfinderSettingsLabel">Viewfinder Settings:</label>
              <select id="viewfinderSettings" name="viewfinderSettings" multiple size="2">
                <option value="Viewfinder Clean Feed">Viewfinder Clean Feed</option>
                <option value="Surround View">Surround View</option>
              </select>
            </div>
            <div class="form-row">
              <label for="frameGuides" id="frameGuidesLabel">Frameguides:</label>
              <select id="frameGuides" name="frameGuides" multiple size="5">
                <option value="Frame Guide: Center Dot">Frame Guide: Center Dot</option>
                <option value="Frame Guides: Center Cross">Frame Guides: Center Cross</option>
                <option value="Frame Guide: Rule of Thirds">Frame Guide: Rule of Thirds</option>
                <option value="Frame Guide: User Box">Frame Guide: User Box</option>
                <option value="Frame Guide: 90% marker">Frame Guide: 90% marker</option>
              </select>
            </div>
            <div class="form-row">
              <label for="aspectMaskOpacity" id="aspectMaskOpacityLabel">Aspect Mask Opacity:</label>
              <select id="aspectMaskOpacity" name="aspectMaskOpacity" multiple size="5">
                <option value="Aspect Mask Opacity 100%">Aspect Mask Opacity 100%</option>
                <option value="AM Opacity 75%">AM Opacity 75%</option>
                <option value="AM Opacity 50%">AM Opacity 50%</option>
                <option value="AM Opacity 25%">AM Opacity 25%</option>
                <option value="AM Opacity 0%">AM Opacity 0%</option>
              </select>
            </div>
            <div class="form-row">
              <label for="videoDistribution" id="videoDistributionLabel">Video distribution:</label>
              <select id="videoDistribution" name="videoDistribution" multiple size="10">
                <option value="Director Monitor 7&quot; handheld">Director Monitor 7&quot; handheld</option>
                <option value="Gaffer Monitor 7&quot; handheld">Gaffer Monitor 7&quot; handheld</option>
                <option value="Director Monitor 15-21&quot;">Director Monitor 15-21&quot;</option>
                <option value="Combo Monitor 15-21&quot;">Combo Monitor 15-21&quot;</option>
                <option value="IOS Video">IOS Video</option>
                <option value="DoP Monitor 7&quot; handheld">DoP Monitor 7&quot; handheld</option>
                <option value="DoP Monitor 15-21&quot;">DoP Monitor 15-21&quot;</option>
              </select>
            </div>
          </div>
        </section>
        <section class="project-dialog-section" aria-labelledby="userButtonsHeading">
          <h3 id="userButtonsHeading" class="project-section-title">User Buttons</h3>
          <div class="project-section-content">
            <div class="form-row">
              <label for="monitorUserButtons" id="monitorUserButtonsLabel">Onboard Monitor User Buttons:</label>
              <select id="monitorUserButtons" name="monitorUserButtons" multiple></select>
            </div>
            <div class="form-row">
              <label for="cameraUserButtons" id="cameraUserButtonsLabel">Camera User Buttons:</label>
              <select id="cameraUserButtons" name="cameraUserButtons" multiple></select>
            </div>
            <div class="form-row">
              <label for="viewfinderUserButtons" id="viewfinderUserButtonsLabel">Viewfinder User Buttons:</label>
              <select id="viewfinderUserButtons" name="viewfinderUserButtons" multiple></select>
            </div>
          </div>
        </section>
        <section
          class="project-dialog-section hidden"
          aria-labelledby="tripodPreferencesHeading"
          id="tripodPreferencesSection"
        >
          <h3 id="tripodPreferencesHeading" class="project-section-title hidden">Tripod Preferences</h3>
          <div class="project-section-content hidden" id="tripodPreferencesRow">
            <div class="form-row">
              <label for="tripodHeadBrand" id="tripodHeadBrandLabel">Head Brand:</label>
              <select id="tripodHeadBrand" name="tripodHeadBrand">
                <option value=""></option>
                <option value="OConnor">O'Connor</option>
                <option value="Sachtler">Sachtler</option>
                <option value="other">other</option>
              </select>
            </div>
            <div class="form-row">
              <label for="tripodBowl" id="tripodBowlLabel">Bowl type:</label>
              <select id="tripodBowl" name="tripodBowl">
                <option value=""></option>
                <option value="75mm bowl">75mm bowl</option>
                <option value="100mm bowl">100mm bowl</option>
                <option value="150mm bowl">150mm bowl</option>
                <option value="Mitchell Mount">Mitchell Mount</option>
              </select>
            </div>
            <div class="form-row">
              <label for="tripodTypes" id="tripodTypesLabel">Tripod types:</label>
              <select id="tripodTypes" name="tripodTypes" multiple size="4">
                <option value="Standard Tripod">Standard Tripod</option>
                <option value="Baby Tripod">Baby Tripod</option>
                <option value="Frog Tripod">Frog Tripod</option>
                <option value="Hi-Head">Hi-Head</option>
              </select>
            </div>
            <div class="form-row">
              <label for="tripodSpreader" id="tripodSpreaderLabel">Spreader Preference:</label>
              <select id="tripodSpreader" name="tripodSpreader">
                <option value=""></option>
                <option value="Mid-Level Spreader">Mid-Level Spreader</option>
                <option value="Ground Spreader">Ground Spreader</option>
              </select>
            </div>
          </div>
        </section>
      </div>
      <div class="project-dialog-footer">
        <button type="reset" id="projectCancel">
          <span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF131;</span>Cancel
        </button>
        <button type="submit" id="projectSubmit">OK</button>
      </div>
    </form>
  </dialog>

  <dialog
    id="feedbackDialog"
    class="app-modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="feedbackDialogHeading"
  >
    <form id="feedbackForm" method="dialog" class="modal-surface modal-surface-scrollable feedback-dialog">
      <h3 id="feedbackDialogHeading">User Runtime Feedback</h3>

      <fieldset>
        <legend><span class="legend-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF19E;</span>Basic Info</legend>
        <div class="form-row"><label>User:<input type="text" id="fbUsername" name="fbUsername" required></label></div>
        <div class="form-row"><label>Date:<input type="date" id="fbDate" name="fbDate" required></label></div>
        <div class="form-row">
          <label>Location:<input type="text" id="fbLocation" name="fbLocation"></label>
          <button type="button" id="fbUseLocationBtn">Use Current Location</button>
        </div>
      </fieldset>

      <fieldset>
        <legend><span class="legend-icon icon-glyph" id="cameraProjectLegendIcon" aria-hidden="true"></span>Camera Project</legend>
        <div class="form-row"><label>Camera:<input type="text" id="fbCamera" name="fbCamera" readonly></label></div>
        <div class="form-row"><label>Battery Plate:<input type="text" id="fbBatteryPlate" name="fbBatteryPlate" readonly></label></div>
        <div class="form-row"><label>Lens Mount:<input list="mountOptions" id="fbLensMount" name="fbLensMount"></label></div>
        <div class="form-row"><label>Res:<input list="resolutionOptions" id="fbResolution" name="fbResolution"></label></div>
        <div class="form-row"><label>Codec:<input list="codecOptions" id="fbCodec" name="fbCodec"></label></div>
        <div class="form-row"><label>FPS:<input list="framerateOptions" id="fbFramerate" name="fbFramerate"></label></div>
        <div class="form-row"><label>Camera WIFI:<select id="fbWifi" name="fbWifi"><option value="on">On</option><option value="off">Off</option></select></label></div>
        <div class="form-row"><label>Firmware:<input type="text" id="fbFirmware" name="fbFirmware"></label></div>
      </fieldset>

      <fieldset>
        <legend><span class="legend-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xE1A6;</span>Power &amp; Accessories</legend>
        <div class="form-row"><label>Battery:<input type="text" id="fbBattery" name="fbBattery" readonly></label></div>
        <div class="form-row"><label>Battery Age:<input type="number" id="fbBatteryAge" name="fbBatteryAge"></label></div>
        <div class="form-row"><label>Wireless Transmitter:<input type="text" id="fbWirelessVideo" name="fbWirelessVideo" readonly></label></div>
        <div class="form-row"><label>Monitor:<input type="text" id="fbMonitor" name="fbMonitor" readonly></label></div>
        <div class="form-row"><label>Monitor Brightness:<input type="text" id="fbMonitorBrightness" name="fbMonitorBrightness"></label></div>
        <div class="form-row"><label>Lens:<input type="text" id="fbLens" name="fbLens"></label></div>
        <div class="form-row"><label>Lens Data:<select id="fbLensData" name="fbLensData"><option value="">--</option><option value="on">On</option><option value="off">Off</option></select></label></div>
        <div class="form-row"><label>FIZ Controllers:<input type="text" id="fbControllers" name="fbControllers" readonly></label></div>
        <div class="form-row"><label>FIZ Motors:<input type="text" id="fbMotors" name="fbMotors" readonly></label></div>
        <div class="form-row"><label>FIZ Distance:<select id="fbDistance" name="fbDistance" disabled></select></label></div>
      </fieldset>

      <fieldset>
        <legend><span class="legend-icon icon-glyph" aria-hidden="true" data-icon-font="uicons">&#xF262;</span>Environment</legend>
        <div class="form-row">
          <label id="fbTemperatureLabel" for="fbTemperature">
            <span id="fbTemperatureLabelText">Temp (°C):</span>
          </label>
          <select id="fbTemperature" name="fbTemperature"></select>
        </div>
        <div class="form-row"><label>Charging:<select id="fbCharging" name="fbCharging"><option value="yes">Yes</option><option value="no">No</option></select></label></div>
        <div class="form-row"><label>Runtime (hrs):<input type="number" step="0.01" id="fbRuntime" name="fbRuntime" required></label></div>
        <div class="form-row"><label>Batteries Used per Day:<input type="number" id="fbBatteriesPerDay" name="fbBatteriesPerDay"></label></div>
      </fieldset>

      <div class="form-row button-row">
        <button type="submit" id="fbSubmit">Save &amp; Submit</button>
        <button type="button" id="fbCancel"><span class="btn-icon icon-glyph" aria-hidden="true" data-icon-font="essential">&#xF131;</span>Cancel</button>
      </div>
    </form>

    <datalist id="mountOptions">
      <option value="PL"></option>
      <option value="EF"></option>
      <option value="E"></option>
      <option value="MFT"></option>
      <option value="RF"></option>
    </datalist>
    <datalist id="resolutionOptions">
      <option value="1080p"></option>
      <option value="2K"></option>
      <option value="4K"></option>
      <option value="6K"></option>
      <option value="8K"></option>
    </datalist>
    <datalist id="codecOptions">
      <option value="ARRIRAW"></option>
      <option value="BRAW"></option>
      <option value="Canon RAW"></option>
      <option value="CinemaDNG"></option>
      <option value="R3D"></option>
      <option value="ProRes RAW"></option>
      <option value="ProRes"></option>
      <option value="DNxHD"></option>
      <option value="DNxHR"></option>
      <option value="DNxHQ"></option>
      <option value="XAVC-I"></option>
      <option value="XAVC-L"></option>
      <option value="XAVC-S"></option>
      <option value="XAVC HS"></option>
      <option value="H.264"></option>
      <option value="H.264 All-I"></option>
      <option value="H.265"></option>
      <option value="H.265 All-I"></option>
      <option value="AVC-Intra"></option>
      <option value="AVCHD"></option>
      <option value="HEVC"></option>
      <option value="X-OCN"></option>
    </datalist>
  <datalist id="framerateOptions">
      <option value="23.98"></option>
      <option value="24"></option>
      <option value="25"></option>
      <option value="30"></option>
      <option value="50"></option>
      <option value="60"></option>
      <option value="120"></option>
    </datalist>
  </dialog>
  <dialog id="overviewDialog"></dialog>
  <script src="src/scripts/loader.js"></script>
</body>
</html>
