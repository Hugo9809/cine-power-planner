<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="Plan your film rig and calculate power consumption &amp; battery life." />
  <meta property="og:title" content="Cine Power Planner" />
  <meta property="og:description" content="Plan your film rig and calculate power consumption &amp; battery life." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="icon.png" />
  <meta name="theme-color" content="#f9f9f9" />
  <meta name="application-name" content="Cine Power Planner" />
  <meta name="apple-mobile-web-app-title" content="Cine Power Planner" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self'; img-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; font-src 'self'; manifest-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'none';" />
  <meta name="referrer" content="no-referrer" />
  <meta name="color-scheme" content="light dark" />
  <title>Cine Power Planner</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="overview-print.css" media="print" />
  <link rel="icon" href="icon.svg" type="image/svg+xml" />
  <link rel="icon" href="icon.png" type="image/png" />
  <link rel="apple-touch-icon" href="icon.png" />
  <link rel="manifest" href="manifest.webmanifest">
</head>
<body>
  <a href="#mainContent" class="skip-link" id="skipLink">Skip to content</a>
  <div id="offlineIndicator" role="status" aria-live="polite">Offline</div>
  <header id="topBar">
    <div class="branding">
      <svg id="logo" viewBox="0 0 1024 1024" aria-hidden="true">
        <defs>
          <style>
            .cls-1 { fill: var(--accent-color); }
            .cls-2 { fill: #fdfdfd; }
          </style>
        </defs>
        <rect class="cls-1" width="1024" height="1024" rx="128" ry="128" />
        <path class="cls-1" d="M332.79,264.29c-66.13,6.4-105.19,79.54-74.31,138.73,35.25,67.58,131.84,67.97,167.69.65,35.6-66.85-18.81-146.6-93.38-139.38ZM532.8,264.3c-51.89,4.85-90.78,55.06-84.79,106.19,9.73,82.92,118.85,114.08,169.97,46.99,51.33-67.37-2.29-160.92-85.18-153.18ZM689.21,517.2l.28,157.8,82.46,50.54c9.27,5.08,19.04.97,20.1-10-.62-80.73,1-161.7-.82-242.28-2.55-6.41-9.86-10.22-16.21-6.74l-85.81,50.68ZM274.74,468.24c-12.21,3.53-19.68,12.51-20.77,25.23l.05,221.03c1.77,14.87,11.57,24.26,26.45,25.55h326.07c14.13-1.11,25.08-10,26.51-24.49v-223.08c-1.21-13.19-11.34-23.3-24.5-24.5l-333.8.28ZM672,530h-19v134h19v-134Z" />
        <path class="cls-2" d="M274.74,468.24l333.8-.28c13.16,1.2,23.29,11.31,24.5,24.5v223.08c-1.43,14.49-12.37,23.38-26.51,24.49h-326.07c-14.89-1.28-24.69-10.68-26.45-25.55l-.05-221.03c1.09-12.71,8.56-21.7,20.77-25.23ZM467,582l14.91-68.61c-3.75-14.34-10.29-10.19-17.88-1.86-28.03,30.79-51.9,68.87-79.85,100.15-4.19,3.66-1.94,14.32,3.32,14.32h42.5l-14.07,67.5c.6,11.86,10.68,13.88,17.04,3.97l79.87-102.13c3.57-4.95,1.6-13.34-5.34-13.34h-40.5Z" />
        <path class="cls-2" d="M532.8,264.3c82.89-7.74,136.51,85.82,85.18,153.18-51.12,67.08-160.24,35.92-169.97-46.99-6-51.12,32.9-101.34,84.79-106.19ZM539.79,321.27c-49.71,4.46-43.19,80.2,6.71,75.72,49.16-4.42,42.05-80.09-6.71-75.72Z" />
        <path class="cls-2" d="M332.79,264.29c74.57-7.22,128.98,72.53,93.38,139.38-35.85,67.31-132.44,66.92-167.69-.65-30.87-59.18,8.09-132.33,74.31-138.73ZM315.35,332.35c-32.21,32.16,12.32,84.81,49.14,57.64,43.84-32.35-11.25-95.49-49.14-57.64Z" />
        <path class="cls-2" d="M689.21,517.2l85.81-50.68c6.35-3.48,13.67.34,16.21,6.74,1.82,80.58.2,161.55.82,242.28-1.06,10.97-10.83,15.09-20.1,10l-82.46-50.54-.28-157.8Z" />
        <rect class="cls-2" x="653" y="530" width="19" height="134" />
        <path class="cls-1" d="M467,582h40.5c6.94,0,8.9,8.4,5.34,13.34l-79.87,102.13c-6.36,9.92-16.44,7.89-17.04-3.97l14.07-67.5h-42.5c-5.26,0-7.51-10.65-3.32-14.32,27.95-31.29,51.81-69.37,79.85-100.15,7.59-8.33,14.13-12.49,17.88,1.86l-14.91,68.61Z" />
        <path class="cls-1" d="M539.79,321.27c48.76-4.38,55.87,71.3,6.71,75.72-49.9,4.48-56.42-71.26-6.71-75.72Z" />
        <path class="cls-1" d="M315.35,332.35c37.9-37.85,92.98,25.3,49.14,57.64-36.82,27.17-81.35-25.48-49.14-57.64Z" />
      </svg>
      <h1 id="mainTitle">Cine Power Planner</h1>
    </div>
    <button id="menuToggle" aria-label="Menu" aria-expanded="false">‚ò∞</button>
    <div class="feature-search">
      <div id="featureSearchContainer">
        <input type="search" id="featureSearch" list="featureList" placeholder="Search features or devices..." aria-label="Search features, devices and help" />
        <button id="featureSearchClear" type="button" aria-label="Clear search" title="Clear search" hidden>&times;</button>
      </div>
      <datalist id="featureList"></datalist>
    </div>
    <nav class="controls" aria-label="Main controls">
      <select id="languageSelect" aria-label="Select language">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="es">Espa√±ol</option>
        <option value="fr">Fran√ßais</option>
        <option value="it">Italiano</option>
      </select>
      <button id="darkModeToggle" title="Toggle dark mode" aria-label="Toggle dark mode" aria-pressed="false">üåô</button>
      <button id="pinkModeToggle" title="Toggle pink mode" aria-label="Toggle pink mode" aria-pressed="false">üê¥</button>
      <button id="settingsButton" aria-label="Settings" aria-haspopup="dialog" aria-controls="settingsDialog" title="Settings">‚öôÔ∏è</button>
      <button id="helpButton" aria-label="Help" aria-haspopup="dialog" aria-controls="helpDialog" title="Help (press ?, H, F1 or Ctrl+/)">?</button>
      <button id="reloadButton" title="Force reload" aria-label="Force reload">üîÑ</button>
    </nav>
  </header>

  <nav id="sideMenu" class="side-menu" aria-label="Sidebar navigation" hidden>
    <div class="sidebar-controls"></div>
    <ul>
      <li><a href="#setup-manager">Manage Project</a></li>
      <li><a href="#setup-config">Device Selection</a></li>
      <li><a href="#results">Results</a></li>
      <li><a href="#setupDiagram">Setup Diagram</a></li>
      <li><a href="#device-manager">Device Manager</a></li>
    </ul>
  </nav>
  <div id="menuOverlay" class="hidden"></div>

  <main id="mainContent" tabindex="-1">

  <p id="tagline">Plan your film rig and calculate power consumption &amp; battery life.</p>

  <section id="setup-manager">
    <h2 id="setupManageHeading">Manage Project</h2>
    <div class="form-row">
      <label for="setupSelect" id="savedSetupsLabel">Saved Projects:</label>
      <div class="select-wrapper">
        <select id="setupSelect" aria-labelledby="savedSetupsLabel">
          <option value="">-- New Project --</option>
        </select>
      </div>
      <button id="deleteSetupBtn" title="Delete selected project">
        <span class="btn-icon" aria-hidden="true">üóëÔ∏è</span>Delete
      </button>
    </div>
    <div class="form-row">
      <label for="setupName" id="setupNameLabel">Project Name:</label>
      <input type="text" id="setupName" placeholder="Project name" aria-labelledby="setupNameLabel" />
      <button id="saveSetupBtn">Save</button>
    </div>
    <button id="generateOverviewBtn">Generate Overview</button>
      <button id="shareSetupBtn">Share Project</button>
    <p id="shareLinkMessage" class="hidden" role="status" aria-live="polite"></p>
    <div class="form-row" id="sharedLinkRow">
      <label for="sharedLinkInput" id="sharedLinkLabel">Shared Project:</label>
      <input type="file" id="sharedLinkInput" accept=".json" aria-labelledby="sharedLinkLabel" />
      <button id="applySharedLinkBtn">Load</button>
    </div>
    <button id="clearSetupBtn">Clear Current Project</button>
  </section>

  <section id="setup-config">
    <h2 id="deviceSelectionHeading">Device Selection</h2>
      <div class="form-row">
        <label for="cameraSelect" id="cameraLabel">Camera:</label>
        <div class="select-wrapper">
          <select id="cameraSelect" aria-labelledby="cameraLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="monitorSelect" id="monitorLabel">Monitor:</label>
        <div class="select-wrapper">
          <select id="monitorSelect" aria-labelledby="monitorLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="videoSelect" id="videoLabel">Wireless Video:</label>
      <div class="select-wrapper">
          <select id="videoSelect" aria-labelledby="videoLabel"></select>
        </div>
      </div>

      <!-- Hidden cage select maintained for gear list synchronization -->
      <select id="cageSelect" hidden></select>

    <fieldset>
      <legend id="fizLegend">FIZ (Follow Focus) Systems</legend>
      <div class="form-row">
        <label for="motor1Select" id="fizMotorsLabel">FIZ Motors:</label>
        <div class="select-wrapper">
          <select id="motor1Select" aria-labelledby="fizMotorsLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="motor2Select"></label>
        <select id="motor2Select" aria-label="Additional FIZ motor"></select>
      </div>
      <div class="form-row">
        <label for="motor3Select"></label>
        <select id="motor3Select" aria-label="Additional FIZ motor"></select>
      </div>
      <div class="form-row">
        <label for="motor4Select"></label>
        <select id="motor4Select" aria-label="Additional FIZ motor"></select>
      </div>
      <div class="form-row">
        <label for="controller1Select" id="fizControllersLabel">FIZ Controllers:</label>
        <div class="select-wrapper">
          <select id="controller1Select" aria-labelledby="fizControllersLabel"></select>
        </div>
      </div>
      <div class="form-row">
        <label for="controller2Select"></label>
        <select id="controller2Select" aria-label="Additional FIZ controller"></select>
      </div>
      <div class="form-row">
        <label for="controller3Select"></label>
        <select id="controller3Select" aria-label="Additional FIZ controller"></select>
      </div>
      <div class="form-row">
        <label for="controller4Select"></label>
        <select id="controller4Select" aria-label="Additional FIZ controller"></select>
      </div>
      <div class="form-row">
        <label for="distanceSelect" id="distanceLabel">Distance Sensor:</label>
        <div class="select-wrapper">
          <select id="distanceSelect" aria-labelledby="distanceLabel"></select>
        </div>
      </div>
    </fieldset>

    <div class="form-row" id="batteryPlateRow">
      <label for="batteryPlateSelect" id="batteryPlateLabel">Battery Plate:</label>
      <select id="batteryPlateSelect" aria-labelledby="batteryPlateLabel"></select>
    </div>

      <div class="form-row">
        <label for="batterySelect" id="batteryLabel">Battery:</label>
        <div class="select-wrapper">
          <select id="batterySelect" aria-labelledby="batteryLabel"></select>
        </div>
      </div>
    <div class="form-row" id="batteryHotswapRow">
      <label for="batteryHotswapSelect" id="batteryHotswapLabel">Battery Hotswap:</label>
      <div class="select-wrapper">
        <select id="batteryHotswapSelect" aria-labelledby="batteryHotswapLabel"></select>
      </div>
    </div>
  </section>

  <section id="results">
    <h2 id="resultsHeading">Results</h2>
    <ul id="breakdownList">
      <!-- Device breakdown will be inserted here by script.js -->
    </ul>
    <div id="powerDiagram" class="hidden">
      <div id="powerDiagramBar" class="power-bar" role="img" aria-label="Power usage diagram"></div>
      <div id="powerDiagramLegend"></div>
      <p id="maxPowerText"></p>
    </div>
    <p><strong><span id="totalPowerLabel">Total Consumption:</span></strong> <span id="totalPower">0.0</span> W</p>
    <p><strong><span id="totalCurrent144Label">Total Current (at 14.4V):</span></strong> <span id="totalCurrent144">0.00</span> A</p>
    <p><strong><span id="totalCurrent12Label">Total Current (at 12V):</span></strong> <span id="totalCurrent12">0.00</span> A</p>
    <p><strong><span id="batteryLifeLabel">Runtime (estimated):</span></strong> <span id="batteryLife">0.00</span> <span id="batteryLifeUnit">hrs</span> <span id="runtimeAverageNote"></span></p>
    <p><strong><span id="batteryCountLabel">Batteries for 10h shoot (incl. spare):</span></strong> <span id="batteryCount">‚Äì</span></p>
    <p id="pinWarning" role="status" aria-live="polite" aria-describedby="batteryLabel"></p>
    <p id="dtapWarning" role="status" aria-live="polite" aria-describedby="batteryLabel"></p>
    <p id="hotswapWarning" role="status" aria-live="polite" aria-describedby="batteryHotswapLabel"></p>
    <div id="temperatureNote"></div>
    <button id="runtimeFeedbackBtn" type="button">Submit User Runtime Feedback</button>
    <div class="button-row">
      <button id="copySummaryBtn" type="button">Copy Summary</button>
      <button id="generateGearListBtn" type="button">Generate Gear List and Project Requirements</button>
    </div>
    <div id="feedbackTableContainer" class="hidden">
      <table id="userFeedbackTable" class="hidden"></table>
    </div>
  </section>

  <section id="setupDiagram">
    <h2 id="setupDiagramHeading">Project Diagram</h2>
    <p id="compatWarning" role="status" aria-live="polite"></p>
    <p id="diagramDesc" class="visually-hidden">Visual representation of connected devices.</p>
    <div id="diagramArea" role="img" aria-label="Project diagram" aria-describedby="diagramDesc">
      <div id="diagramPopup" class="diagram-popup"></div>
    </div>
    <div id="diagramLegend" class="diagram-legend"></div>
    <div class="diagram-controls">
      <button id="zoomOut" type="button" title="Zoom out" aria-label="Zoom out">-</button>
      <button id="zoomIn" type="button" title="Zoom in" aria-label="Zoom in">+</button>
      <button id="resetView" type="button"><span class="btn-icon" aria-hidden="true">üîÑ</span>Reset View</button>
      <button id="downloadDiagram" type="button">Download Diagram</button>
      <button id="gridSnapToggle" type="button" aria-pressed="false">Snap to Grid</button>
    </div>
    <p id="diagramHint" class="diagram-hint"></p>
  </section>

  <section id="projectRequirementsOutput" class="hidden"></section>

  <section id="gearListOutput" class="hidden"></section>

  <section id="batteryComparison" style="display: none;">
    <h2 id="batteryComparisonHeading">Battery Comparison</h2>
    <div id="batteryTableContainer">
      <table id="batteryTable"></table>
    </div>
  </section>

  <button id="toggleDeviceManager" aria-controls="device-manager" aria-expanded="false">Edit Device Data‚Ä¶</button>

  <section id="device-manager" class="hidden">
    <h2 id="deviceManagerHeading">Manage Device Database</h2>
    <div class="button-group"> <!-- Changed from form-row to a generic div for button grouping -->
<h3 id="addDeviceHeading">Add New Device</h3>
    <div class="form-row">
      <label for="newCategory" id="categoryLabel">Category:</label>
      <select id="newCategory"></select>
    </div>
    <div class="form-row" id="subcategoryField" hidden>
      <label for="newSubcategory" id="subcategoryLabel">Subcategory:</label>
      <select id="newSubcategory"></select>
    </div>
    <div class="form-row">
      <label for="newName" id="deviceNameLabel">Name:</label>
      <input type="text" id="newName" placeholder="Device name" aria-labelledby="deviceNameLabel" />
    </div>
    <div class="form-row" id="wattField">
      <label for="newWatt" id="consumptionLabel">Consumption (W):</label>
      <input type="number" id="newWatt" step="0.1" placeholder="e.g. 12.5" aria-labelledby="consumptionLabel" />
    </div>
    <div id="dynamicFields" hidden></div>
    <div id="cameraFields" class="hidden">
      <div class="camera-subsection">
        <h4 id="powerInputsHeading">Power Inputs</h4>
        <div class="form-row">
          <label for="cameraWatt" id="cameraWattLabel">Power Draw (W):</label>
          <input type="number" id="cameraWatt" step="0.1" aria-labelledby="cameraWattLabel" />
        </div>
        <div class="form-row">
          <label for="cameraVoltage" id="cameraVoltageLabel">Voltage Range:</label>
          <input type="text" id="cameraVoltage" aria-labelledby="cameraVoltageLabel" />
        </div>
        <div class="form-row">
          <label for="cameraPortType" id="cameraPortTypeLabel">Port Type:</label>
          <select id="cameraPortType" aria-labelledby="cameraPortTypeLabel"></select>
        </div>
        <div class="form-row">
          <label id="cameraPlatesLabel">Battery Plates:</label>
          <div id="batteryPlatesContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="powerDistributionHeading">Power Distribution</h4>
        <div class="form-row">
          <label id="cameraPowerDistLabel">Outputs:</label>
          <div id="powerDistContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="videoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <label id="cameraVideoOutputsLabel">Outputs:</label>
          <div id="videoOutputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="fizConnectorHeading">FIZ Connector</h4>
        <div class="form-row">
          <label id="cameraFIZConnectorLabel">Connectors:</label>
          <div id="fizConnectorContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="mediaHeading">Media</h4>
        <div class="form-row">
          <label id="cameraMediaLabel">Recording Media:</label>
          <div id="cameraMediaContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="viewfinderHeading">Viewfinder</h4>
        <div class="form-row">
          <label id="cameraViewfinderLabel">Viewfinders:</label>
          <div id="viewfinderContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="lensMountHeading">Lens Mount</h4>
        <div class="form-row">
          <label id="cameraLensMountLabel">Lens Mount:</label>
          <div id="lensMountContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="camera-subsection">
        <h4 id="timecodeHeading">Timecode</h4>
        <div class="form-row">
          <label id="cameraTimecodeLabel">Timecode:</label>
          <div id="timecodeContainer" class="flex-1"></div>
        </div>
      </div>
    </div>
    <div id="monitorFields" class="hidden">
      <div class="monitor-subsection">
        <h4 id="monitorDetailsHeading">Monitor Details</h4>
        <div class="form-row">
          <label for="monitorScreenSize" id="monitorScreenSizeLabel">Screen Size (in):</label>
          <input type="number" id="monitorScreenSize" step="0.1" aria-labelledby="monitorScreenSizeLabel" />
        </div>
        <div class="form-row">
          <label for="monitorBrightness" id="monitorBrightnessLabel">Brightness (nits):</label>
          <input type="number" id="monitorBrightness" step="1" aria-labelledby="monitorBrightnessLabel" />
        </div>
      </div>
      <div class="monitor-subsection">
        <h4 id="monitorPowerHeading">Power Input</h4>
        <div class="form-row">
          <label for="monitorWatt" id="monitorWattLabel">Power Draw (W):</label>
          <input type="number" id="monitorWatt" step="0.1" aria-labelledby="monitorWattLabel" />
        </div>
        <div class="form-row">
          <label for="monitorVoltage" id="monitorVoltageLabel">Voltage Range:</label>
          <input type="text" id="monitorVoltage" aria-labelledby="monitorVoltageLabel" />
        </div>
        <div class="form-row">
          <label for="monitorPortType" id="monitorPortTypeLabel">Port Type:</label>
          <select id="monitorPortType" aria-labelledby="monitorPortTypeLabel"></select>
        </div>
      </div>
      <div class="monitor-subsection">
        <h4 id="monitorVideoInputsHeading">Video Inputs</h4>
        <div class="form-row">
          <label id="monitorVideoInputsLabel">Inputs:</label>
          <div id="monitorVideoInputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="monitor-subsection">
        <h4 id="monitorVideoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <label id="monitorVideoOutputsLabel">Outputs:</label>
          <div id="monitorVideoOutputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="form-row">
        <label for="monitorWirelessTx" id="monitorWirelessTxLabel">Wireless TX:</label>
        <input type="checkbox" id="monitorWirelessTx" aria-labelledby="monitorWirelessTxLabel" />
      </div>
      <div class="form-row">
        <label for="monitorLatency" id="monitorLatencyLabel">Latency:</label>
        <input type="text" id="monitorLatency" aria-labelledby="monitorLatencyLabel" />
      </div>
      <div class="form-row">
        <label for="monitorAudioOutput" id="monitorAudioOutputLabel">Audio Output:</label>
        <input type="text" id="monitorAudioOutput" aria-labelledby="monitorAudioOutputLabel" />
      </div>
    </div>
    <div id="viewfinderFields" class="hidden">
      <div class="viewfinder-subsection">
        <h4 id="viewfinderDetailsHeading">Viewfinder Details</h4>
        <div class="form-row">
          <label for="viewfinderScreenSize" id="viewfinderScreenSizeLabel">Screen Size (in):</label>
          <input type="number" id="viewfinderScreenSize" step="0.1" aria-labelledby="viewfinderScreenSizeLabel" />
        </div>
        <div class="form-row">
          <label for="viewfinderBrightness" id="viewfinderBrightnessLabel">Brightness (nits):</label>
          <input type="number" id="viewfinderBrightness" step="1" aria-labelledby="viewfinderBrightnessLabel" />
        </div>
      </div>
      <div class="viewfinder-subsection">
        <h4 id="viewfinderPowerHeading">Power Input</h4>
        <div class="form-row">
          <label for="viewfinderWatt" id="viewfinderWattLabel">Power Draw (W):</label>
          <input type="number" id="viewfinderWatt" step="0.1" aria-labelledby="viewfinderWattLabel" />
        </div>
        <div class="form-row">
          <label for="viewfinderVoltage" id="viewfinderVoltageLabel">Voltage Range:</label>
          <input type="text" id="viewfinderVoltage" aria-labelledby="viewfinderVoltageLabel" />
        </div>
        <div class="form-row">
          <label for="viewfinderPortType" id="viewfinderPortTypeLabel">Port Type:</label>
          <select id="viewfinderPortType" aria-labelledby="viewfinderPortTypeLabel"></select>
        </div>
      </div>
      <div class="viewfinder-subsection">
        <h4 id="viewfinderVideoInputsHeading">Video Inputs</h4>
        <div class="form-row">
          <label id="viewfinderVideoInputsLabel">Inputs:</label>
          <div id="viewfinderVideoInputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="viewfinder-subsection">
        <h4 id="viewfinderVideoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <label id="viewfinderVideoOutputsLabel">Outputs:</label>
          <div id="viewfinderVideoOutputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="form-row">
        <label for="viewfinderWirelessTx" id="viewfinderWirelessTxLabel">Wireless TX:</label>
        <input type="checkbox" id="viewfinderWirelessTx" aria-labelledby="viewfinderWirelessTxLabel" />
      </div>
      <div class="form-row">
        <label for="viewfinderLatency" id="viewfinderLatencyLabel">Latency:</label>
        <input type="text" id="viewfinderLatency" aria-labelledby="viewfinderLatencyLabel" />
      </div>
    </div>
    <div id="videoFields" class="hidden">
      <div class="form-row">
        <label for="videoPower" id="videoPowerInputLabel">Power Input:</label>
        <input type="text" id="videoPower" aria-labelledby="videoPowerInputLabel" />
      </div>
      <div class="video-subsection">
        <h4 id="videoVideoInputsHeading">Video Inputs</h4>
        <div class="form-row">
          <label id="videoVideoInputsLabel">Inputs:</label>
          <div id="videoVideoInputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="video-subsection">
        <h4 id="videoVideoOutputsHeading">Video Outputs</h4>
        <div class="form-row">
          <label id="videoVideoOutputsLabel">Outputs:</label>
          <div id="videoVideoOutputsContainer" class="flex-1"></div>
        </div>
      </div>
      <div class="form-row">
        <label for="videoFrequency" id="videoFrequencyLabel">Frequency:</label>
        <input type="text" id="videoFrequency" aria-labelledby="videoFrequencyLabel" />
      </div>
      <div class="form-row">
        <label for="videoLatency" id="videoLatencyLabel">Latency:</label>
        <input type="text" id="videoLatency" aria-labelledby="videoLatencyLabel" />
      </div>
    </div>
    <div id="motorFields" class="hidden">
      <div class="form-row">
        <label for="motorConnector" id="motorConnectorLabel">Connector:</label>
        <select id="motorConnector" aria-labelledby="motorConnectorLabel"></select>
      </div>
      <div class="form-row">
        <label for="motorInternal" id="motorInternalLabel">Internal Controller:</label>
        <input type="checkbox" id="motorInternal" aria-labelledby="motorInternalLabel" />
      </div>
      <div class="form-row">
        <label for="motorTorque" id="motorTorqueLabel">Torque (Nm):</label>
        <input type="number" id="motorTorque" step="0.1" aria-labelledby="motorTorqueLabel" />
      </div>
      <div class="form-row">
        <label for="motorGearTypes" id="motorGearLabel">Gear Types:</label>
        <input type="text" id="motorGearTypes" aria-labelledby="motorGearLabel" />
      </div>
      <div class="form-row">
        <label for="motorNotes" id="motorNotesLabel">Notes:</label>
        <input type="text" id="motorNotes" aria-labelledby="motorNotesLabel" />
      </div>
    </div>
    <div id="controllerFields" class="hidden">
      <div class="form-row">
        <label for="controllerConnector" id="controllerConnectorLabel">Connector:</label>
        <select id="controllerConnector" aria-labelledby="controllerConnectorLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerPower" id="controllerPowerLabel">Power Source:</label>
        <select id="controllerPower" aria-labelledby="controllerPowerLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerBattery" id="controllerBatteryLabel">Battery Type:</label>
        <select id="controllerBattery" aria-labelledby="controllerBatteryLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerConnectivity" id="controllerConnectivityLabel">Connectivity:</label>
        <select id="controllerConnectivity" aria-labelledby="controllerConnectivityLabel"></select>
      </div>
      <div class="form-row">
        <label for="controllerNotes" id="controllerNotesLabel">Notes:</label>
        <input type="text" id="controllerNotes" aria-labelledby="controllerNotesLabel" />
      </div>
    </div>
    <div id="distanceFields" class="hidden">
      <div class="form-row">
        <label for="distanceConnection" id="distanceConnectionLabel">Connection:</label>
        <select id="distanceConnection" aria-labelledby="distanceConnectionLabel"></select>
      </div>
      <div class="form-row">
        <label for="distanceMethod" id="distanceMethodLabel">Method:</label>
        <select id="distanceMethod" aria-labelledby="distanceMethodLabel"></select>
      </div>
      <div class="form-row">
        <label for="distanceRange" id="distanceRangeLabel">Range:</label>
        <input type="text" id="distanceRange" aria-labelledby="distanceRangeLabel" />
      </div>
      <div class="form-row">
        <label for="distanceAccuracy" id="distanceAccuracyLabel">Accuracy:</label>
        <input type="text" id="distanceAccuracy" aria-labelledby="distanceAccuracyLabel" />
      </div>
      <div class="form-row">
        <label for="distanceOutput" id="distanceOutputLabel">Display:</label>
        <select id="distanceOutput" aria-labelledby="distanceOutputLabel"></select>
      </div>
      <div class="form-row">
        <label for="distanceNotes" id="distanceNotesLabel">Notes:</label>
        <input type="text" id="distanceNotes" aria-labelledby="distanceNotesLabel" />
      </div>
    </div>
    <div id="batteryFields" class="hidden">
      <div class="form-row">
        <label for="newCapacity" id="capacityLabel">Capacity (Wh):</label>
        <input type="number" id="newCapacity" step="0.1" placeholder="e.g. 98" aria-labelledby="capacityLabel" />
      </div>
      <div class="form-row">
        <label for="newPinA" id="pinLabel">Max Pin A:</label>
        <input type="number" id="newPinA" step="0.1" placeholder="e.g. 10" aria-labelledby="pinLabel" />
      </div>
      <div class="form-row">
        <label for="newDtapA" id="dtapLabel">Max D-Tap A:</label>
        <input type="number" id="newDtapA" step="0.1" placeholder="e.g. 5" aria-labelledby="dtapLabel" />
      </div>
    </div>
    <button id="addDeviceBtn">Add</button>
    <button id="cancelEditBtn" class="hidden">Cancel</button>
      <button id="exportDataBtn">Export Database</button>
      <button id="importDataBtn">Import Database</button>
      <input type="file" id="importFileInput" accept=".json" class="hidden" />
      <button id="exportAndRevertBtn">Export and Revert to default Database</button>
    </div>
    <textarea id="exportOutput" class="hidden" readonly></textarea>

    <h3 id="existingDevicesHeading">Existing Devices</h3>
    <div class="device-list-container">
      <div class="device-category">
        <h4 id="category_cameras">Cameras</h4>
        <input type="search" id="cameraListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="cameraList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_viewfinders">Viewfinders</h4>
        <input type="search" id="viewfinderListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="viewfinderList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_monitors">Monitors</h4>
        <input type="search" id="monitorListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="monitorList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_video">Wireless Video</h4>
        <input type="search" id="videoListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="videoList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_wirelessReceivers">Wireless Receivers</h4>
        <input type="search" id="wirelessReceiverListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="wirelessReceiverList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_fiz_motors">FIZ Motors</h4>
        <input type="search" id="motorListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="motorList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_fiz_controllers">FIZ Controllers</h4>
        <input type="search" id="controllerListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="controllerList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_fiz_distance">FIZ Distance</h4>
        <input type="search" id="distanceListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="distanceList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_batteries">Batteries</h4>
        <input type="search" id="batteryListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="batteryList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_batteryHotswaps">Battery Hotswaps</h4>
        <input type="search" id="batteryHotswapListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="batteryHotswapList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_accessory_batteries">Accessory Batteries</h4>
        <input type="search" id="accessoryBatteryListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="accessoryBatteryList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_cables">Cables</h4>
        <input type="search" id="cableListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="cableList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_cages">Cages</h4>
        <input type="search" id="cageListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="cageList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_camera_support">Camera Support</h4>
        <input type="search" id="cameraSupportListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="cameraSupportList" class="device-ul"></ul>
      </div>
      <div class="device-category">
        <h4 id="category_chargers">Chargers</h4>
        <input type="search" id="chargerListFilter" class="list-filter" placeholder="Filter..." aria-label="Filter" inputmode="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
        <ul id="chargerList" class="device-ul"></ul>
      </div>
    </div>
  </section>
  </main>

  <footer id="siteFooter">
    <a id="impressumLink" href="impressum.html">Impressum</a>
    |
    <a id="privacyLink" href="datenschutz.html">Datenschutz</a>
  </footer>

  <div id="settingsDialog" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" hidden>
    <div class="settings-content">
      <h2 id="settingsTitle">Settings</h2>
      <div class="form-row">
        <label for="settingsLanguage" id="settingsLanguageLabel">Language</label>
        <select id="settingsLanguage">
          <option value="en">English</option>
          <option value="de">Deutsch</option>
          <option value="es">Espa√±ol</option>
          <option value="fr">Fran√ßais</option>
          <option value="it">Italiano</option>
        </select>
      </div>
      <div class="form-row">
        <label for="settingsDarkMode" id="settingsDarkModeLabel">Dark mode</label>
        <input type="checkbox" id="settingsDarkMode" />
      </div>
      <div class="form-row">
        <label for="accentColorInput" id="accentColorLabel">Accent color</label>
        <input type="color" id="accentColorInput" value="#001589" />
      </div>
      <div class="form-row">
        <label for="settingsFontSize" id="settingsFontSizeLabel">Font size</label>
        <select id="settingsFontSize">
          <option value="14">14px</option>
          <option value="16">16px</option>
          <option value="18">18px</option>
        </select>
      </div>
      <div class="form-row">
        <label for="settingsFontFamily" id="settingsFontFamilyLabel">Font</label>
        <select id="settingsFontFamily">
          <option value="'Ubuntu', sans-serif">Ubuntu</option>
          <option value="'Arial', sans-serif">Arial</option>
          <option value="'Times New Roman', serif">Times New Roman</option>
          <option value="'Courier New', monospace">Courier New</option>
        </select>
      </div>
      <div class="form-row">
        <label for="settingsLogo" id="settingsLogoLabel">Logo (SVG)</label>
        <input type="file" id="settingsLogo" accept="image/svg+xml" />
      </div>
      <h3 id="accessibilityHeading">Accessibility</h3>
      <div class="form-row">
        <label for="settingsHighContrast" id="settingsHighContrastLabel">High contrast</label>
        <input type="checkbox" id="settingsHighContrast" />
      </div>
      <h3 id="backupHeading">Backup &amp; Restore</h3>
      <div class="button-row">
        <button id="backupSettings">Backup</button>
        <input type="file" id="restoreSettingsInput" accept="application/json" hidden />
        <button id="restoreSettings">Restore</button>
      </div>
      <h3 id="aboutHeading">About &amp; Support</h3>
      <p id="aboutVersion">Version 1.0.0</p>
      <p><a href="https://github.com" id="supportLink" target="_blank">Support</a></p>
      <div class="button-row">
      </div>
      <div class="button-row action-buttons">
        <button id="settingsSave">Save</button>
        <button id="settingsCancel">Cancel</button>
      </div>
    </div>
  </div>

  <div id="helpDialog" role="dialog" aria-modal="true" aria-labelledby="helpTitle" tabindex="-1" hidden>
    <div class="help-content">
      <button id="closeHelp">Close</button>
      <h2 id="helpTitle">How to use</h2>
      <div id="helpSearchContainer">
        <input type="text" id="helpSearch" placeholder="Search help topics..." aria-label="Search help topics" />
        <button id="helpSearchClear" type="button" aria-label="Clear search" title="Clear search" hidden>&times;</button>
      </div>
      <button id="hoverHelpButton" type="button">Hover for help</button>
      <p id="helpNoResults" aria-live="polite" hidden>No results found.</p>

      <div id="helpSections">
        <section data-help-section id="featuresOverview">
          <h3><span class="help-icon" aria-hidden="true">‚ú®</span>Cine Power Planner at a Glance</h3>
          <p>The planner brings together power maths, crew logistics and deliverables so you can prep a production end-to-end without leaving the browser.</p>
          <ul>
            <li><strong>Plan smarter rigs:</strong> combine cameras, monitoring, FIZ, plates, hotswaps and accessory batteries to see live power draw, runtime estimates and safety warnings. Optional battery comparisons rank every compatible pack.</li>
            <li><strong>Turn selections into documents:</strong> save multiple projects, reopen them instantly and generate printable overviews, a categorized gear list and a downloadable project diagram.</li>
            <li><strong>Capture production context:</strong> project requirements store schedules, crew contact details, imaging specs, scenario icons and monitoring notes so every export carries the same background info.</li>
            <li><strong>Refine with real-world data:</strong> user runtime feedback and the weighting dashboard fold measured runtimes into the estimate while showing exactly how each report influences the average.</li>
            <li><strong>Personalise the workspace:</strong> switch languages, toggle dark, pink or high-contrast themes, pick an accent colour, font family and font size, upload a custom logo for PDFs and work fully offline.</li>
            <li><strong>Stay in control of data:</strong> edit the device database with schema-guided forms, star favourites to pin them to the top of dropdowns, back up or restore your entire workspace and use Force reload to refresh cached files without losing saved projects.</li>
          </ul>
        </section>
        <section data-help-section id="gettingStarted">
          <h3><span class="help-icon" aria-hidden="true">üöÄ</span>Getting Started Workflow</h3>
          <ol>
            <li><strong>Name your project.</strong> Start with the default ‚ÄúNew Project‚Äù entry or pick a saved setup, then fill in <em>Project Name</em> so quick-save (Enter or Ctrl+S/‚åòS) becomes available.</li>
            <li><strong>Choose the core devices.</strong> Pick a camera and monitor, then add wireless video and FIZ gear as needed. Every dropdown supports type-to-filter search and stars to pin favourite options.</li>
            <li><strong>Round out the rig.</strong> Attach distance sensors, plates, batteries, hotswap units and accessory batteries. Camera-specific plate choices automatically unlock compatible battery families.</li>
            <li><strong>Review the results.</strong> Select a battery to populate power draw, runtime, battery counts, safety warnings and the optional comparison table. Use <em>Copy Summary</em> to share the figures in chat or email.</li>
            <li><strong>Add context and save.</strong> Open <em>Project Requirements</em> to record schedules, crew, imaging specs and rigging scenarios, then click <em>Save</em>. Your selections, requirements, gear list, feedback and custom devices all travel together in the project file.</li>
            <li><strong>Double-check outputs.</strong> Glance at the project diagram for connector conflicts, review the gear list filters and generate the printable overview before handing the build to other departments.</li>
          </ol>
          <p><strong>Pro tip:</strong> auto backups fire every ten minutes, so if you experiment with alternate builds you can always revert by loading the latest <em>auto-backup</em> entry from the Saved Projects dropdown.</p>
        </section>
        <section data-help-section id="managingSetups">
          <h3><span class="help-icon" aria-hidden="true">üóÇÔ∏è</span>Managing Projects &amp; Backups</h3>
          <ul>
            <li><strong>Save</strong> stores the current configuration locally. The button enables once a project name is entered and supports Enter or Ctrl+S/‚åòS shortcuts.</li>
            <li><strong>Share Project</strong> downloads a JSON bundle containing device picks, requirements, gear lists, runtime feedback, favourites and custom database entries. Keep a copy before loading a teammate‚Äôs file‚Äîauto backups run every ten minutes and appear at the bottom of the Saved Projects list if you need to roll back.</li>
            <li><strong>Shared Project ‚Üí Load</strong> restores a bundle you received from a teammate. Use <strong>Delete</strong> to remove obsolete saves or <strong>Clear Current Project</strong> to reset only the active workspace.</li>
            <li><strong>Generate Overview</strong> produces a printable PDF-style summary complete with your uploaded logo, scenario icons and requirement details.</li>
            <li><strong>Copy Summary</strong> grabs the current power breakdown and battery notes for quick reports or call sheets.</li>
            <li>Visit <strong>Settings ‚Üí Backup</strong> to export or restore the entire workspace, including preferences and device edits. All data lives in your browser‚Äîuse your site data controls if you ever need a full wipe.</li>
            <li>The <strong>Force reload</strong> (üîÑ) button clears cached files and reloads the latest version without touching saved projects.</li>
          </ul>
        </section>
        <section data-help-section id="collaborationWorkflows">
          <h3><span class="help-icon" aria-hidden="true">ü§ù</span>Collaboration &amp; On-Set Workflow</h3>
          <ol>
            <li><strong>Pre-production:</strong> build a master project, fill in requirements and save it under a descriptive name. Use <em>Share Project</em> to hand the JSON bundle to other departments so everyone starts from the same baseline.</li>
            <li><strong>Department hand-off:</strong> assistants load the bundle via <em>Shared Project ‚Üí Load</em>, tweak device picks or monitoring setups for their tasks and save new versions (e.g. ‚ÄúDay 1 ‚Äì Steadicam‚Äù). The original remains untouched.</li>
            <li><strong>On set:</strong> focus pullers submit runtime feedback as batteries cycle. Their entries update the runtime average for the whole team and appear in the weighting dashboard immediately.</li>
            <li><strong>Deliverables:</strong> at wrap, generate the overview PDF and gear list so production receives the latest requirements, crew notes and accessory breakdowns alongside power estimates.</li>
            <li><strong>Archival:</strong> export a workspace backup after major shoots to capture device edits, preferences and stored feedback. The JSON can be imported on new machines to recreate the environment in minutes.</li>
          </ol>
          <p>Combining project saves with runtime feedback and backups lets multiple crew members collaborate without ever overwriting local work‚Äîthe app merges contributions as long as everyone saves and exports regularly.</p>
        </section>
        <section data-help-section id="projectRequirementsHelp">
          <h3><span class="help-icon" aria-hidden="true">üóíÔ∏è</span>Project Requirements</h3>
          <p>Capture every detail that influences rigging, paperwork and communication. Everything you enter travels with each save, flows into printable overviews, enriches the gear list generator and reappears when teammates import a shared project.</p>
          <ul>
            <li><strong>Production basics &amp; contacts:</strong> log production companies, rental houses, DoPs and upload logos so exported PDFs are already branded. Crew entries store names, roles, email addresses and notes so the call list is always current.</li>
            <li><strong>Imaging setup &amp; deliverables:</strong> select delivery and recording resolutions, sensor modes, codecs, aspect ratios and base frame rates. The dropdowns react to the camera you chose, so unavailable formats never appear.</li>
            <li><strong>Lenses &amp; accessories:</strong> pick lens sets, matte boxes, filters and handle options. Duplicate buttons create quick variations (e.g. a hero and backup lens kit) without wiping the original data.</li>
            <li><strong>Scenarios &amp; movement:</strong> choose required scenarios to surface rig-specific packs in the gear list. The summary panel on the right renders matching icons and nudges linked dropdowns (for example, Dolly days auto-add recommended monitors to the distribution list).</li>
            <li><strong>Monitoring &amp; control:</strong> configure viewfinder settings, monitoring layouts, user button mappings and wireless video distribution so the camera department, village and client monitors are all accounted for.</li>
            <li><strong>Tripod &amp; support:</strong> selecting Tripod reveals extra preferences for head brand, bowl size, support type and spreaders. Remove the scenario to hide the section and clear unused values automatically.</li>
          </ul>
          <p>The form is divided into focused blocks so you can log context as you build:</p>
          <dl class="help-field-guide">
            <dt>Crew &amp; scheduling</dt>
            <dd>Use the <strong>+</strong> buttons beside Crew, Prep Days and Shooting Days to add as many rows as needed. Each row remembers labels and dates, and can be re-ordered with the drag handles that appear on focus.</dd>
            <dt>Camera body metadata</dt>
            <dd>Delivery, recording, sensor mode, codec and base frame-rate selectors pull real options from the selected camera. Changing the camera resets only incompatible fields so you retain what still applies.</dd>
            <dt>Rigging logic</dt>
            <dd>The scenario picker feeds the diagram and gear list while also unlocking conditional sections (Easyrig sizing, slider bowl selection, tripod configuration). Icon summaries double-check that speciality days are covered.</dd>
            <dt>Monitoring presets</dt>
            <dd>Monitoring configuration and frame guide choices sync with the gear list. Selecting certain options (like Viewfinder and Onboard) reveals nested choices for brightness, overlays and preferred accessories.</dd>
            <dt>Saved state</dt>
            <dd>All fields persist with each project file, backups and shared bundles. Importing another team‚Äôs JSON merges their requirements without overwriting your local presets.</dd>
          </dl>
          <p>Use the <em>Edit Project Requirements</em> button beside generated outputs to jump straight back to the form, tweak a single field and regenerate documents without rebuilding from scratch.</p>
        </section>
        <section data-help-section id="gearListHelp">
          <h3><span class="help-icon" aria-hidden="true">üìã</span>Gear List Generator</h3>
          <p>The generator expands your selections into a production-ready packing list that stays synchronised with the project.</p>
          <ul>
            <li>Click <strong>Generate Gear List and Project Requirements</strong> in the results panel to compile a categorized table that merges devices, project requirements and scenario rules.</li>
            <li>The builder works step-by-step:
              <ol>
                <li>Clone the selected devices so accessories and scenario logic can apply without changing the originals.</li>
                <li>Add default power leads, cages, brackets and media defined in the device schema.</li>
                <li>Apply scenario packs (Handheld + Easyrig, Vehicle, Gimbal, Outdoor, Steadicam, etc.) to ensure supporting gear travels with the rig.</li>
                <li>Merge contributions from the <em>Project Requirements</em> form‚Äîcrew, schedules, matte box choices, monitoring notes and tripod preferences become dedicated sections.</li>
                <li>Generate slugs (manufacturer + model) to merge duplicates and sum their quantities automatically.</li>
                <li>Group rows into Camera, Lens, Power, Monitoring, Accessories and Consumables, sort alphabetically and attach weight/dimension tooltips for reference.</li>
              </ol>
            </li>
            <li>Lens selections contribute front diameters, rod spacing, minimum focus, supports and compatibility warnings.</li>
            <li>Battery rows mirror the calculator‚Äôs counts and note when a hotswap plate is added to stay within safe draw limits.</li>
            <li>Monitoring preferences create tailored bundles for Director, DoP, Focus Puller, Client and Video Village roles, complete with matched transmitters and cabling.</li>
            <li>Use <strong>Save Gear List</strong> to keep the current output with the project, <strong>Export</strong>/<strong>Import</strong> to share JSON copies and <strong>Delete</strong> to return to the generator view.</li>
            <li>Adjust dropdowns directly in the generated list to pick exact monitor SKUs, slider bowls, Easyrig sizes, tape colours and cage variants. Every change stores itself with the active project and is included when you export or share.</li>
            <li>Filter packs expose checkbox grids for each strength and a separate size selector so you can pre-bake multiple ND, pol or diffusion values into one list without duplicating items manually.</li>
            <li>The action bar at the bottom stays available even when scrolling; use it to quickly version deliverables (for example, one list for camera department and another for rentals) before saving under different project names.</li>
          </ul>
          <p>Whenever you reopen a saved project the planner restores the last generated gear list automatically, including any per-item selections you made. Generate a fresh list at any time to rebuild it with new device choices or updated requirements.</p>
        </section>
        <section data-help-section id="powerCalculator">
          <h3><span class="help-icon" aria-hidden="true">‚ö°</span>Power &amp; Runtime Results</h3>
          <ul>
            <li>The breakdown list shows every device‚Äôs contribution‚Äîhover to reveal connector summaries and weighting info.</li>
            <li><strong>Total Consumption</strong>, <strong>Total Current</strong> at 14.4‚ÄØV (or 33.6‚ÄØV for B‚ÄëMount) and 12‚ÄØV (21.6‚ÄØV for B‚ÄëMount) update instantly when you change selections.</li>
            <li><strong>Runtime</strong> displays the weighted average plus a note indicating whether measured data or manufacturer specs are driving the estimate.</li>
            <li><strong>Batteries for a 10‚ÄØh shoot</strong> calculates minimum quantities plus a spare so you can plan charging rotations.</li>
            <li>Warnings flag when main pins, D‚ÄëTaps or selected hotswap units exceed safe output. When available, the planner suggests switching plates or enabling hotswap.</li>
            <li>The optional <strong>Battery Comparison</strong> table ranks every compatible pack by estimated runtime for side-by-side planning.</li>
            <li><strong>Temperature notes</strong> remind you to adjust expectations in extreme weather, and the <strong>Copy Summary</strong> button exports the numbers as formatted text.</li>
            <li>The stacked <strong>Power Diagram</strong> appears once a battery is chosen. Segments are colour-coded by device, a vertical line marks the safe output for the plate and the caption beneath summarises the available wattage.</li>
            <li>Pin, D‚ÄëTap and hotswap alerts display precise draw figures so you know whether to redistribute loads, introduce a hotswap plate or select a battery with higher continuous current.</li>
            <li>The runtime label shows how many user submissions are folded into the average once at least three feedback entries exist. Remove outliers from the weighting table to recalc in real time.</li>
            <li>Battery Comparison hides itself automatically when only one compatible pack exists‚Äîchange plates, enable hotswap or switch mounts to refresh the recommendation list.</li>
          </ul>
        </section>
        <section data-help-section id="calculationDetails">
          <h3><span class="help-icon" aria-hidden="true">üßÆ</span>How Calculations Work</h3>
          <ul>
            <li>Device power draw in watts is summed to form total consumption.</li>
            <li>Current draw divides that wattage by the relevant system voltage (14.4‚ÄØV/12‚ÄØV for V‚ÄëMount, 33.6‚ÄØV/21.6‚ÄØV for B‚ÄëMount).</li>
            <li>Battery runtime = capacity (Wh) √∑ total consumption. Values are rounded to two decimals for clarity.</li>
            <li>User runtime feedback entries are normalised before averaging:
              <ul>
                <li>Temperature weighting scales from √ó1 at 25‚ÄØ¬∞C up to √ó2 at ‚àí20‚ÄØ¬∞C.</li>
                <li>Resolution, frame rate, codec, Wi‚ÄëFi usage and monitor brightness adjust each report to reflect load differences.</li>
                <li>The final weight tracks how much power each matching device contributes so similar builds have the loudest voice.</li>
              </ul>
            </li>
            <li>The weighting dashboard underneath the results orders submissions by influence and displays each entry‚Äôs share percentage.</li>
            <li>If no feedback is available the planner falls back to manufacturer specifications.</li>
          </ul>
        </section>
        <section data-help-section id="runtimeFeedbackHelp">
          <h3><span class="help-icon" aria-hidden="true">üìù</span>User Runtime Feedback</h3>
          <ul>
            <li>Use <strong>Submit User Runtime Feedback</strong> to log measured runtimes directly from set. Existing selections pre-fill camera, monitor, wireless video and battery fields.</li>
            <li>Record contextual data‚Äîlocation, temperature, charging behaviour, lens, controllers, monitor brightness and Wi‚ÄëFi status‚Äîto make comparisons meaningful.</li>
            <li>Entries stay in your browser, influence the runtime average automatically and can be exported with the project bundle.</li>
            <li>The weighting dashboard reveals how your submission impacts the estimate so you can validate anomalies quickly.</li>
            <li>Select <strong>Use Current Location</strong> to capture GPS co-ordinates when the browser allows it; the app stores the location with the feedback but hides it from the visible table for privacy.</li>
            <li>You need at least three entries for the weighted average to take over from manufacturer specs. Remove outliers with the <em>Delete</em> button next to each row to re-run the calculation.</li>
            <li>All feedback syncs with project saves, shared bundles and workspace backups, so multiple focus pullers can contribute data throughout a shoot without overwriting one another.</li>
          </ul>
        </section>
        <section data-help-section id="setupDiagramHelp">
          <h3><span class="help-icon" aria-hidden="true">üó∫Ô∏è</span>Project Diagram</h3>
          <ul>
            <li>Visualises power and video connections with icons for cameras, batteries, monitors, controllers and sensors. Scenario icons highlight special rigging requirements.</li>
            <li>Drag nodes to rearrange, drag empty space to pan and use +/‚àí to zoom. <strong>Snap to Grid</strong> locks items to tidy spacing.</li>
            <li><strong>Reset View</strong> recentres and resizes the diagram; <strong>Download Diagram</strong> exports SVG or JPG versions for decks.</li>
            <li>Hover or tap devices to see connector popovers. Incompatible FIZ ecosystems trigger warnings above the diagram.</li>
          </ul>
        </section>
        <section data-help-section id="deviceEditorHelp">
          <h3><span class="help-icon" aria-hidden="true">üõ†Ô∏è</span>Device Database Editor</h3>
          <ul>
            <li>Open <em>Edit Device Data‚Ä¶</em> to add, duplicate or remove entries. Forms adapt to each category, revealing only relevant schema fields.</li>
            <li>Import JSON files from teammates, export your own library and use <em>Export and Revert</em> to restore the shipped defaults.</li>
            <li>Changes apply instantly across selectors, gear lists and diagrams. Remember to include custom devices when sharing project backups.</li>
            <li>Camera entries expose dedicated panels for power inputs, battery plates, power distribution, video outputs, FIZ connectors and media so compatibility checks stay accurate.</li>
            <li>Battery, hotswap and accessory forms accept decimal watt draws; the planner uses those values for runtime maths and to flag overloads in the results view.</li>
            <li>All edits live inside your browser storage. Export before clearing cache or moving machines so your curated database and favourites survive.</li>
          </ul>
        </section>
        <section data-help-section id="deviceCategoriesHelp">
          <h3><span class="help-icon" aria-hidden="true">üìÅ</span>Device Categories</h3>
          <p>Main selectors support:</p>
          <ul>
            <li><strong>Camera</strong></li>
            <li><strong>Monitor</strong> (optional)</li>
            <li><strong>Wireless Video</strong> (optional)</li>
            <li><strong>FIZ Motors</strong> (up to four)</li>
            <li><strong>FIZ Controllers</strong> (up to four)</li>
            <li><strong>Distance Sensor</strong> (optional)</li>
            <li><strong>Battery Plate</strong> (only when the camera accepts swappable plates)</li>
            <li><strong>Main Battery</strong> (V‚ÄëMount, B‚ÄëMount or Gold Mount)</li>
            <li><strong>Battery Hotswap</strong> and <strong>Accessory Battery</strong> selectors when relevant hardware is available.</li>
          </ul>
          <p>Additional accessory categories surface in the gear list so rigging, charging and cabling stay accounted for.</p>
        </section>
        <section data-help-section id="deviceSelectionDeepDive">
          <h3><span class="help-icon" aria-hidden="true">üîå</span>Device Selection &amp; Compatibility</h3>
          <ul>
            <li>Camera choices drive the rest of the interface‚Äîbattery plates, hotswap units and compatible batteries only appear when the body supports them, and selecting a new camera revalidates FIZ connectors, viewfinder options and media.</li>
            <li>Mixing brands across motors, controllers and distance sensors triggers compatibility checks. Warnings appear above the project diagram when a controller is missing, an ARRI ecosystem is incomplete or DJI gear is combined with third-party motors.</li>
            <li>The calculator keeps a hidden cage selector in sync to match accessories in the gear list. Changing the cage from the generated list updates the main dropdown and recalculates totals.</li>
            <li>Battery, hotswap and accessory battery dropdowns automatically filter to mounts and voltage ranges supported by the camera and plate, preventing incompatible combinations from ever showing up.</li>
            <li>Scenario selections (e.g. Dolly, Tripod, Outdoor) can auto-suggest monitors and accessories through the requirements form, ensuring downstream sections stay aligned with the plan.</li>
          </ul>
        </section>
        <section data-help-section id="searchFiltering">
          <h3><span class="help-icon" aria-hidden="true">üîç</span>Search, Shortcuts &amp; Favourites</h3>
          <ul>
            <li>Type in any dropdown or list filter to narrow results instantly. Press <kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> (‚åò+F on macOS) to focus the nearest search box.</li>
            <li>The global search field across the top understands feature headings, device names and help topics; press Enter to jump directly to the result and √ó to clear.</li>
            <li>Star frequently used devices to pin them to the top of their dropdowns‚Äîfavourites are saved per project and included in backups.</li>
            <li>The help dialog search filters sections and FAQ entries live, highlighting matches with <code>&lt;mark&gt;</code> tags for quick scanning.</li>
            <li>While filtering a dropdown, press <kbd>Backspace</kbd> to broaden the results or <kbd>Escape</kbd> to reset the search entirely. The same inline filtering works in the Project Requirements form.</li>
          </ul>
        </section>
        <section data-help-section id="helpDialogHelp">
          <h3><span class="help-icon" aria-hidden="true">‚ùì</span>Using the Help Dialog</h3>
          <ul>
            <li>Open help with the <strong>?</strong> button or press <kbd>?</kbd>, <kbd>H</kbd>, <kbd>F1</kbd> or <kbd>Ctrl</kbd>+<kbd>/</kbd> even while typing elsewhere.</li>
            <li>The search field filters content as you type; clear it with the √ó button or press Esc to close the dialog entirely.</li>
            <li>Select <strong>Hover for help</strong> to turn the cursor into a tooltip explorer that reads the interface‚Äôs contextual descriptions.</li>
            <li>Press <kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> inside the dialog to refocus the search box at any time.</li>
          </ul>
        </section>
        <section data-help-section id="hoverHelp">
          <h3><span class="help-icon" aria-hidden="true">üñ±Ô∏è</span>Hover Help Mode</h3>
          <ul>
            <li>After enabling <strong>Hover for help</strong>, move the pointer across buttons, dropdowns and headers to read their <code>data-help</code> descriptions.</li>
            <li>Click anywhere or press <kbd>Escape</kbd> to exit hover mode. The dialog closes automatically once hover help starts so you can explore the UI.</li>
          </ul>
        </section>
        <section data-help-section id="languageHelp">
          <h3><span class="help-icon" aria-hidden="true">üåê</span>Language &amp; Localisation</h3>
          <ul>
            <li>Switch languages from the toolbar or inside Settings. The planner remembers your preference for future visits.</li>
            <li>Saved projects keep their labels no matter which language is active, so you can collaborate across teams.</li>
          </ul>
        </section>
        <section data-help-section id="appearanceHelp">
          <h3><span class="help-icon" aria-hidden="true">üé®</span>Appearance &amp; Accessibility</h3>
          <ul>
            <li>Toggle <strong>Dark Mode</strong> from the moon button (or press <kbd>D</kbd>) and <strong>Pink Mode</strong> from the unicorn button (or press <kbd>P</kbd>). Both settings persist between sessions.</li>
            <li>Enable <strong>High Contrast</strong> in Settings for bolder colours and thicker outlines that meet accessibility guidelines.</li>
            <li>Use the accent colour picker plus font size and font family selectors to match studio style guides or accessibility requirements.</li>
            <li>Upload an SVG logo in Settings to brand printable overviews and backup exports.</li>
          </ul>
        </section>
        <section data-help-section id="shortcuts">
          <h3><span class="help-icon" aria-hidden="true">‚å®Ô∏è</span>Keyboard Shortcuts</h3>
          <ul>
            <li><kbd>?</kbd>, <kbd>H</kbd>, <kbd>F1</kbd> or <kbd>Ctrl</kbd>+<kbd>/</kbd> ‚Äì toggle the help dialog</li>
            <li><kbd>Escape</kbd> ‚Äì close dialogs or exit hover-help mode</li>
            <li><kbd>D</kbd> ‚Äì toggle dark mode</li>
            <li><kbd>P</kbd> ‚Äì toggle pink mode</li>
            <li><kbd>Enter</kbd> or <kbd>Ctrl</kbd>+<kbd>S</kbd> (‚åò+S) ‚Äì save the current project</li>
            <li><kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> (‚åò+F) ‚Äì focus the nearest search field</li>
          </ul>
        </section>
        <section data-help-section id="offlineHelp">
          <h3><span class="help-icon" aria-hidden="true">üì°</span>Offline, Updates &amp; Installation</h3>
          <ul>
            <li>The service worker caches everything after your first visit so the planner runs entirely offline. An indicator at the top lets you know when you reconnect.</li>
            <li>Click <strong>Force reload</strong> to refresh cached files while keeping saved projects, requirements and custom devices intact.</li>
            <li>Install the app as a Progressive Web App from Chrome/Edge (Install icon), Android (Add to Home Screen) or iOS/iPadOS Safari (Share ‚Üí Add to Home Screen). Installed copies update automatically.</li>
          </ul>
        </section>
        <section data-help-section id="faq">
          <h3><span class="help-icon" aria-hidden="true">‚ùì</span>FAQ</h3>
          <details class="faq-item">
            <summary>How do I save or duplicate a project?</summary>
            <p>Enter a name, click <em>Save</em> and the project joins the Saved Projects dropdown. Use the dropdown to duplicate: load an existing project, rename it and press <em>Save</em> again.</p>
          </details>
          <details class="faq-item">
            <summary>What is included when I share or back up a project?</summary>
            <p><em>Share Project</em> downloads a JSON bundle containing device selections, favourites, project requirements, runtime feedback, gear lists and any custom devices. Workspace backups from Settings include preferences and appearance tweaks as well.</p>
          </details>
          <details class="faq-item">
            <summary>How can I brand the printable overview?</summary>
            <p>Open Settings, upload an SVG logo and generate the overview. The logo is cached locally and embedded into PDFs, project bundles and backups.</p>
          </details>
          <details class="faq-item">
            <summary>How is battery runtime calculated?</summary>
            <p>The planner divides battery capacity (Wh) by total consumption and then blends in weighted runtime feedback when available. Temperature, codec and frame rate differences are normalised before averaging.</p>
          </details>
          <details class="faq-item">
            <summary>What do the warning colours mean?</summary>
            <p>Orange messages indicate the configuration is nearing the safe output for a battery pin or D-Tap. Red warnings mean the draw exceeds the rating and you should switch batteries, add a hotswap or reduce the load.</p>
          </details>
          <details class="faq-item">
            <summary>Can I work offline?</summary>
            <p>Yes. Once cached, the planner, device database and fonts all run offline. Saved data lives in your browser until you clear it.</p>
          </details>
          <details class="faq-item">
            <summary>Where are my projects stored?</summary>
            <p>Everything is stored locally in <code>localStorage</code>. Export backups regularly if you plan to clear browser data or move to a new machine.</p>
          </details>
          <details class="faq-item">
            <summary>How do I reset the device database?</summary>
            <p>Open the device editor, click <em>Export and Revert</em> to back up your changes and reload the defaults from the shipped files.</p>
          </details>
          <details class="faq-item">
            <summary>How do I update to the latest device packs?</summary>
            <p>Use <strong>Force reload</strong> to refresh cached files. You can then import updated device JSON packs or merge them in the editor.</p>
          </details>
          <details class="faq-item">
            <summary>How do I print or share a summary?</summary>
            <p>Save the project, click <em>Generate Overview</em> for a printable PDF-style sheet, or use <em>Copy Summary</em> to paste the numbers into email, chat or call sheets.</p>
          </details>
          <details class="faq-item">
            <summary>Can I change fonts or accent colours?</summary>
            <p>Yes. Head to Settings to pick a new accent colour, font family and font size. These preferences are stored locally and included in workspace backups.</p>
          </details>
          <details class="faq-item">
            <summary>How do I install the planner like an app?</summary>
            <p>In Chrome or Edge click the install icon in the address bar. On Android choose <em>Add to Home Screen</em>. On iOS/iPadOS open Safari, tap <em>Share</em> and select <em>Add to Home Screen</em>.</p>
          </details>
          <details class="faq-item">
            <summary>Why doesn‚Äôt the battery comparison table show up?</summary>
            <p>The table appears only when the selected camera and plate have multiple compatible batteries. Pick a different plate, enable a hotswap unit or switch mounts to reveal more candidates.</p>
          </details>
          <details class="faq-item">
            <summary>How are runtime feedback weights applied?</summary>
            <p>Once at least three feedback entries exist for the same setup, the planner normalises each report for temperature, resolution, codec, Wi‚ÄëFi usage and monitor brightness. Higher-power builds contribute a larger share of the average, and you can remove outliers from the weighting table at any time.</p>
          </details>
          <details class="faq-item">
            <summary>Where can I find auto backups?</summary>
            <p>Auto backups are saved every ten minutes and named <code>auto-backup-YYYY-MM-DD-HH-MM</code>. They live at the bottom of the Saved Projects dropdown so you can reload an earlier state if an import or experiment goes wrong.</p>
          </details>
        </section>
      </div>
</div>
      </div>
    </div>
  </div>

  <dialog id="projectDialog" aria-labelledby="projectDialogHeading">
    <form id="projectForm" method="dialog">
      <h3 id="projectDialogHeading">Project Requirements</h3>
      <div class="form-row">
        <label for="projectName">Project Name:</label>
        <input type="text" id="projectName" name="projectName" />
      </div>
      <div class="form-row">
        <label for="productionCompany">Production Company:</label>
        <input type="text" id="productionCompany" name="productionCompany" />
      </div>
      <div class="form-row">
        <label for="rentalHouse">Rental House:</label>
        <input type="text" id="rentalHouse" name="rentalHouse" />
      </div>
      <h3 id="crewHeading">Crew</h3>
      <div class="form-row" id="crewListRow">
        <div id="crewContainer"></div>
        <button type="button" id="addPersonBtn">+</button>
      </div>
      <div class="form-row" id="prepListRow">
        <label id="prepLabel">Prep Days:</label>
        <div id="prepContainer"></div>
        <button type="button" id="addPrepBtn">+</button>
      </div>
      <div class="form-row" id="shootListRow">
        <label id="shootLabel">Shooting Days:</label>
        <div id="shootContainer"></div>
        <button type="button" id="addShootBtn">+</button>
      </div>
      <div class="form-row">
        <label for="deliveryResolution">Delivery Resolution:</label>
        <select id="deliveryResolution" name="deliveryResolution">
          <option value=""></option>
          <option value="720p">720p</option>
          <option value="1080p">1080p</option>
          <option value="1440p">1440p</option>
          <option value="2K">2K</option>
          <option value="2.7K">2.7K</option>
          <option value="3.2K UHD">3.2K UHD</option>
          <option value="4K">4K</option>
          <option value="4.5K">4.5K</option>
          <option value="5K">5K</option>
          <option value="5.7K">5.7K</option>
          <option value="6K">6K</option>
          <option value="7K">7K</option>
          <option value="8K">8K</option>
          <option value="9K">9K</option>
          <option value="12K">12K</option>
          <option value="16K">16K</option>
        </select>
      </div>
      <div class="form-row">
        <label for="recordingResolution">Recording Resolution:</label>
        <select id="recordingResolution" name="recordingResolution"></select>
      </div>
      <div class="form-row">
        <label for="sensorMode">Sensor Mode:</label>
        <select id="sensorMode" name="sensorMode"></select>
      </div>
      <div class="form-row">
        <label for="aspectRatio">Aspect Ratio:</label>
        <select id="aspectRatio" name="aspectRatio" multiple size="20">
          <option value="16:9">16:9</option>
          <option value="17:9">17:9</option>
          <option value="4:3">4:3</option>
          <option value="1.85:1">1.85:1</option>
          <option value="2.39:1">2.39:1</option>
          <option value="1:1">1:1</option>
          <option value="3:2">3:2</option>
          <option value="2:1">2:1</option>
          <option value="9:16">9:16</option>
          <option value="21:9">21:9</option>
          <option value="1.37:1">1.37:1</option>
          <option value="1.66:1">1.66:1</option>
          <option value="1.90:1">1.90:1</option>
          <option value="2.20:1">2.20:1</option>
          <option value="2.35:1">2.35:1</option>
          <option value="2.40:1">2.40:1</option>
          <option value="2.76:1">2.76:1</option>
          <option value="4:5">4:5</option>
          <option value="5:4">5:4</option>
          <option value="16:10">16:10</option>
        </select>
      </div>
      <div class="form-row">
        <label for="codec">Codec:</label>
        <select id="codec" name="codec"></select>
      </div>
      <div class="form-row">
        <label for="baseFrameRate">Base Frame Rate:</label>
        <select id="baseFrameRate" name="baseFrameRate">
          <option value=""></option>
          <option value="23.976">23.976</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="29.97">29.97</option>
          <option value="30">30</option>
          <option value="50">50</option>
          <option value="59.94">59.94</option>
          <option value="60">60</option>
        </select>
      </div>
      <h3 id="lensesHeading">Lenses</h3>
      <div class="form-row">
        <label for="lenses" id="lensesLabel">Lenses:</label>
        <div class="select-wrapper">
          <select id="lenses" name="lenses" multiple size="10" aria-labelledby="lensesLabel"></select>
        </div>
      </div>

      <h3 id="riggingHeading">Rigging</h3>
      <div class="form-row">
        <label for="requiredScenarios">What required scenarios do we have for this shoot?</label>
        <select id="requiredScenarios" name="requiredScenarios" multiple size="25">
          <option value="Indoor">Indoor</option>
          <option value="Outdoor">Outdoor</option>
          <option value="Studio">Studio</option>
          <option value="Tripod">Tripod</option>
          <option value="Handheld">Handheld</option>
          <option value="Easyrig">Easyrig</option>
          <option value="Cine Saddle">Cine Saddle</option>
          <option value="Steadybag">Steadybag</option>
          <option value="Dolly">Dolly</option>
          <option value="Slider">Slider</option>
          <option value="Steadicam">Steadicam</option>
          <option value="Gimbal">Gimbal</option>
          <option value="Trinity">Trinity</option>
          <option value="Rollcage">Rollcage</option>
          <option value="Car Mount">Car Mount</option>
          <option value="Jib">Jib</option>
          <option value="Undersling mode">Undersling mode</option>
          <option value="Crane">Crane</option>
          <option value="Remote Head">Remote Head</option>
          <option value="Extreme cold (snow)">Extreme cold (snow)</option>
          <option value="Extreme rain">Extreme rain</option>
          <option value="Extreme heat">Extreme heat</option>
          <option value="Rain Machine">Rain Machine</option>
          <option value="Slow Motion">Slow Motion</option>
          <option value="Battery Belt">Battery Belt</option>
        </select>
        <div id="requiredScenariosSummary" class="scenario-summary" aria-live="polite"></div>
      </div>
      <div class="form-row">
        <label for="cameraHandle">Camera Handle:</label>
        <select id="cameraHandle" name="cameraHandle" multiple size="3">
          <option value="Handle Extension">Handle Extension</option>
          <option value="L-Handle">L-Handle</option>
          <option value="Hand Grips">Hand Grips</option>
        </select>
      </div>
      <div class="form-row hidden" id="viewfinderExtensionRow">
        <label for="viewfinderExtension">Viewfinder Extension:</label>
        <select id="viewfinderExtension" name="viewfinderExtension">
          <option value="" selected>No</option>
          <option value="ARRI VEB-3 Viewfinder Extension Bracket">Yes</option>
        </select>
      </div>

      <input type="hidden" id="viewfinderEyeLeatherColor" name="viewfinderEyeLeatherColor" value="Red" />

      <h3 id="matteboxFilterHeading">Mattebox and Filter</h3>
      <div class="form-row">
        <label for="mattebox">Mattebox:</label>
        <select id="mattebox" name="mattebox">
          <option value="">-- Select --</option>
          <option value="Rod based">Rod based</option>
          <option value="Clamp On">Clamp On</option>
          <option value="Swing Away">Swing Away</option>
        </select>
      </div>
      <div class="form-row">
        <label for="filter">Filter:</label>
        <select id="filter" name="filter" multiple size="10"></select>
      </div>
      <div class="form-row" id="filterDetails"></div>

      <h3 id="monitoringHeading">Monitoring</h3>
      <div class="form-row">
        <label for="monitoringConfiguration">Camera Monitoring Configuration:</label>
        <select id="monitoringConfiguration" name="monitoringConfiguration">
          <option value="Viewfinder only">Viewfinder only</option>
          <option value="Viewfinder and Onboard">Viewfinder and Onboard</option>
          <option value="Onboard Only">Onboard Only</option>
        </select>
      </div>
      <div class="form-row hidden" id="viewfinderSettingsRow">
        <label for="viewfinderSettings">Viewfinder Settings:</label>
        <select id="viewfinderSettings" name="viewfinderSettings" multiple size="2">
          <option value="Viewfinder Clean Feed">Viewfinder Clean Feed</option>
          <option value="Surround View">Surround View</option>
        </select>
      </div>
      <div class="form-row">
        <label for="frameGuides">Frameguides:</label>
        <select id="frameGuides" name="frameGuides" multiple size="5">
          <option value="Frame Guide: Center Dot">Frame Guide: Center Dot</option>
          <option value="Frame Guides: Center Cross">Frame Guides: Center Cross</option>
          <option value="Frame Guide: Rule of Thirds">Frame Guide: Rule of Thirds</option>
          <option value="Frame Guide: User Box">Frame Guide: User Box</option>
          <option value="Frame Guide: 90% marker">Frame Guide: 90% marker</option>
        </select>
      </div>
      <div class="form-row">
        <label for="aspectMaskOpacity">Aspect Mask Opacity:</label>
        <select id="aspectMaskOpacity" name="aspectMaskOpacity" multiple size="5">
          <option value="Aspect Mask Opacity 100%">Aspect Mask Opacity 100%</option>
          <option value="AM Opacity 75%">AM Opacity 75%</option>
          <option value="AM Opacity 50%">AM Opacity 50%</option>
          <option value="AM Opacity 25%">AM Opacity 25%</option>
          <option value="AM Opacity 0%">AM Opacity 0%</option>
        </select>
      </div>
      <div class="form-row">
        <label for="videoDistribution">Video distribution:</label>
        <select id="videoDistribution" name="videoDistribution" multiple size="10">
          <option value="Director Monitor 7&quot; handheld">Director Monitor 7&quot; handheld</option>
          <option value="Gaffer Monitor 7&quot; handheld">Gaffer Monitor 7&quot; handheld</option>
          <option value="Director Monitor 15-21&quot;">Director Monitor 15-21&quot;</option>
          <option value="Combo Monitor 15-21&quot;">Combo Monitor 15-21&quot;</option>
          <option value="IOS Video">IOS Video</option>
          <option value="DoP Monitor 7&quot; handheld">DoP Monitor 7&quot; handheld</option>
          <option value="DoP Monitor 15-21&quot;">DoP Monitor 15-21&quot;</option>
        </select>
      </div>
      <h3 id="userButtonsHeading">User Buttons</h3>
      <div class="form-row">
        <label for="monitorUserButtons">Onboard Monitor User Buttons:</label>
        <select id="monitorUserButtons" name="monitorUserButtons" multiple></select>
      </div>
      <div class="form-row">
        <label for="cameraUserButtons">Camera User Buttons:</label>
        <select id="cameraUserButtons" name="cameraUserButtons" multiple></select>
      </div>
      <div class="form-row">
        <label for="viewfinderUserButtons">Viewfinder User Buttons:</label>
        <select id="viewfinderUserButtons" name="viewfinderUserButtons" multiple></select>
      </div>

      <h3 id="tripodPreferencesHeading" class="hidden">Tripod Preferences</h3>
      <div class="hidden" id="tripodPreferencesRow">
        <div class="form-row">
          <label for="tripodHeadBrand">Head Brand:</label>
          <select id="tripodHeadBrand" name="tripodHeadBrand">
            <option value=""></option>
            <option value="OConnor">O'Connor</option>
            <option value="Sachtler">Sachtler</option>
            <option value="other">other</option>
          </select>
        </div>
        <div class="form-row">
          <label for="tripodBowl">Bowl type:</label>
          <select id="tripodBowl" name="tripodBowl">
            <option value=""></option>
            <option value="75mm bowl">75mm bowl</option>
            <option value="100mm bowl">100mm bowl</option>
            <option value="150mm bowl">150mm bowl</option>
            <option value="Mitchell Mount">Mitchell Mount</option>
          </select>
        </div>
        <div class="form-row">
          <label for="tripodTypes">Tripod types:</label>
          <select id="tripodTypes" name="tripodTypes" multiple size="4">
            <option value="Standard Tripod">Standard Tripod</option>
            <option value="Baby Tripod">Baby Tripod</option>
            <option value="Frog Tripod">Frog Tripod</option>
            <option value="Hi-Head">Hi-Head</option>
          </select>
        </div>
        <div class="form-row">
          <label for="tripodSpreader">Spreader Preference:</label>
          <select id="tripodSpreader" name="tripodSpreader">
            <option value=""></option>
            <option value="Mid-Level Spreader">Mid-Level Spreader</option>
            <option value="Ground Spreader">Ground Spreader</option>
          </select>
        </div>
      </div>
      <menu>
        <button type="reset" id="projectCancel">Cancel</button>
        <button type="submit">OK</button>
      </menu>
    </form>
  </dialog>

  <dialog id="feedbackDialog" aria-labelledby="feedbackDialogHeading">
    <form id="feedbackForm" method="dialog">
      <h3 id="feedbackDialogHeading">User Runtime Feedback</h3>

      <fieldset>
        <legend>üìã Basic Info</legend>
        <div class="form-row"><label>User:<input type="text" id="fbUsername" name="fbUsername" required></label></div>
        <div class="form-row"><label>Date:<input type="date" id="fbDate" name="fbDate" required></label></div>
        <div class="form-row">
          <label>Location:<input type="text" id="fbLocation" name="fbLocation"></label>
          <button type="button" id="fbUseLocationBtn">Use Current Location</button>
        </div>
      </fieldset>

      <fieldset>
        <legend>üé• Camera Project</legend>
        <div class="form-row"><label>Camera:<input type="text" id="fbCamera" name="fbCamera" readonly></label></div>
        <div class="form-row"><label>Battery Plate:<input type="text" id="fbBatteryPlate" name="fbBatteryPlate" readonly></label></div>
        <div class="form-row"><label>Lens Mount:<input list="mountOptions" id="fbLensMount" name="fbLensMount"></label></div>
        <div class="form-row"><label>Res:<input list="resolutionOptions" id="fbResolution" name="fbResolution"></label></div>
        <div class="form-row"><label>Codec:<input list="codecOptions" id="fbCodec" name="fbCodec"></label></div>
        <div class="form-row"><label>FPS:<input list="framerateOptions" id="fbFramerate" name="fbFramerate"></label></div>
        <div class="form-row"><label>Camera WIFI:<select id="fbWifi" name="fbWifi"><option value="on">On</option><option value="off">Off</option></select></label></div>
        <div class="form-row"><label>Firmware:<input type="text" id="fbFirmware" name="fbFirmware"></label></div>
      </fieldset>

      <fieldset>
        <legend>üîã Power &amp; Accessories</legend>
        <div class="form-row"><label>Battery:<input type="text" id="fbBattery" name="fbBattery" readonly></label></div>
        <div class="form-row"><label>Battery Age:<input type="number" id="fbBatteryAge" name="fbBatteryAge"></label></div>
        <div class="form-row"><label>Wireless Video:<input type="text" id="fbWirelessVideo" name="fbWirelessVideo" readonly></label></div>
        <div class="form-row"><label>Monitor:<input type="text" id="fbMonitor" name="fbMonitor" readonly></label></div>
        <div class="form-row"><label>Monitor Brightness:<input type="text" id="fbMonitorBrightness" name="fbMonitorBrightness"></label></div>
        <div class="form-row"><label>Lens:<input type="text" id="fbLens" name="fbLens"></label></div>
        <div class="form-row"><label>Lens Data:<select id="fbLensData" name="fbLensData"><option value="">--</option><option value="on">On</option><option value="off">Off</option></select></label></div>
        <div class="form-row"><label>FIZ Controllers:<input type="text" id="fbControllers" name="fbControllers" readonly></label></div>
        <div class="form-row"><label>FIZ Motors:<input type="text" id="fbMotors" name="fbMotors" readonly></label></div>
        <div class="form-row"><label>FIZ Distance:<select id="fbDistance" name="fbDistance" disabled></select></label></div>
      </fieldset>

      <fieldset>
        <legend>üå°Ô∏è Environment</legend>
        <div class="form-row"><label>Temp (¬∞C):<select id="fbTemperature" name="fbTemperature"></select></label></div>
        <div class="form-row"><label>Charging:<select id="fbCharging" name="fbCharging"><option value="yes">Yes</option><option value="no">No</option></select></label></div>
        <div class="form-row"><label>Runtime (hrs):<input type="number" step="0.01" id="fbRuntime" name="fbRuntime" required></label></div>
        <div class="form-row"><label>Batteries Used per Day:<input type="number" id="fbBatteriesPerDay" name="fbBatteriesPerDay"></label></div>
      </fieldset>

      <div class="form-row button-row">
        <button type="submit" id="fbSubmit">Save &amp; Submit</button>
        <button type="button" id="fbCancel">Cancel</button>
      </div>
    </form>

    <datalist id="mountOptions">
      <option value="PL"></option>
      <option value="EF"></option>
      <option value="E"></option>
      <option value="MFT"></option>
      <option value="RF"></option>
    </datalist>
    <datalist id="resolutionOptions">
      <option value="1080p"></option>
      <option value="2K"></option>
      <option value="4K"></option>
      <option value="6K"></option>
      <option value="8K"></option>
    </datalist>
    <datalist id="codecOptions">
      <option value="ARRIRAW"></option>
      <option value="BRAW"></option>
      <option value="Canon RAW"></option>
      <option value="CinemaDNG"></option>
      <option value="R3D"></option>
      <option value="ProRes RAW"></option>
      <option value="ProRes"></option>
      <option value="DNxHD"></option>
      <option value="DNxHR"></option>
      <option value="DNxHQ"></option>
      <option value="XAVC-I"></option>
      <option value="XAVC-L"></option>
      <option value="XAVC-S"></option>
      <option value="XAVC HS"></option>
      <option value="H.264"></option>
      <option value="H.264 All-I"></option>
      <option value="H.265"></option>
      <option value="H.265 All-I"></option>
      <option value="AVC-Intra"></option>
      <option value="AVCHD"></option>
      <option value="HEVC"></option>
      <option value="X-OCN"></option>
    </datalist>
  <datalist id="framerateOptions">
      <option value="23.98"></option>
      <option value="24"></option>
      <option value="25"></option>
      <option value="30"></option>
      <option value="50"></option>
      <option value="60"></option>
      <option value="120"></option>
    </datalist>
  </dialog>
  <dialog id="overviewDialog"></dialog>
  <script src="globalthis-polyfill.js"></script>
  <script src="devices/index.js"></script>
  <script src="devices/cameras.js"></script>
  <script src="devices/monitors.js"></script>
  <script src="devices/video.js"></script>
  <script src="devices/fiz.js"></script>
  <script src="devices/batteries.js"></script>
  <script src="devices/batteryHotswaps.js"></script>
  <script src="devices/cages.js"></script>
  <script src="devices/gearList.js"></script>
  <script src="devices/wirelessReceivers.js"></script>
  <script src="storage.js"></script>
  <script src="translations.js"></script>
  <script src="lz-string.min.js"></script>
  <script src="script.js"></script>
  <script src="overview.js"></script>
</body>
</html>
