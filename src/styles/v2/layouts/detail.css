/*
 * Cine Power Planner V2 - Detail View Styles
 * ==========================================
 * Styles specific to the project detail view.
 */

/* =====================
 * VIEW HEADER WITH BACK
 * ===================== */
.view-header-with-back {
    display: flex;
    align-items: center;
    gap: var(--v2-space-md);
}

.v2-back-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--v2-space-xs);
    padding: var(--v2-space-sm) var(--v2-space-md);
    background: transparent;
    border: none;
    color: var(--v2-text-secondary);
    font-size: var(--v2-font-size-sm);
    cursor: pointer;
    border-radius: var(--v2-radius-md);
    transition: background-color var(--v2-transition-fast), color var(--v2-transition-fast);
}

.v2-back-btn:hover {
    background-color: var(--v2-surface-muted);
    color: var(--v2-text-primary);
}

.v2-back-btn svg {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.view-header-title {
    flex: 1;
    margin: 0;
    font-size: var(--v2-font-size-xl);
    font-weight: var(--v2-font-weight-semibold);
}

.v2-header-periods {
    display: flex;
    gap: var(--v2-space-sm);
    margin-right: var(--v2-space-lg);
    align-items: center;
}

.v2-header-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: var(--v2-radius-md);
    font-size: 13px;
    /* Smaller than title */
    font-weight: var(--v2-font-weight-medium);
    white-space: nowrap;
}

.period-icon {
    font-size: 12px;
    opacity: 0.9;
}

.v2-header-badge.prep {
    background: color-mix(in srgb, var(--v2-color-blue) 10%, transparent);
    color: var(--v2-color-blue);
    border: 1px solid color-mix(in srgb, var(--v2-color-blue) 20%, transparent);
}

.v2-header-badge.shoot {
    background: color-mix(in srgb, var(--v2-color-red) 10%, transparent);
    color: var(--v2-color-red);
    border: 1px solid color-mix(in srgb, var(--v2-color-red) 20%, transparent);
}

.v2-header-badge.return {
    background: color-mix(in srgb, var(--v2-text-secondary) 10%, transparent);
    color: var(--v2-text-secondary);
    border: 1px solid color-mix(in srgb, var(--v2-text-secondary) 20%, transparent);
}

/* =====================
 * PROJECT ACTIONS BAR
 * ===================== */
.v2-project-actions {
    display: flex;
    gap: var(--v2-space-sm);
    padding: var(--v2-space-sm) var(--v2-space-xl);
    background-color: var(--v2-surface-base);
    border-bottom: 1px solid var(--v2-border-muted);
}

.v2-action-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--v2-space-xs);
    padding: var(--v2-space-sm) var(--v2-space-md);
    background-color: var(--v2-surface-elevated);
    border: 1px solid var(--v2-border-default);
    border-radius: var(--v2-radius-md);
    color: var(--v2-text-primary);
    font-size: var(--v2-font-size-sm);
    font-weight: var(--v2-font-weight-medium);
    cursor: pointer;
    transition: background-color var(--v2-transition-fast),
        border-color var(--v2-transition-fast);
}

.v2-action-btn:hover {
    background-color: var(--v2-surface-muted);
    border-color: var(--v2-border-muted);
}

.v2-action-btn .btn-icon {
    font-size: 14px;
    line-height: 1;
}

/* =====================
 * DEVICE GRID
 * ===================== */
.v2-device-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--v2-space-lg);
    padding: var(--v2-space-md) 0;
}

.v2-device-card {
    /* Inherits styles from cards.css */
    display: flex;
    flex-direction: column;
    gap: var(--v2-space-sm);
}

.v2-card-wide {
    grid-column: span 2;
}

@media (max-width: 768px) {
    .v2-card-wide {
        grid-column: span 1;
    }
}

/* =====================
 * LEGACY SELECT STYLING - WRAPPER FIXES
 * ===================== */
/* Ensure the reparented select-wrapper handles the favorite button correctly */
.v2-select-container .select-wrapper {
    display: flex;
    align-items: center;
    width: 100%;
    gap: var(--v2-space-xs);
}

.v2-select-container .select-wrapper .v2-select {
    flex: 1;
    min-width: 0;
    /* Allow shrinking */
    width: 100%;
    /* Ensure it tries to fill space */
}

.v2-select-container .select-wrapper .favorite-toggle {
    flex-shrink: 0;
    position: static;
    margin: 0;
    background-color: transparent;
    border: 1px solid transparent;
}

.v2-select-container .select-wrapper .favorite-toggle:hover {
    background-color: var(--v2-surface-muted);
    color: var(--v2-brand-blue);
}

.v2-select-container .select-wrapper .favorite-toggle.favorited {
    color: var(--v2-brand-yellow, #f59e0b);
}

/* =====================
 * RESPONSIVE BEHAVIOR
 * ===================== */
@media (max-width: 768px) {
    .v2-header-periods {
        margin-right: var(--v2-space-md);
    }

    .v2-header-badge {
        padding: 3px 8px;
        font-size: 12px;
    }
}

@media (max-width: 600px) {
    .view-header-with-back {
        flex-wrap: wrap;
        gap: var(--v2-space-sm);
    }

    .v2-back-btn {
        padding: var(--v2-space-xs) var(--v2-space-sm);
    }

    .view-header-title {
        font-size: var(--v2-font-size-lg);
        flex-basis: 100%;
        order: 2;
    }

    .v2-header-periods {
        flex-basis: 100%;
        order: 3;
        margin-right: 0;
        justify-content: flex-start;
    }

    .v2-header-badge {
        padding: 2px 6px;
        font-size: 11px;
        gap: 4px;
    }

    .v2-project-actions {
        padding: var(--v2-space-sm) var(--v2-space-md);
        flex-wrap: wrap;
    }

    .v2-action-btn {
        flex: 1 1 auto;
        justify-content: center;
        min-width: 0;
    }
}

/* =====================
 * HEADER ACTIONS
 * ===================== */
.view-header-actions {
    display: flex;
    align-items: center;
    gap: var(--v2-space-sm);
    margin-left: auto;
    /* Push to right */
}

/* Hide labels on smaller screens or if space is tight */
@media (max-width: 1024px) {
    .view-header-actions .v2-btn-label {
        display: none;
    }

    .view-header-actions .v2-btn {
        padding: var(--v2-space-sm);
        flex-shrink: 0;
    }
    
    .view-header-actions .v2-btn svg {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
    }
}

@media (max-width: 600px) {
    .view-header-actions {
        margin-left: 0;
        width: 100%;
        justify-content: flex-end;
        /* Align right on new line */
        order: 4;
        /* Ensure it wraps to bottom if needed, or adjust based on flex order */
        margin-top: var(--v2-space-sm);
    }
}