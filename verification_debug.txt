npm warn invalid config cache=false set in command line options
npm warn invalid config Must be valid filesystem path

> cine-power-planner@1.0.53 test:jest
> node --max-old-space-size=3072 ./node_modules/jest/bin/jest.js --runInBand tests/unit/storage.test.js imports preferences stored under simple keys

  console.warn
    MOCK SET: __cineLoggingHistory = [{"id":"log-1768641491496-ln65i653","level":"info"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/modules/logging.js:1679:13)
      at persistHistorySafe (src/scripts/modules/logging.js:1887:3)
      at appendEntry (src/scripts/modules/logging.js:2658:5)
      at logInternal (src/scripts/modules/logging.js:2453:7)
      at Object.syncConsoleCaptureState (src/scripts/modules/logging.js:3882:1)
      at Object.require (src/scripts/modules/logging-resolver.js:2:1)
      at Object.require (src/scripts/storage.js:17:1)
      at Object.require (tests/unit/storage.test.js:124:5)

  console.warn
    Logging module registration deferred - queue unavailable.

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at warn (src/scripts/modules/logging.js:488:17)
      at Object.registerOrQueueModule (src/scripts/modules/logging.js:3929:20)
      at Object.require (src/scripts/modules/logging-resolver.js:2:1)
      at Object.require (src/scripts/storage.js:17:1)
      at Object.require (tests/unit/storage.test.js:124:5)

  console.log
    DEBUG: storage.js execution started

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.warn
    MOCK SET: __storage_test__ = 1

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5846:13)
      at verifyStorage (src/scripts/storage.js:5908:23)
      at Object.initializeSafeLocalStorage (src/scripts/storage.js:5940:28)
      at Object.require (tests/unit/storage.test.js:124:5)

  console.log
    DEBUG: storage.js: starting global export loop

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js execution finished

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.warn
    DEBUG: lzString type: object

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:153:9)

  console.warn
    DEBUG: lzString keys: [
      'compressToBase64',
      'decompressFromBase64',
      'compressToUTF16',
      'decompressFromUTF16',
      'compressToUint8Array',
      'decompressFromUint8Array',
      'compressToEncodedURIComponent',
      'decompressFromEncodedURIComponent',
      'compress',
      '_compress'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:155:11)

  console.warn
    DEBUG: lzString.compressToUTF16 type: function

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:156:11)

  console.log
    [MigrationService] Starting storage migration...

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    [MigrationService] No local storage data found. safe to skip.

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.warn
    MOCK SET: cine_storage_migrated_v2 = true

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at LocalStorageAdapter.setItem (src/scripts/modules/storage/drivers/LocalStorageAdapter.js:52:26)
      at setItem (src/scripts/modules/storage/StorageMigrationService.js:93:31)
      at StorageMigrationService.setSafely [as markAsMigrated] (src/scripts/modules/storage/StorageMigrationService.js:100:13)
      at StorageMigrationService.markAsMigrated [as runMigrationIfNeeded] (src/scripts/modules/storage/StorageMigrationService.js:36:28)
      at src/scripts/storage.js:290:28

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:396:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:396:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:401:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:402:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:411:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:417:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":{"c

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9433:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:418:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:418:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:418:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{"Alexa":{}}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:461:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":{"c

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9433:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:465:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{"Alexa":{}},"monitors":{},"video":{},"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:465:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{"Alexa":{}},"monitors":{},"video":{},"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:465:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{"Alexa":{}}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:482:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = {"createdAt":"2024-01-01T00:00:00.000Z","data":{"l

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:483:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = [{"createdAt":"2024-01-01T00:00:00.000Z","data":{"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5514:19)
      at tryStoreList (src/scripts/storage.js:5521:20)
      at createStorageMigrationBackup (src/scripts/storage.js:9433:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:488:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{"Alexa":{}},"monitors":{},"video":{},"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:488:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{"Alexa":{}},"monitors":{},"video":{},"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:488:20)

  console.warn
    MOCK SET: cinePowerPlanner_devices = {"cameras":{},"monitors":{}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:503:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:7445:17)
      at migrateKeyBetweenStorages (src/scripts/storage.js:7465:9)
      at migrateKeyInStorages (src/scripts/storage.js:7508:27)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:7507:12)
      at migrateLegacyStorageKeys (src/scripts/storage.js:7538:3)
      at applyLegacyStorageMigrations (src/scripts/storage.js:9418:3)
      at Object.loadDeviceData (tests/unit/storage.test.js:505:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":{"c

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9433:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:505:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:505:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:505:20)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"__cineStorageCompressed":true,"version":1,"algor

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:527:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"__cineStorageCompressed":true,"version":1,"algor

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:557:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:559:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:559:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"__cineStorageCompressed":true,"version":1,"algor

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:591:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"__cineStorageCompressed":true,"version":1,"algor

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:592:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":"ᯡࡑ

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:5239:3)
      at ensurePreWriteMigrationBackup (src/scripts/storage.js:9468:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:594:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:594:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:594:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":null,"monitors":[],"video":5,"viewfinde

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:644:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":{"c

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9433:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:645:12)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:645:12)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9434:5)
      at Object.loadDeviceData (tests/unit/storage.test.js:645:12)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = 5

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:649:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:654:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices__backup = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9469:3)
      at Object.saveDeviceData (tests/unit/storage.test.js:654:5)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {invalid-json

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:658:18)

  console.warn
    MOCK SET: cameraPowerPlanner_devices = {"cameras":{},"monitors":{},"video":{},"viewfinder

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:7912:23)
      at loadJSONFromStorage (src/scripts/storage.js:9420:22)
      at Object.loadDeviceData (tests/unit/storage.test.js:660:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = {"A":{"foo":1}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:682:18)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = [{"name":"A","foo":1},{"name":"B","bar":2}]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:688:18)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":[{"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9544:5)
      at Object.loadSetups (tests/unit/storage.test.js:689:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = {"A":{"name":"A","foo":1},"B":{"name":"B","bar":2}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:689:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__backup = {"A":{"name":"A","foo":1},"B":{"name":"B","bar":2}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:689:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = [{"name":"A","foo":1},{"name":"A","bar":2}]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:695:18)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":[{"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9544:5)
      at Object.loadSetups (tests/unit/storage.test.js:696:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = {"A":{"name":"A","foo":1},"A (2)":{"name":"A","bar

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:696:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__backup = {"A":{"name":"A","foo":1},"A (2)":{"name":"A","bar

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:696:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = [{"name":"A"},{"name":"a"},{"name":" A "}]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:701:18)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":[{"

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9544:5)
      at Object.loadSetups (tests/unit/storage.test.js:702:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = {"A":{"name":"A"},"a (2)":{"name":"a"},"A (3)":{"n

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:702:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__backup = {"A":{"name":"A"},"a (2)":{"name":"a"},"A (3)":{"n

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:702:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = 5

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:706:18)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = {"A":{"foo":1},"B":null,"C":["not-an-object"],"D":

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at Object.setItem (tests/unit/storage.test.js:728:18)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__legacyMigrationBackup = {"createdAt":"2026-01-17T09:18:11.496Z","data":{"A

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:5565:15)
      at tryStoreSerialized (src/scripts/storage.js:5587:26)
      at createStorageMigrationBackup (src/scripts/storage.js:9544:5)
      at Object.loadSetups (tests/unit/storage.test.js:729:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups = {"A":{"foo":1}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8463:17)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:729:12)

  console.warn
    MOCK SET: cameraPowerPlanner_setups__backup = {"A":{"foo":1}}

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at console.apply [as warn] (src/scripts/modules/base.js:92:26)
      at Object.warn (tests/unit/storage.test.js:11:15)
      at setItem (src/scripts/storage.js:8524:19)
      at tryStoreCandidate (src/scripts/storage.js:8540:13)
      at attemptBackupWrite (src/scripts/storage.js:8617:26)
      at saveJSONToStorage (src/scripts/storage.js:9545:5)
      at Object.loadSetups (tests/unit/storage.test.js:729:12)

  console.log
    DEBUG: storage.js execution started

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js: starting global export loop

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js execution finished

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    [MigrationService] Starting storage migration...

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    [MigrationService] No local storage data found. safe to skip.

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js execution started

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js: starting global export loop

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js execution finished

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    Error saving automatic gear rule backups to localStorage: Error [QuotaExceededError]: quota exceeded
        at Object.<anonymous> (/Users/lucazanner/Documents/GitHub/cine-power-planner/tests/unit/storage.test.js:2060:24)
        at Promise.finally.completed (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:275:16)
        at runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:343:7)

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:8488:17)
      at saveJSONToStorage (src/scripts/storage.js:15206:3)
      at saveAutoGearBackups (tests/unit/storage.test.js:2090:31)
      at Object.isolateModules (tests/unit/storage.test.js:2064:12)

  console.log
    [MigrationService] Starting storage migration...

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    [UserContext] Generated new User UUID: 1584931d-cf86-45fe-87f3-ecd7936506d2

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    [UserContext] Generated new Device UUID: 1f241755-0427-4d81-8e98-06086bf1a770

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    [UserContext] Session UUID: 3cc48626-911e-4995-b619-ff892e7f70ca

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js execution started

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js: starting global export loop

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: storage.js execution finished

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    Error saving automatic gear rule backups to localStorage: Error [QuotaExceededError]: quota exceeded
        at Object.<anonymous> (/Users/lucazanner/Documents/GitHub/cine-power-planner/tests/unit/storage.test.js:2153:24)
        at Promise.finally.completed (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:275:16)
        at runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:343:7)

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:8488:17)
      at saveJSONToStorage (src/scripts/storage.js:15206:3)
      at saveAutoGearBackups (tests/unit/storage.test.js:2183:31)
      at Object.isolateModules (tests/unit/storage.test.js:2157:12)

  console.log
    [MigrationService] Starting storage migration...

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [ 'preferences' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2612:7)

  console.error
    DEBUG: importAllData CALLED [
      'devices',
      'setups',
      'session',
      'feedback',
      'project',
      'favorites',
      'autoGearRules',
      'autoGearBackups',
      'autoGearSeeded',
      'autoGearPresets',
      'autoGearActivePresetId',
      'autoGearAutoPresetId',
      'autoGearBackupRetention',
      'autoGearShowBackups',
      'preferences',
      'customLogo',
      'customFonts'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2679:5)

  console.error
    DEBUG: importAllData CALLED [
      'autoGearRules',
      'autoGearBackups',
      'autoGearPresets',
      'autoGearMonitorDefaults',
      'autoGearActivePresetId',
      'autoGearAutoPresetId',
      'autoGearBackupRetention',
      'autoGearShowBackups'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2778:5)

  console.error
    DEBUG: importAllData CALLED [ 'preferences' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2805:5)

  console.error
    DEBUG: importAllData CALLED [
      'cameraPowerPlanner_devices',
      'cameraPowerPlanner_setups__backup',
      'cinePowerPlanner_session',
      'cameraPowerPlanner_feedback',
      'cameraPowerPlanner_favorites',
      'cameraPowerPlanner_project__legacyMigrationBackup',
      'cinePowerPlanner_autoGearRules',
      'cameraPowerPlanner_autoGearBackups',
      'cameraPowerPlanner_autoGearSeeded__backup',
      'cameraPowerPlanner_autoGearPresets',
      'cameraPowerPlanner_autoGearActivePreset__backup',
      'cinePowerPlanner_autoGearAutoPreset',
      'cameraPowerPlanner_autoGearShowBackups',
      'cameraPowerPlanner_schemaCache',
      'customLogo__backup',
      'cinePowerPlanner_customFonts',
      'darkMode__backup',
      'highContrast',
      'language',
      'iosPwaHelpShown',
      'cameraPowerPlanner_temperatureUnit'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2853:5)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_project__legacyMigrationBackup true

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry FOUND migration backup cameraPowerPlanner_project__legacyMigrationBackup

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate pinkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate reduceMotion__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate relaxedSpacing__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate showAutoBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate accentColor__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontSize__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontFamily__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cineRentalPrintSections__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [
      'devices',
      'setups',
      'session',
      'feedback',
      'project',
      'favorites',
      'autoGearRules',
      'autoGearBackups',
      'autoGearPresets',
      'schemaCache',
      'customFonts',
      'customLogo',
      'autoGearSeeded',
      'autoGearActivePresetId',
      'autoGearAutoPresetId',
      'autoGearShowBackups',
      'preferences'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at importAllData (src/scripts/storage.js:17685:7)
      at Object.importAllData (tests/unit/storage.test.js:2853:5)

  console.error
    DEBUG: importAllData CALLED [
      'cameraPowerPlanner_autoGearRules__legacyMigrationBackup',
      'cameraPowerPlanner_autoGearBackups__legacyMigrationBackup'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2922:5)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearRules__legacyMigrationBackup true

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry FOUND migration backup cameraPowerPlanner_autoGearRules__legacyMigrationBackup

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: extractSnapshotStoredValue parse error SyntaxError: Unexpected token 'ᯡ', "ᯡࡑ䂼઀䌡㥠ጢԂØ″"... is not valid JSON
        at JSON.parse (<anonymous>)
        at parse (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17272:38)
        at extractSnapshotStoredValue (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17310:15)
        at parseSnapshotJSONValue (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17487:19)
        at assignJSONValue (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17505:3)
        at convertStorageSnapshotToData (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17683:23)
        at Object.importAllData (/Users/lucazanner/Documents/GitHub/cine-power-planner/tests/unit/storage.test.js:2922:5)
        at Promise.finally.completed (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:275:16)
        at runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:343:7)

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackups__legacyMigrationBackup true

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry FOUND migration backup cameraPowerPlanner_autoGearBackups__legacyMigrationBackup

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: extractSnapshotStoredValue parse error SyntaxError: Unexpected token 'N', "N4IgxgTgpg"... is not valid JSON
        at JSON.parse (<anonymous>)
        at parse (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17272:38)
        at extractSnapshotStoredValue (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17310:15)
        at parseSnapshotJSONValue (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17487:19)
        at assignJSONValue (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17506:3)
        at convertStorageSnapshotToData (/Users/lucazanner/Documents/GitHub/cine-power-planner/src/scripts/storage.js:17683:23)
        at Object.importAllData (/Users/lucazanner/Documents/GitHub/cine-power-planner/tests/unit/storage.test.js:2922:5)
        at Promise.finally.completed (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at _runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:275:16)
        at runTest (/Users/lucazanner/Documents/GitHub/cine-power-planner/node_modules/jest-runner/build/index.js:343:7)

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate customLogo__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate darkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate pinkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate highContrast__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate reduceMotion__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate relaxedSpacing__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate showAutoBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate accentColor__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontSize__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontFamily__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate language__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate iosPwaHelpShown__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cineRentalPrintSections__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearRules', 'autoGearBackups' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at importAllData (src/scripts/storage.js:17685:7)
      at Object.importAllData (tests/unit/storage.test.js:2922:5)

  console.error
    DEBUG: importAllData CALLED [ 'devices' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2932:5)

  console.error
    DEBUG: importAllData CALLED [ 'session' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2943:5)

  console.error
    DEBUG: importAllData CALLED [ 'projects' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:2956:5)

  console.error
    DEBUG: importAllData CALLED [ 'projects', 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3012:5)

  console.error
    DEBUG: importAllData CALLED [ 'projects' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3025:5)

  console.error
    DEBUG: importAllData CALLED [ 'projects', 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3042:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3057:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3063:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3080:5)

  console.error
    DEBUG: importAllData CALLED [ 'data' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3093:5)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate customLogo__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate darkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate pinkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate highContrast__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate reduceMotion__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate relaxedSpacing__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate showAutoBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate accentColor__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontSize__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontFamily__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate language__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate iosPwaHelpShown__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cineRentalPrintSections__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [ 'plannerData' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3105:5)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate customLogo__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate darkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate pinkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate highContrast__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate reduceMotion__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate relaxedSpacing__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate showAutoBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate accentColor__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontSize__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontFamily__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate language__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate iosPwaHelpShown__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cineRentalPrintSections__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3119:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3143:5)

  console.error
    DEBUG: importAllData CALLED [ 'gearList' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3168:5)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate customLogo__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate darkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate pinkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate highContrast__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate reduceMotion__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate relaxedSpacing__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate showAutoBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate accentColor__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontSize__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontFamily__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate language__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate iosPwaHelpShown__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cineRentalPrintSections__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearSeeded', 'autoGearShowBackups' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3234:5)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearSeeded', 'autoGearShowBackups' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3246:5)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearRules', 'autoGearBackups' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3268:5)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearRules', 'autoGearBackups', 'autoGearPresets' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3288:5)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearRules', 'autoGearBackups', 'autoGearPresets' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3316:5)

  console.error
    DEBUG: importAllData CALLED [ 'autoGearActivePresetId' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3328:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3333:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3349:5)

  console.error
    DEBUG: importAllData CALLED [ 'project' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3382:5)

  console.error
    DEBUG: importAllData CALLED [ 'fullBackupHistory' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3454:5)

  console.error
    DEBUG: importAllData CALLED [ 'fullBackupHistory' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3474:5)

  console.error
    DEBUG: importAllData CALLED [ 'fullBackups' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3496:5)

  console.error
    DEBUG: importAllData CALLED [ 'fullBackupHistory' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3509:5)

  console.error
    DEBUG: importAllData CALLED [
      'devices',
      'setups',
      'session',
      'feedback',
      'project',
      'favorites',
      'contacts',
      'ownGear',
      'autoGearRules',
      'autoGearBackups',
      'autoGearSeeded',
      'autoGearPresets',
      'autoGearMonitorDefaults',
      'autoGearActivePresetId',
      'autoGearAutoPresetId',
      'autoGearShowBackups',
      'autoGearBackupRetention',
      'fullBackupHistory',
      'preferences'
    ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3713:7)

  console.error
    DEBUG: importAllData CALLED [ 'darkMode', 'accentColor', 'customLogo' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at Object.importAllData (tests/unit/storage.test.js:3746:5)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_devices__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_setups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_session__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_feedback__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_project__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_favorites__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_contacts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_ownGear__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_userProfile__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_documentationTracker__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearRules__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearPresets__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearMonitorDefaults__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearBackupRetention__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_schemaCache__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_customFonts__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearSeeded__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearActivePreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearAutoPreset__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_autoGearShowBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate pinkMode__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate highContrast__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate reduceMotion__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate relaxedSpacing__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate showAutoBackups__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontSize__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate fontFamily__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate language__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate iosPwaHelpShown__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cineRentalPrintSections__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)
          at Array.forEach (<anonymous>)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_temperatureUnit__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_focusScale__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_cameraColors__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cameraPowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.log
    DEBUG: readSnapshotEntry checking migration candidate cinePowerPlanner_mountVoltages__legacyMigrationBackup false

      at Proxy.apply (src/scripts/modules/base.js:92:26)

  console.error
    DEBUG: importAllData CALLED [ 'customLogo', 'preferences' ]

      61 |       return undefined;
      62 |     }
    > 63 |     return originalFn(...args);
         |            ^
      64 |   };
      65 | };
      66 |

      at console.<anonymous> (tests/setup/jest.setup.cjs:63:12)
      at Proxy.apply (src/scripts/modules/base.js:92:26)
      at error (src/scripts/storage.js:17670:11)
      at importAllData (src/scripts/storage.js:17685:7)
      at Object.importAllData (tests/unit/storage.test.js:3746:5)

FAIL unit tests/unit/storage.test.js
  device data storage
    ✓ saveDeviceData stores JSON in localStorage (5 ms)
    ✕ saveDeviceData(null) removes stored overrides and backup copy (2 ms)
    ✓ loadDeviceData returns parsed data if valid (3 ms)
    ✓ loadDeviceData adds missing categories for legacy data (5 ms)
    ✓ loadDeviceData creates migration backup before rewriting normalized data (4 ms)
    ✓ loadDeviceData preserves existing migration backup entries (4 ms)
    ✓ loadDeviceData migrates legacy key prefix to current storage (4 ms)
    ✕ loadDeviceData recovers missing primary from compressed backup without nesting compression (4 ms)
    ✓ saveDeviceData stores uncompressed payloads even for large entries (22 ms)
    ✓ saveDeviceData rewrites legacy compressed payloads to plain JSON (22 ms)
    ✓ loadDeviceData replaces non-object categories with empty objects (3 ms)
    ✓ loadDeviceData returns null for primitive data (1 ms)
    ✓ loadDeviceData restores data from backup when primary payload is corrupted (3 ms)
  setup storage
    ✕ saveSetups stores JSON (1 ms)
    ✓ loadSetups returns empty object when none (1 ms)
    ✓ loadSetups returns parsed object when present (1 ms)
    ✓ loadSetups converts array data into an object (3 ms)
    ✓ loadSetups ensures unique keys when names duplicate (3 ms)
    ✓ loadSetups treats case or whitespace variants as duplicates (6 ms)
    ✓ loadSetups returns empty object for primitive data (1 ms)
    ✕ loadSetups recovers from backup when stored data is corrupted (1 ms)
    ✓ loadSetups removes entries that are not plain objects (2 ms)
    ✕ saveSetups removes older duplicate auto backups before trimming unique entries (6 ms)
    ✕ saveSetups replaces circular references in auto backups with a safe placeholder
    ✕ saveSetups keeps auto backups with identical data when labels differ
    ✕ saveSetups keeps auto backups with distinct Date values for the same label (4 ms)
    ✕ saveSetups keeps the newest auto backup for each project label when trimming (4 ms)
    ✕ saveSetups keeps only the newest unlabeled auto backup when earlier copies are identical (3 ms)
    ✕ saveSetups logs when duplicate auto backups are trimmed without losing the newest copy (6 ms)
    ✕ saveSetups retains unique auto backups even when exceeding the retention limit (5 ms)
    ✕ renameSetup marks auto backups renamed within the automatic namespace (1 ms)
    ✕ saveSetups keeps renamed auto backups when a new snapshot shares the label
    ✕ saveSetup adds and persists single setup
    ✓ loadSetup retrieves named setup (1 ms)
    ✕ deleteSetup removes named setup
    ✕ renameSetup renames setup to a new unique name
    ✕ renameSetup appends suffix when target exists
    ✓ renameSetup ignores case and whitespace when name unchanged (1 ms)
    ✕ renameSetup prevents case-insensitive duplicates
    ✓ renameSetup returns null when original missing (1 ms)
    ✓ renameSetup ignores empty new name
  session state storage
    ✓ saveSessionState stores JSON in localStorage
    ✓ loadSessionState returns parsed object when present (1 ms)
    ✓ loadSessionState returns null when none
    ✕ loadSessionState migrates data from sessionStorage
    ✓ loadSessionState migrates legacy key prefix (1 ms)
    ✓ loadSessionState normalizes legacy session payloads
    ✓ loadSessionState creates migration backup before rewriting normalized data (1 ms)
    ✓ loadSessionState preserves existing migration backup entries (1 ms)
  feedback storage
    ✓ saveFeedback stores JSON
    ✓ loadFeedback returns parsed object when present
    ✓ loadFeedback returns empty object for non-object data (1 ms)
  project storage
    ✕ saveProject stores data per project name (1 ms)
    ✓ loadProject resolves entries saved with surrounding whitespace
    ✕ saveProject normalizes project keys with surrounding whitespace when unused (1 ms)
    ✕ deleteProject removes entries even when addressed with trimmed names
    ✕ saveProject normalizes null gearList to empty string (1 ms)
    ✕ saveProject strips non-object projectInfo values (1 ms)
    ✕ saveProject preserves custom gear selector entries (1 ms)
    ✕ saveProject removes older duplicate auto backups before trimming unique entries (11 ms)
    ✕ saveProject retains unique auto backups even when exceeding the retention limit (14 ms)
    ✓ saveProject ignores non-object payloads entirely (1 ms)
    ✕ saveProject creates an automatic backup before overwriting existing data (1 ms)
    ✕ saveProject generates distinct auto backup names within the same minute
    ✕ saveProject skips creating backups when data has not changed
    ✕ saveProject does not create nested backups when updating auto backup entries (1 ms)
    ✕ loadProject returns normalized map of projects when name omitted
    ✕ loadProject upgrades legacy lens list strings to structured selections (1 ms)
    ✕ loadProject normalizes legacy lens selection objects and arrays (1 ms)
    ✕ loadProject derives lens selections when legacy data stored outside projectInfo
    ✕ loadProject normalizes legacy lens selection maps with string mounts (1 ms)
    ✕ loadProject preserves metadata when deriving lens selections from name maps (1 ms)
    ✕ loadProject recovers project info from stored requirements HTML (2 ms)
    ✕ loadProject parses combined production company requirement box (1 ms)
    ✕ loadProject maps localized requirement labels when data-field is missing
    ✕ loadProject returns null for unknown names
    ✕ loadProject migrates legacy key prefix to new storage
    ✕ loadProject creates migration backup before rewriting normalized data (1 ms)
    ✕ loadProject preserves existing migration backup entries
    ✕ deleteProject removes individual projects and stores an automatic backup before deleting
    ✕ deleteProject without a name clears all stored projects
  favorites storage
    ✓ loadFavorites returns empty object for non-object data
    ✓ saveFavorites ignores non-object payloads
  automatic gear storage
    ✓ saveAutoGearRules persists rule arrays (1 ms)
    ✓ loadAutoGearRules falls back to empty array when data malformed
    ✓ loadAutoGearRules migrates legacy key prefix
    ✓ loadAutoGearRules defaults enabled to true when missing (1 ms)
    ✕ loadAutoGearBackups returns stored backups and sanitises invalid payloads
    ✕ saveAutoGearAutoPresetId removes auto preset entries from compressed storage (216 ms)
    ✕ saveAutoGearBackups trims the oldest entry when storage quota is exceeded (6 ms)
    ✕ saveAutoGearBackups removes migration backup copy when quota persists with empty payload (8 ms)
    ✕ saveAutoGearBackups clears cached UI storage when migration cleanup is unavailable (5 ms)
    ✕ saveAutoGearBackupRetention creates migration backup before overwriting existing values (1 ms)
    ✓ saveAutoGearSeedFlag toggles the persisted flag
    ✕ loadAutoGearAutoPresetId reflects persisted value
    ✕ loadAutoGearAutoPresetId migrates legacy key prefix (1 ms)
    ✕ clearing the auto preset removes the autosaved entry from presets
    ✕ replacing the auto preset id removes the previous autosaved entry
    ✓ loadAutoGearMonitorDefaults migrates legacy key prefix
  clearAllData
    ✕ removes all stored planner data
    ✓ removes legacy planner keys so migrations cannot restore cleared data (1 ms)
    ✓ clears diagnostics storage to guarantee a fresh console session (1 ms)
  export/import all data
    ✕ exportAllData collects all planner data
    ✕ exportAllData normalizes stored boolean preference strings (1 ms)
    ✓ exportAllData filters invalid custom font entries (1 ms)
    ✓ exportAllData reads custom fonts from backup storage when primary is missing (1 ms)
    ✓ exportAllData reads custom logo from backup storage when primary is missing (1 ms)
    ✓ exportAllData includes stored schema cache values (1 ms)
    ✕ exportAllData/importAllData round-trips print layout preferences offline (2 ms)
    ✕ importAllData restores planner data (2 ms)
    ✓ exportAllData preserves automatic gear enabled states (1 ms)
    ✓ exportAllData prefers auto-gear persistence cache over localStorage (3 ms)
    ✓ importAllData rehydrates auto-gear persistence for offline exports (2 ms)
    ✕ importAllData applies temperature unit preference (1 ms)
    ✕ importAllData converts legacy storage snapshots with prefixed keys (17 ms)
    ✕ importAllData decodes legacy longgop compressed migration backups (37 ms)
    ✕ importAllData clears stored device overrides when payload sets devices to null (1 ms)
    ✕ importAllData clears session state when payload sets session to null (1 ms)
    ✕ importAllData handles legacy projects array (2 ms)
    ✕ importAllData merges project map without overwriting existing entries
    ✕ importAllData merges legacy project arrays without replacing existing ones (1 ms)
    ✕ importAllData handles project collections stored as Map instances (1 ms)
    ✕ importAllData handles project tuple arrays with explicit names (1 ms)
    ✕ importAllData handles named project wrappers with nested project payloads (1 ms)
    ✕ importAllData handles legacy project string payload (1 ms)
    ✕ importAllData handles legacy project map entries stored as strings (2 ms)
    ✕ importAllData handles project map entries stored as JSON strings (1 ms)
    ✕ importAllData extracts nested project data containers (31 ms)
    ✕ importAllData imports legacy plannerData project entries (31 ms)
    ✕ importAllData converts legacy filter arrays into serialized filter selections (1 ms)
    ✕ importAllData normalizes map-based filter payloads with mixed formats (1 ms)
    ✕ importAllData handles legacy single gearList (32 ms)
    ✕ loadProject normalizes stored JSON string payloads
    ✕ loadProject normalizes project map entries saved as JSON strings
    ✕ importAllData normalizes automatic gear booleans from strings (1 ms)
    ✕ importAllData treats ambiguous automatic gear booleans as disabled (1 ms)
    ✕ importAllData accepts automatic gear data stored as object maps (1 ms)
    ✕ importAllData accepts automatic gear data stored as Map instances (1 ms)
    ✕ importAllData accepts automatic gear data stored as JSON strings (1 ms)
    ✕ importAllData extracts preset id from object payloads
    ✕ importAllData parses JSON project strings (2 ms)
    ✕ importAllData parses project JSON arrays stored as strings (1 ms)
    ✕ importAllData normalizes nested legacy project payloads (1 ms)
  full backup history storage
    ✕ recordFullBackupHistoryEntry appends entries and enforces limit
    ✕ saveFullBackupHistory removes storage key when empty array provided
    ✕ saveFullBackupHistory preserves existing history when payload normalizes to empty
    ✕ loadFullBackupHistory normalizes raw string entries (1 ms)
    ✕ importAllData normalizes mixed array full backup history payloads (2 ms)
    ✕ importAllData accepts full backup history stored inside nested objects (1 ms)
    ✕ importAllData supports legacy fullBackups string payloads (2 ms)
    ✕ importAllData accepts full backup history stored as Map (2 ms)
  migration backups before overwriting data
    ✓ captures previous {
  label: 'device overrides',
  key: 'cameraPowerPlanner_devices',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data (4 ms)
    ✓ captures previous {
  label: 'session state',
  key: 'cameraPowerPlanner_session',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data (1 ms)
    ✕ captures previous {
  label: 'setups',
  key: 'cameraPowerPlanner_setups',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data (1 ms)
    ✓ captures previous {
  label: 'favorites',
  key: 'cameraPowerPlanner_favorites',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data (1 ms)
    ✓ captures previous {
  label: 'feedback',
  key: 'cameraPowerPlanner_feedback',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data (6 ms)
    ✓ captures previous {
  label: 'automatic gear rules',
  key: 'cameraPowerPlanner_autoGearRules',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data
    ✕ captures previous {
  label: 'automatic gear backups',
  key: 'cameraPowerPlanner_autoGearBackups',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data
    ✕ captures previous {
  label: 'automatic gear presets',
  key: 'cameraPowerPlanner_autoGearPresets',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data
    ✕ captures previous {
  label: 'automatic gear monitor defaults',
  key: 'cameraPowerPlanner_autoGearMonitorDefaults',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data
    ✕ captures previous {
  label: 'full backup history',
  key: 'cameraPowerPlanner_fullBackups',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data
    ✕ saveProject preserves existing project container before overwriting (1 ms)
    ✓ saveDeviceData upgrades legacy migration backup payloads to modern envelope
    ✓ saveDeviceData wraps string-based legacy migration backups (1 ms)
    ✓ saveDeviceData normalizes numeric migration backup timestamps
    ✕ camera colour palette survives export/import round trip (2 ms)
  storage snapshot conversion
    ✕ imports preferences stored under simple keys from a snapshot object (41 ms)
  critical storage backup guard
    ✓ creates backup copies for stored entries (2 ms)
    ✕ project backups capture custom gear selectors
    ✓ reports missing entries when nothing is stored (1 ms)

  ● device data storage › saveDeviceData(null) removes stored overrides and backup copy

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:9452:5)
      at Object.saveDeviceData (tests/unit/storage.test.js:404:5)

  ● device data storage › loadDeviceData recovers missing primary from compressed backup without nesting compression

    expect(received).toEqual(expected) // deep equality

    Expected: {"accessories": {"batteries": {}, "cables": {}, "cages": {}, "cameraStabiliser": {}, "cameraSupport": {}, "cardReaders": {}, "carts": {}, "chargers": {}, "filters": {}, "grip": {}, "matteboxes": {}, "media": {}, "powerPlates": {}, "rigging": {}, "sliders": {}, "tripodHeads": {}, "tripods": {}, "videoAssist": {}}, "batteries": {}, "batteryHotswaps": {}, "cameras": {}, "directorMonitors": {}, "filterOptions": [], "fiz": {"controllers": {}, "distance": {}, "handUnits": {}, "motors": {}}, "iosVideo": {}, "lenses": {}, "media": {}, "monitors": {}, "video": {}, "videoAssist": {}, "viewfinders": {}, "wirelessReceivers": {}}
    Received: null

      530 |     const recovered = loadDeviceData();
      531 |
    > 532 |     expect(recovered).toEqual(validDeviceData);
          |                       ^
      533 |     const restoredRaw = decodeStoredValue(localStorage.getItem(DEVICE_KEY));
      534 |     expect(typeof restoredRaw).toBe('string');
      535 |     expect(restoredRaw).not.toContain('__cineStorageCompressed');

      at Object.toEqual (tests/unit/storage.test.js:532:23)

  ● setup storage › saveSetups stores JSON

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:672:5)

  ● setup storage › loadSetups recovers from backup when stored data is corrupted

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:712:5)

  ● setup storage › saveSetups removes older duplicate auto backups before trimming unique entries

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:747:5)

  ● setup storage › saveSetups replaces circular references in auto backups with a safe placeholder

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:762:5)

  ● setup storage › saveSetups keeps auto backups with identical data when labels differ

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:792:5)

  ● setup storage › saveSetups keeps auto backups with distinct Date values for the same label

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:826:5)

  ● setup storage › saveSetups keeps the newest auto backup for each project label when trimming

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:852:5)

  ● setup storage › saveSetups keeps only the newest unlabeled auto backup when earlier copies are identical

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:879:5)

  ● setup storage › saveSetups logs when duplicate auto backups are trimmed without losing the newest copy

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:899:5)

  ● setup storage › saveSetups retains unique auto backups even when exceeding the retention limit

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:930:5)

  ● setup storage › renameSetup marks auto backups renamed within the automatic namespace

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:9608:5)
      at updateSetups (src/scripts/storage.js:9636:10)
      at Object.renameSetup (tests/unit/storage.test.js:944:20)

  ● setup storage › saveSetups keeps renamed auto backups when a new snapshot shares the label

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:964:5)

  ● setup storage › saveSetup adds and persists single setup

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:9608:5)
      at updateSetups (src/scripts/storage.js:9614:3)
      at Object.saveSetup (tests/unit/storage.test.js:974:5)

  ● setup storage › deleteSetup removes named setup

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:9608:5)
      at updateSetups (src/scripts/storage.js:9626:3)
      at Object.deleteSetup (tests/unit/storage.test.js:988:5)

  ● setup storage › renameSetup renames setup to a new unique name

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:9608:5)
      at updateSetups (src/scripts/storage.js:9636:10)
      at Object.renameSetup (tests/unit/storage.test.js:995:21)

  ● setup storage › renameSetup appends suffix when target exists

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:9608:5)
      at updateSetups (src/scripts/storage.js:9636:10)
      at Object.renameSetup (tests/unit/storage.test.js:1003:21)

  ● setup storage › renameSetup prevents case-insensitive duplicates

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:9608:5)
      at updateSetups (src/scripts/storage.js:9636:10)
      at Object.renameSetup (tests/unit/storage.test.js:1019:21)

  ● session state storage › loadSessionState migrates data from sessionStorage

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:8867:5)
      at loadWithMigration (src/scripts/storage.js:9231:15)
      at Object.loadSessionState (tests/unit/storage.test.js:1065:12)

  ● project storage › saveProject stores data per project name

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1191:5)

  ● project storage › saveProject normalizes project keys with surrounding whitespace when unused

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1215:5)

  ● project storage › deleteProject removes entries even when addressed with trimmed names

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1229:5)

  ● project storage › saveProject normalizes null gearList to empty string

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1247:5)

  ● project storage › saveProject strips non-object projectInfo values

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1252:5)

  ● project storage › saveProject preserves custom gear selector entries

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1257:5)

  ● project storage › saveProject removes older duplicate auto backups before trimming unique entries

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1294:5)

  ● project storage › saveProject retains unique auto backups even when exceeding the retention limit

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1313:5)

  ● project storage › saveProject creates an automatic backup before overwriting existing data

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1338:5)

  ● project storage › saveProject generates distinct auto backup names within the same minute

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1385:5)

  ● project storage › saveProject skips creating backups when data has not changed

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1410:5)

  ● project storage › saveProject does not create nested backups when updating auto backup entries

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1426:5)

  ● project storage › loadProject returns normalized map of projects when name omitted

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1450:20)

  ● project storage › loadProject upgrades legacy lens list strings to structured selections

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1470:21)

  ● project storage › loadProject normalizes legacy lens selection objects and arrays

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1500:21)

  ● project storage › loadProject derives lens selections when legacy data stored outside projectInfo

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1529:21)

  ● project storage › loadProject normalizes legacy lens selection maps with string mounts

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1556:21)

  ● project storage › loadProject preserves metadata when deriving lens selections from name maps

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1583:21)

  ● project storage › loadProject recovers project info from stored requirements HTML

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1634:21)

  ● project storage › loadProject parses combined production company requirement box

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1658:21)

  ● project storage › loadProject maps localized requirement labels when data-field is missing

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1690:21)

  ● project storage › loadProject returns null for unknown names

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1700:5)

  ● project storage › loadProject migrates legacy key prefix to new storage

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1707:22)

  ● project storage › loadProject creates migration backup before rewriting normalized data

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1732:5)

  ● project storage › loadProject preserves existing migration backup entries

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:1757:22)

  ● project storage › deleteProject removes individual projects and stores an automatic backup before deleting

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1772:5)

  ● project storage › deleteProject without a name clears all stored projects

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:1802:5)

  ● automatic gear storage › loadAutoGearBackups returns stored backups and sanitises invalid payloads

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15175 |
      15176 |     if (typeof storageRepo !== 'undefined') {
    > 15177 |       storageRepo.setItem(AUTO_GEAR_BACKUPS_STORAGE_KEY, normalizedBackups).catch(err => {
            |                   ^
      15178 |         console.warn('[Storage] Failed to async persist Auto Gear Backups to IDB:', err);
      15179 |         if (isIndexedDBActive) {
      15180 |           try {

      at setItem (src/scripts/storage.js:15177:19)
      at Object.saveAutoGearBackups (tests/unit/storage.test.js:1865:5)

  ● automatic gear storage › saveAutoGearAutoPresetId removes auto preset entries from compressed storage

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      15598 |       storageRepo.setItem(AUTO_GEAR_AUTO_PRESET_STORAGE_KEY, presetId).catch(e => console.warn('Failed to save auto preset id', e));
      15599 |     } else {
    > 15600 |       storageRepo.removeItem(AUTO_GEAR_AUTO_PRESET_STORAGE_KEY).catch(e => console.warn('Failed to remove auto preset id', e));
            |                   ^
      15601 |     }
      15602 |   }
      15603 |

      at removeItem (src/scripts/storage.js:15600:19)
      at Object.saveAutoGearAutoPresetId (tests/unit/storage.test.js:1910:5)

  ● automatic gear storage › saveAutoGearBackups trims the oldest entry when storage quota is exceeded

    expect(received).toEqual(expected) // deep equality

    Expected: [{"createdAt": "2025-01-01T12:00:00.000Z", "id": "backup-new", "monitorDefaults": {}, "note": "Latest snapshot", "rules": [{"id": "rule-a"}]}, {"createdAt": "2024-12-15T08:30:00.000Z", "id": "backup-mid", "monitorDefaults": {}, "rules": [{"id": "rule-b"}]}]
    Received: null

      2012 |         expect(storedBackups.length).toBe(2);
      2013 |         expect(storedBackups).toEqual(backups.slice(0, 2));
    > 2014 |         expect(stored).toEqual(storedBackups);
           |                        ^
      2015 |         expect(quotaWarning).toBeDefined();
      2016 |         expect(quotaWarning && quotaWarning[0]).toContain('Old snapshot');
      2017 |       });

      at toEqual (tests/unit/storage.test.js:2014:24)
      at Object.isolateModules (tests/unit/storage.test.js:1972:12)

  ● automatic gear storage › saveAutoGearBackups removes migration backup copy when quota persists with empty payload

    expect(received).toBe(expected) // Object.is equality

    Expected: "[]"
    Received: null

      2103 |         expect(Array.isArray(storedBackups)).toBe(true);
      2104 |         expect(storedBackups).toEqual([]);
    > 2105 |         expect(storedValue).toBe(JSON.stringify([]));
           |                             ^
      2106 |         expect(migrationValue).toBeNull();
      2107 |         expect(migrationWarning).toBeDefined();
      2108 |       });

      at toBe (tests/unit/storage.test.js:2105:29)
      at Object.isolateModules (tests/unit/storage.test.js:2064:12)

  ● automatic gear storage › saveAutoGearBackups clears cached UI storage when migration cleanup is unavailable

    expect(received).toBe(expected) // Object.is equality

    Expected: "[]"
    Received: null

      2195 |         expect(Array.isArray(storedBackups)).toBe(true);
      2196 |         expect(storedBackups).toEqual([]);
    > 2197 |         expect(storedValue).toBe(JSON.stringify([]));
           |                             ^
      2198 |         expect(cacheRemovals).toContain(SCHEMA_CACHE_KEY);
      2199 |         expect(cacheWarning).toBeDefined();
      2200 |       });

      at toBe (tests/unit/storage.test.js:2197:29)
      at Object.isolateModules (tests/unit/storage.test.js:2157:12)

  ● automatic gear storage › saveAutoGearBackupRetention creates migration backup before overwriting existing values

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15843 |   autoGearBackupRetentionCache = normalized;
      15844 |   if (storageRepo) {
    > 15845 |     storageRepo.setItem(AUTO_GEAR_BACKUP_RETENTION_STORAGE_KEY, normalized).catch(e => console.warn('Failed to save backup retention', e));
            |                 ^
      15846 |   }
      15847 |
      15848 |

      at setItem (src/scripts/storage.js:15845:17)
      at Object.saveAutoGearBackupRetention (tests/unit/storage.test.js:2220:5)

  ● automatic gear storage › loadAutoGearAutoPresetId reflects persisted value

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15596 |   if (storageRepo) {
      15597 |     if (presetId) {
    > 15598 |       storageRepo.setItem(AUTO_GEAR_AUTO_PRESET_STORAGE_KEY, presetId).catch(e => console.warn('Failed to save auto preset id', e));
            |                   ^
      15599 |     } else {
      15600 |       storageRepo.removeItem(AUTO_GEAR_AUTO_PRESET_STORAGE_KEY).catch(e => console.warn('Failed to remove auto preset id', e));
      15601 |     }

      at setItem (src/scripts/storage.js:15598:19)
      at Object.saveAutoGearAutoPresetId (tests/unit/storage.test.js:2241:5)

  ● automatic gear storage › loadAutoGearAutoPresetId migrates legacy key prefix

    expect(received).toBe(expected) // Object.is equality

    Expected: "legacy-auto"
    Received: "preset-auto"

      2250 |     localStorage.setItem('cinePowerPlanner_autoGearAutoPreset', 'legacy-auto');
      2251 |
    > 2252 |     expect(loadAutoGearAutoPresetId()).toBe('legacy-auto');
           |                                        ^
      2253 |     expect(getDecodedLocalStorageItem(AUTO_GEAR_AUTO_PRESET_KEY)).toBe('legacy-auto');
      2254 |     expect(getDecodedLocalStorageItem('cinePowerPlanner_autoGearAutoPreset')).toBeNull();
      2255 |   });

      at Object.toBe (tests/unit/storage.test.js:2252:40)

  ● automatic gear storage › clearing the auto preset removes the autosaved entry from presets

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15369 |
      15370 |   if (storageRepo) {
    > 15371 |     storageRepo.setItem(AUTO_GEAR_PRESETS_STORAGE_KEY, normalizedPresets).catch(e => console.warn('Failed to save auto gear presets to repo', e));
            |                 ^
      15372 |   }
      15373 |
      15374 |   saveJSONToStorage(

      at setItem (src/scripts/storage.js:15371:17)
      at Object.saveAutoGearPresets (tests/unit/storage.test.js:2263:5)

  ● automatic gear storage › replacing the auto preset id removes the previous autosaved entry

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15369 |
      15370 |   if (storageRepo) {
    > 15371 |     storageRepo.setItem(AUTO_GEAR_PRESETS_STORAGE_KEY, normalizedPresets).catch(e => console.warn('Failed to save auto gear presets to repo', e));
            |                 ^
      15372 |   }
      15373 |
      15374 |   saveJSONToStorage(

      at setItem (src/scripts/storage.js:15371:17)
      at Object.saveAutoGearPresets (tests/unit/storage.test.js:2276:5)

  ● clearAllData › removes all stored planner data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:2314:5)

  ● export/import all data › exportAllData collects all planner data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at Object.saveSetups (tests/unit/storage.test.js:2420:5)

  ● export/import all data › exportAllData normalizes stored boolean preference strings

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14502 |
      14503 |   // Async persist to new storage system (fire-and-forget migration)
    > 14504 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, normalized).catch(err => {
            |               ^
      14505 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14506 |   });
      14507 |

      at setItem (src/scripts/storage.js:14504:15)
      at loadFullBackupHistory (src/scripts/storage.js:16618:24)
      at Object.exportAllData (tests/unit/storage.test.js:2529:22)

  ● export/import all data › exportAllData/importAllData round-trips print layout preferences offline

    expect(received).not.toBeNull()

    Received: null

      2626 |
      2627 |     const storedPrintPreferencesRaw = localStorage.getItem(PRINT_PREFERENCES_KEY);
    > 2628 |     expect(storedPrintPreferencesRaw).not.toBeNull();
           |                                           ^
      2629 |     const storedPrintPreferences = JSON.parse(decodeStoredValue(storedPrintPreferencesRaw));
      2630 |     expect(storedPrintPreferences).toEqual(printPreferences);
      2631 |

      at Object.toBeNull (tests/unit/storage.test.js:2628:43)

  ● export/import all data › importAllData restores planner data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:17714:5)
      at Object.importAllData (tests/unit/storage.test.js:2679:5)

  ● export/import all data › importAllData applies temperature unit preference

    expect(received).toBe(expected) // Object.is equality

    Expected: "fahrenheit"
    Received: null

      2805 |     importAllData({ preferences: { temperatureUnit: 'fahrenheit' } });
      2806 |
    > 2807 |     expect(getDecodedLocalStorageItem(TEMPERATURE_UNIT_KEY)).toBe('fahrenheit');
           |                                                              ^
      2808 |   });
      2809 |
      2810 |   test('importAllData converts legacy storage snapshots with prefixed keys', () => {

      at Object.toBe (tests/unit/storage.test.js:2807:62)

  ● export/import all data › importAllData converts legacy storage snapshots with prefixed keys

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (src/scripts/storage.js:17714:5)
      at importAllData (src/scripts/storage.js:17685:7)
      at Object.importAllData (tests/unit/storage.test.js:2853:5)

  ● export/import all data › importAllData decodes legacy longgop compressed migration backups

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15175 |
      15176 |     if (typeof storageRepo !== 'undefined') {
    > 15177 |       storageRepo.setItem(AUTO_GEAR_BACKUPS_STORAGE_KEY, normalizedBackups).catch(err => {
            |                   ^
      15178 |         console.warn('[Storage] Failed to async persist Auto Gear Backups to IDB:', err);
      15179 |         if (isIndexedDBActive) {
      15180 |           try {

      at setItem (src/scripts/storage.js:15177:19)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18010:5)
      at importAllData (src/scripts/storage.js:17685:7)
      at Object.importAllData (tests/unit/storage.test.js:2922:5)

  ● export/import all data › importAllData clears stored device overrides when payload sets devices to null

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:9452:5)
      at saveDeviceData (src/scripts/storage.js:17711:5)
      at Object.importAllData (tests/unit/storage.test.js:2932:5)

  ● export/import all data › importAllData clears session state when payload sets session to null

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:9261:5)
      at saveSessionState (src/scripts/storage.js:17717:5)
      at Object.importAllData (tests/unit/storage.test.js:2943:5)

  ● export/import all data › importAllData handles legacy projects array

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13881:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13868:13)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18094:5)
      at Object.importAllData (tests/unit/storage.test.js:2956:5)

  ● export/import all data › importAllData merges project map without overwriting existing entries

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:2961:5)

  ● export/import all data › importAllData merges legacy project arrays without replacing existing ones

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:2982:5)

  ● export/import all data › importAllData handles project collections stored as Map instances

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13881:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13868:13)
      at importProjectCollection (src/scripts/storage.js:13837:14)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3012:5)

  ● export/import all data › importAllData handles project tuple arrays with explicit names

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13881:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13868:13)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18094:5)
      at Object.importAllData (tests/unit/storage.test.js:3025:5)

  ● export/import all data › importAllData handles named project wrappers with nested project payloads

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13881:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13868:13)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3042:5)

  ● export/import all data › importAllData handles legacy project string payload

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13830:5)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3057:5)

  ● export/import all data › importAllData handles legacy project map entries stored as strings

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13890:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13888:32)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3063:5)

  ● export/import all data › importAllData handles project map entries stored as JSON strings

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13890:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13888:32)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3080:5)

  ● export/import all data › importAllData extracts nested project data containers

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at src/scripts/storage.js:18109:31
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:18103:23)
      at Object.importAllData (tests/unit/storage.test.js:3093:5)

  ● export/import all data › importAllData imports legacy plannerData project entries

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13881:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13868:13)
      at importProjectCollection (src/scripts/storage.js:18115:24)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:18103:23)
      at Object.importAllData (tests/unit/storage.test.js:3105:5)

  ● export/import all data › importAllData converts legacy filter arrays into serialized filter selections

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13890:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13888:32)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3119:5)

  ● export/import all data › importAllData normalizes map-based filter payloads with mixed formats

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13890:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13888:32)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3143:5)

  ● export/import all data › importAllData handles legacy single gearList

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importAllData (src/scripts/storage.js:18097:25)
      at Object.importAllData (tests/unit/storage.test.js:3168:5)

  ● export/import all data › loadProject normalizes stored JSON string payloads

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:3182:21)

  ● export/import all data › loadProject normalizes project map entries saved as JSON strings

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:12743:3)
      at cleanupMonolithicProjectStorage (src/scripts/storage.js:12832:3)
      at persistAllProjects (src/scripts/storage.js:13063:5)
      at Object.loadProject (tests/unit/storage.test.js:3217:21)

  ● export/import all data › importAllData normalizes automatic gear booleans from strings

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15666 |   autoGearBackupVisibilityCache = !!flag;
      15667 |   if (storageRepo) {
    > 15668 |     storageRepo.setItem(AUTO_GEAR_BACKUP_VISIBILITY_STORAGE_KEY, !!flag).catch(e => console.warn('Failed to save visibility', e));
            |                 ^
      15669 |   }
      15670 |
      15671 |

      at setItem (src/scripts/storage.js:15668:17)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18039:5)
      at Object.importAllData (tests/unit/storage.test.js:3234:5)

  ● export/import all data › importAllData treats ambiguous automatic gear booleans as disabled

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15666 |   autoGearBackupVisibilityCache = !!flag;
      15667 |   if (storageRepo) {
    > 15668 |     storageRepo.setItem(AUTO_GEAR_BACKUP_VISIBILITY_STORAGE_KEY, !!flag).catch(e => console.warn('Failed to save visibility', e));
            |                 ^
      15669 |   }
      15670 |
      15671 |

      at setItem (src/scripts/storage.js:15668:17)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18039:5)
      at Object.importAllData (tests/unit/storage.test.js:3246:5)

  ● export/import all data › importAllData accepts automatic gear data stored as object maps

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15175 |
      15176 |     if (typeof storageRepo !== 'undefined') {
    > 15177 |       storageRepo.setItem(AUTO_GEAR_BACKUPS_STORAGE_KEY, normalizedBackups).catch(err => {
            |                   ^
      15178 |         console.warn('[Storage] Failed to async persist Auto Gear Backups to IDB:', err);
      15179 |         if (isIndexedDBActive) {
      15180 |           try {

      at setItem (src/scripts/storage.js:15177:19)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18010:5)
      at Object.importAllData (tests/unit/storage.test.js:3268:5)

  ● export/import all data › importAllData accepts automatic gear data stored as Map instances

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15175 |
      15176 |     if (typeof storageRepo !== 'undefined') {
    > 15177 |       storageRepo.setItem(AUTO_GEAR_BACKUPS_STORAGE_KEY, normalizedBackups).catch(err => {
            |                   ^
      15178 |         console.warn('[Storage] Failed to async persist Auto Gear Backups to IDB:', err);
      15179 |         if (isIndexedDBActive) {
      15180 |           try {

      at setItem (src/scripts/storage.js:15177:19)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18010:5)
      at Object.importAllData (tests/unit/storage.test.js:3288:5)

  ● export/import all data › importAllData accepts automatic gear data stored as JSON strings

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15175 |
      15176 |     if (typeof storageRepo !== 'undefined') {
    > 15177 |       storageRepo.setItem(AUTO_GEAR_BACKUPS_STORAGE_KEY, normalizedBackups).catch(err => {
            |                   ^
      15178 |         console.warn('[Storage] Failed to async persist Auto Gear Backups to IDB:', err);
      15179 |         if (isIndexedDBActive) {
      15180 |           try {

      at setItem (src/scripts/storage.js:15177:19)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18010:5)
      at Object.importAllData (tests/unit/storage.test.js:3316:5)

  ● export/import all data › importAllData extracts preset id from object payloads

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15517 |   if (storageRepo) {
      15518 |     if (presetId) {
    > 15519 |       storageRepo.setItem(AUTO_GEAR_ACTIVE_PRESET_STORAGE_KEY, presetId).catch(e => console.warn('Failed to save active preset id', e));
            |                   ^
      15520 |     } else {
      15521 |       storageRepo.removeItem(AUTO_GEAR_ACTIVE_PRESET_STORAGE_KEY).catch(e => console.warn('Failed to remove active preset id', e));
      15522 |     }

      at setItem (src/scripts/storage.js:15519:19)
      at fallbackFn (src/scripts/storage.js:17705:7)
      at persistAutoGearValue (src/scripts/storage.js:18030:5)
      at Object.importAllData (tests/unit/storage.test.js:3328:5)

  ● export/import all data › importAllData parses JSON project strings

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13890:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13888:32)
      at importProjectCollection (src/scripts/storage.js:13826:14)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3333:5)

  ● export/import all data › importAllData parses project JSON arrays stored as strings

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13881:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13868:13)
      at importProjectCollection (src/scripts/storage.js:13826:14)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3349:5)

  ● export/import all data › importAllData normalizes nested legacy project payloads

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at saveProject (src/scripts/storage.js:13783:5)
      at importer (src/scripts/storage.js:18076:7)
      at importProject (src/scripts/storage.js:13890:7)
          at Array.forEach (<anonymous>)
      at forEach (src/scripts/storage.js:13888:32)
      at importProjectCollection (src/scripts/storage.js:18082:20)
      at importTrackedCollection (src/scripts/storage.js:18090:5)
      at Object.importAllData (tests/unit/storage.test.js:3382:5)

  ● full backup history storage › recordFullBackupHistoryEntry appends entries and enforces limit

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at saveFullBackupHistory (src/scripts/storage.js:14593:3)
      at Object.recordFullBackupHistoryEntry (tests/unit/storage.test.js:3410:7)

  ● full backup history storage › saveFullBackupHistory removes storage key when empty array provided

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at Object.saveFullBackupHistory (tests/unit/storage.test.js:3422:5)

  ● full backup history storage › saveFullBackupHistory preserves existing history when payload normalizes to empty

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at Object.saveFullBackupHistory (tests/unit/storage.test.js:3429:5)

  ● full backup history storage › loadFullBackupHistory normalizes raw string entries

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14502 |
      14503 |   // Async persist to new storage system (fire-and-forget migration)
    > 14504 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, normalized).catch(err => {
            |               ^
      14505 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14506 |   });
      14507 |

      at setItem (src/scripts/storage.js:14504:15)
      at Object.loadFullBackupHistory (tests/unit/storage.test.js:3449:21)

  ● full backup history storage › importAllData normalizes mixed array full backup history payloads

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at saveFullBackupHistory (src/scripts/storage.js:18050:5)
      at Object.importAllData (tests/unit/storage.test.js:3454:5)

  ● full backup history storage › importAllData accepts full backup history stored inside nested objects

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at saveFullBackupHistory (src/scripts/storage.js:18050:5)
      at Object.importAllData (tests/unit/storage.test.js:3474:5)

  ● full backup history storage › importAllData supports legacy fullBackups string payloads

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at saveFullBackupHistory (src/scripts/storage.js:18053:5)
      at Object.importAllData (tests/unit/storage.test.js:3496:5)

  ● full backup history storage › importAllData accepts full backup history stored as Map

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at saveFullBackupHistory (src/scripts/storage.js:18050:5)
      at Object.importAllData (tests/unit/storage.test.js:3509:5)

  ● migration backups before overwriting data › captures previous {
  label: 'setups',
  key: 'cameraPowerPlanner_setups',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      13025 |     // Async write to new storage
      13026 |     const prefixedIndex = buildProjectIndexForRepo(index);
    > 13027 |     storageRepo.setItem(PROJECT_INDEX_KEY, prefixedIndex).catch(e => console.warn('Failed to persist index to repo', e));
            |                 ^
      13028 |   }
      13029 |
      13030 |   // Legacy writes only if NOT on IndexedDB

      at setItem (src/scripts/storage.js:13027:17)
      at updateProjectIndex (src/scripts/storage.js:9578:5)
      at saveSetups (tests/unit/storage.test.js:3552:24)
      at save (tests/unit/storage.test.js:3608:5)

  ● migration backups before overwriting data › captures previous {
  label: 'automatic gear backups',
  key: 'cameraPowerPlanner_autoGearBackups',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15175 |
      15176 |     if (typeof storageRepo !== 'undefined') {
    > 15177 |       storageRepo.setItem(AUTO_GEAR_BACKUPS_STORAGE_KEY, normalizedBackups).catch(err => {
            |                   ^
      15178 |         console.warn('[Storage] Failed to async persist Auto Gear Backups to IDB:', err);
      15179 |         if (isIndexedDBActive) {
      15180 |           try {

      at setItem (src/scripts/storage.js:15177:19)
      at saveAutoGearBackups (tests/unit/storage.test.js:3580:24)
      at save (tests/unit/storage.test.js:3608:5)

  ● migration backups before overwriting data › captures previous {
  label: 'automatic gear presets',
  key: 'cameraPowerPlanner_autoGearPresets',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15369 |
      15370 |   if (storageRepo) {
    > 15371 |     storageRepo.setItem(AUTO_GEAR_PRESETS_STORAGE_KEY, normalizedPresets).catch(e => console.warn('Failed to save auto gear presets to repo', e));
            |                 ^
      15372 |   }
      15373 |
      15374 |   saveJSONToStorage(

      at setItem (src/scripts/storage.js:15371:17)
      at saveAutoGearPresets (tests/unit/storage.test.js:3587:24)
      at save (tests/unit/storage.test.js:3608:5)

  ● migration backups before overwriting data › captures previous {
  label: 'automatic gear monitor defaults',
  key: 'cameraPowerPlanner_autoGearMonitorDefaults',
  initial: [Object],
  save: [Function: save],
  next: [Object]
} snapshot before writing new data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      15420 |   autoGearMonitorDefaultsCache = normalizedDefaults;
      15421 |   if (storageRepo) {
    > 15422 |     storageRepo.setItem(AUTO_GEAR_MONITOR_DEFAULTS_STORAGE_KEY, normalizedDefaults).catch(e => console.warn('Failed to save monitor defaults to repo', e));
            |                 ^
      15423 |   }
      15424 |
      15425 |   const isIndexedDB = storageRepo && storageRepo.driver && storageRepo.driver.constructor && storageRepo.driver.constructor.name === 'IndexedDBAdapter';

      at setItem (src/scripts/storage.js:15422:17)
      at saveAutoGearMonitorDefaults (tests/unit/storage.test.js:3594:24)
      at save (tests/unit/storage.test.js:3608:5)

  ● migration backups before overwriting data › captures previous {
  label: 'full backup history',
  key: 'cameraPowerPlanner_fullBackups',
  initial: [Array],
  save: [Function: save],
  next: [Array]
} snapshot before writing new data

    TypeError: _StorageRepository.storageRepo.setItem is not a function

      14578 |
      14579 |   // Persist to new storage system (async, fire-and-forget)
    > 14580 |   storageRepo.setItem(FULL_BACKUP_HISTORY_STORAGE_KEY, safeEntries).catch(err => {
            |               ^
      14581 |     console.warn('[storage.js] Failed to persist backup history to new storage:', err);
      14582 |   });
      14583 | }

      at setItem (src/scripts/storage.js:14580:15)
      at saveFullBackupHistory (tests/unit/storage.test.js:3601:24)
      at save (tests/unit/storage.test.js:3608:5)

  ● migration backups before overwriting data › saveProject preserves existing project container before overwriting

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:3619:5)

  ● migration backups before overwriting data › camera colour palette survives export/import round trip

    TypeError: _StorageRepository.storageRepo.removeItem is not a function

      8653 |   // [Agent Refactor] Also clear from new repo (best effort, async)
      8654 |   if (storageRepo) {
    > 8655 |     storageRepo.removeItem(key).catch(() => { });
           |                 ^
      8656 |   }
      8657 |
      8658 |   const { disableBackup = false, backupKey, disableMigrationCleanup = false } = options || {};

      at removeItem (src/scripts/storage.js:8655:17)
      at deleteFromStorage (src/scripts/storage.js:9452:5)
      at saveDeviceData (src/scripts/storage.js:17711:5)
      at Object.importAllData (tests/unit/storage.test.js:3713:7)

  ● storage snapshot conversion › imports preferences stored under simple keys from a snapshot object

    expect(received).toEqual(expected) // deep equality

    - Expected  -  3
    + Received  + 10

    - ObjectContaining {
    -   "accentColor": "Ocean",
    -   "darkMode": true,
    + Object {
    +   "cineRentalPrintSections": Object {
    +     "layout": "rental",
    +     "sections": Object {
    +       "devices": true,
    +       "diagram": false,
    +       "project": false,
    +     },
    +   },
    +   "temperatureUnit": "fahrenheit",
      }

      3747 |
      3748 |     const exported = exportAllData();
    > 3749 |     expect(exported.preferences).toEqual(
           |                                  ^
      3750 |       expect.objectContaining({
      3751 |         darkMode: true,
      3752 |         accentColor: 'Ocean',

      at Object.toEqual (tests/unit/storage.test.js:3749:34)

  ● critical storage backup guard › project backups capture custom gear selectors

    TypeError: _StorageRepository.storageRepo.saveProject is not a function

      13495 |   // and ensures autosave, backup, and restore flows always have the latest snapshot available.
      13496 |   if (storageRepo) {
    > 13497 |     storageRepo.saveProject(finalKey, normalized).catch(err => console.warn('[saveProject] Repo write failed', err));
            |                 ^
      13498 |   }
      13499 |   if (isProjectCacheHydrated) {
      13500 |     projectMemoryCache[finalKey] = normalized;

      at saveProject (src/scripts/storage.js:13497:17)
      at Object.saveProject (tests/unit/storage.test.js:3775:5)

Test Suites: 1 failed, 1 total
Tests:       109 failed, 61 passed, 170 total
Snapshots:   0 total
Time:        2.503 s
Ran all test suites matching tests/unit/storage.test.js|imports preferences stored under simple keys.
Test Suites: 1 failed, 1 total
Tests:       109 failed, 61 passed, 170 total
Snapshots:   0 total
Time:        2.506 s
Ran all test suites matching tests/unit/storage.test.js|imports preferences stored under simple keys.
