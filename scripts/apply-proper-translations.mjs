
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const TARGET_DIR = path.resolve(__dirname, '../src/scripts/translations');

// Translation map for each locale - these are the properly translated strings
// Following the translation-guide.md terminology for V2 UI elements
const translations = {
    de: {
        // Settings tabs
        "settingsTabBackup": "Sicherung & Wiederherstellung",
        "settingsTabData": "Daten & Speicher",
        "settingsTabAbout": "Über & Support",
        "generalSectionInterfaceHeading": "Oberfläche & Barrierefreiheit",
        "generalSectionInterfaceHelp": "Verwalte Schriftgrößen, Hochkontrastmodus und Animationseinstellungen.",
        "settingsBackupAutomatedHeading": "Automatische Sicherungen",
        "settingsBackupManualHeading": "Manuelle Aktionen",
        "settingsBackupDangerHeading": "Gefahrenzone",
        "settingsDataStorageStatusHeading": "Speicherstatus",
        "settingsDataPersistenceHeading": "Persistenz & Sicherung",
        "settingsDataLoggingHeading": "Protokollierung",
        "settingsAboutHeading": "Über & Support",

        // Rules view
        "rulesViewTitle": "Automatische Equipment-Regeln",
        "rulesViewSubtitle": "Verwalte automatische Geräte-Ergänzungen basierend auf deiner Ausrüstungsauswahl.",
        "buttonAddRule": "Regel hinzufügen",
        "rulesEmptyTitle": "Keine Regeln definiert",
        "rulesEmptyText": "Erstelle deine erste Regel, um deine Kit-Liste zu automatisieren.",
        "ruleBadgeAlways": "Immer",
        "ruleTagConditions": "Bedingungen",
        "ruleTagItemsAdded": "Hinzugefügte Artikel",
        "confirmDeleteRule": "Möchtest du diese Regel wirklich löschen?",
        "modalTitleCreateRule": "Regel erstellen",
        "modalTitleEditRule": "Regel bearbeiten",
        "tabGeneral": "Allgemein",
        "tabContext": "Kontext",
        "tabCamera": "Kamera",
        "tabMonitoring": "Monitoring",
        "tabSupport": "Support",
        "tabCrew": "Crew",
        "tabActions": "Aktionen",
        "labelRuleName": "Regelname",
        "labelRuleEnabled": "Regel aktiviert",
        "labelRuleAlways": "Immer anwenden",
        "helpRuleAlways": "Überschreibt alle anderen Bedingungen.",
        "placeholderRuleName": "z.B. Akkus für Monitor hinzufügen",
        "sectionScenarios": "Szenarien",
        "sectionCameraModels": "Kameramodelle",
        "sectionMatteboxes": "Matteboxen",
        "sectionViewfinders": "Sucher / Top-Handles (Erweiterungen)",
        "sectionMonitors": "Monitore",
        "sectionWireless": "Funk",
        "sectionTripodHeads": "Stativköpfe",
        "sectionBowlSize": "Kugelgröße",
        "sectionLegTypes": "Beintypen",
        "sectionSpreaders": "Spreizer",
        "sectionCrewPresent": "Anwesende Crew",
        "sectionCrewAbsent": "Abwesende Crew",
        "sectionItemsToAdd": "Hinzuzufügende Artikel",
        "sectionItemsToRemove": "Zu entfernende Artikel",
        "buttonAddItem": "+ Artikel hinzufügen",
        "labelItemName": "Artikelname",
        "placeholderItemSearch": "Suchen...",
        "labelCategory": "Kategorie",
        "labelQty": "Menge",
        "buttonAdd": "Hinzufügen",
        "textNoOptions": "Keine Optionen verfügbar.",
        "textNoItems": "Keine Artikel definiert.",
        "buttonSaveRule": "Regel speichern",
        "buttonCancel": "Abbrechen",
        "buttonEdit": "Bearbeiten",
        "buttonDelete": "Löschen",
        "alertEnterRuleName": "Bitte gib einen Regelnamen ein.",

        // Contacts view
        "contactsViewTitle": "Kontakte",
        "contactsViewSubtitle": "Verwalte deine Crew- und Lieferantenkontakte.",
        "buttonAddContact": "Kontakt hinzufügen",
        "buttonAddFirstContact": "+ Ersten Kontakt hinzufügen",
        "contactsEmptyTitle": "Keine Kontakte gefunden",
        "contactsEmptyText": "Füge Personen und Unternehmen zu deiner Kontaktliste hinzu, um sie schnell Projekten zuzuweisen.",
        "linkWebsite": "Website",
        "contactUnnamed": "Unbenannter Kontakt",
        "contactNoRole": "Keine Rolle",
        "modalTitleDeleteContact": "Kontakt löschen",
        "confirmDeleteContact": "Möchtest du diesen Kontakt wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden.",
        "buttonDeleteRed": "Löschen",
        "modalTitleNewContact": "Neuer Kontakt",
        "modalTitleEditContact": "Kontakt bearbeiten",
        "buttonUploadPhoto": "Foto hochladen",
        "buttonRemovePhoto": "Entfernen",
        "labelName": "Name",
        "labelRole": "Rolle",
        "labelPhone": "Telefon",
        "labelEmail": "E-Mail",
        "labelWebsite": "Website / Link",
        "labelNotes": "Notizen",
        "placeholderFullName": "Vollständiger Name",
        "placeholderRole": "z.B. 1. Kameraassistent",
        "placeholderPhone": "+49 123 456 7890",
        "placeholderEmail": "email@beispiel.de",
        "placeholderWebsite": "https://...",
        "placeholderNotes": "Zusätzliche Details...",
        "buttonSaveContact": "Kontakt speichern",
        "alertEnterName": "Bitte gib einen Namen ein.",

        // Owned gear view
        "ownGearViewTitle": "Eigenes Equipment",
        "ownGearViewSubtitle": "Verwalte dein persönliches Ausrüstungsinventar.",
        "buttonAddGearItem": "Artikel hinzufügen",
        "buttonAddFirstGearItem": "+ Ersten Artikel hinzufügen",
        "ownGearEmptyTitle": "Keine Ausrüstung gefunden",
        "ownGearEmptyText": "Füge Artikel zu deinem persönlichen Inventar hinzu, um sie schnell zu Projekten hinzuzufügen.",
        "labelQtyPrefix": "Menge: ",
        "labelSourcePrefix": "Quelle: ",
        "confirmDeleteGearItem": "Möchtest du diesen Artikel wirklich löschen?",
        "modalTitleNewGearItem": "Neuer Ausrüstungsartikel",
        "modalTitleEditGearItem": "Ausrüstungsartikel bearbeiten",
        "placeholderGearName": "z.B. Arri Alexa Mini",
        "placeholderGearQty": "1",
        "placeholderGearNotes": "Zustand, Seriennummer, etc...",
        "buttonSaveGearItem": "Artikel speichern",
        "alertInvalidItemData": "Ungültige Artikeldaten.",
        "alertSaveItemFailed": "Artikel konnte nicht gespeichert werden.",
        "labelQuantity": "Menge",

        // Settings buttons and labels
        "buttonDownloadBackup": "Sicherung herunterladen",
        "buttonDownloadFullBackup": "Vollständige Sicherung herunterladen",
        "buttonRestore": "Wiederherstellen",
        "buttonRestoreRehearsal": "Probe-Wiederherstellung",
        "buttonFactoryReset": "Werkseinstellungen",
        "buttonCompareVersions": "Versionen vergleichen",
        "buttonReset": "Zurücksetzen",
        "buttonUploadSvg": "SVG hochladen",
        "buttonClose": "Schließen",
        "buttonExportLog": "Protokoll exportieren",
        "buttonChooseFile": "Datei auswählen",
        "buttonSupport": "Support",
        "buttonReportBug": "Fehler melden",
        "buttonSuggestFeature": "Feature vorschlagen",
        "buttonRequestPersistence": "Permanenten Speicher anfordern",
        "labelBackupRetention": "Sicherungsaufbewahrung (Kopien pro Projekt)",
        "labelBaselineVersion": "Basisversion",
        "labelComparisonVersion": "Vergleichsversion",
        "labelIncidentNotes": "Vorfallnotizen",
        "labelSelectFile": "Datei auswählen",
        "labelNoFileSelected": "Keine Datei ausgewählt",
        "labelLatestProjectSave": "Letzte Projektspeicherung",
        "labelLatestAutoBackup": "Letzte automatische Sicherung",
        "labelLatestFullBackup": "Letzte vollständige Sicherung",
        "tableHeaderData": "Daten",
        "tableHeaderDifference": "Unterschied",
        "labelLogLevel": "Protokollstufe",
        "labelHistoryLimit": "Verlaufslimit",
        "labelNamespaceFilter": "Namespace-Filter",
        "placeholderIncidentNotes": "Kontext für diesen Vergleich...",
        "checkboxAutoBackupList": "Automatische Sicherungen in Projektliste anzeigen",
        "checkboxHighContrast": "Elemente mit hohem Kontrast",
        "checkboxReduceMotion": "Bewegung reduzieren",
        "checkboxRelaxedSpacing": "Entspannter Abstand",
        "checkboxMirrorConsole": "In Konsole spiegeln",
        "checkboxCaptureConsole": "Konsolenausgabe erfassen",
        "checkboxCaptureGlobalErrors": "Globale Fehler erfassen",
        "checkboxPersistSession": "Sitzung zwischen Neuladungen beibehalten",
        "brandingNoLogo": "Kein benutzerdefiniertes Logo festgelegt",
        "documentationTrackerEmptyShort": "Keine Releases verfolgt.",
        "settingsFactoryResetHelp": "Setzt die Anwendung auf den Ausgangszustand zurück. Alle Daten werden gelöscht.",
        "backupDiffModalTitle": "Versionsvergleich",
        "backupDiffModalSubtitle": "Wähle zwei manuelle Speicherungen oder automatische Sicherungen, um Änderungen zu inspizieren.",
        "backupDiffEmptyState": "Wähle Versionen, um Unterschiede zu sehen.",
        "rehearsalModalSubtitle": "Lade eine Sicherung in einen temporären Arbeitsbereich, um sie vor der vollständigen Wiederherstellung zu überprüfen.",
        "rehearsalModalSourceLabel": "Wähle eine Probenquelle",
        "rehearsalModalSourceBackup": "Vollständige App-Sicherung (.json)",
        "rehearsalModalSourceProject": "Projekt-Bundle (.json)",
        "textManageLocalData": "Verwalte deine lokalen Daten.",
        "textRequestPersistence": "Fordere permanente Speicherüberprüfung an, um Browser-Räumung zu verhindern.",
        "statusCheckingPersistence": "Prüfe Speicherschutz...",
        "textNoLogEntries": "Keine Protokolleinträge.",
        "optionLogLevelAll": "Alle Stufen",
        "optionLogLevelInfo": "Info und höher",
        "optionLogLevelWarn": "Warnungen und Fehler",
        "optionLogLevelError": "Nur Fehler",
        "appCreator": "Erstellt von Luca Zanner",

        // Onboarding
        "onboardingTour.steps.projectRequirements.title": "Produktionsanforderungen verfeinern",
        "onboardingTour.steps.projectRequirements.body": "Überprüfe die neu generierte Produktionsanforderungs-Zusammenfassung neben der Kit-Liste. Bestätige, dass die Kurzbeschreibung, Crew-Abdeckung und Logistikboxen die gerade gespeicherten Daten widerspiegeln. Führe dann Exporte oder Sicherungen erneut aus, damit nachgelagerte Teams den aktualisierten Kontext mit jeder Weitergabe erhalten.",

        // V2 Dashboard
        "v2.dashboard.projectLocked": "Das Projekt '{projectName}' ist bereits in einem anderen Tab geöffnet.",

        // Category names
        "categoryNames.other": "Sonstiges"
    },

    es: {
        // Settings tabs
        "settingsTabBackup": "Copia de Seguridad y Restauración",
        "settingsTabData": "Datos y Almacenamiento",
        "settingsTabAbout": "Acerca de y Soporte",
        "generalSectionInterfaceHeading": "Interfaz y Accesibilidad",
        "generalSectionInterfaceHelp": "Gestiona tamaños de fuente, modo de alto contraste y preferencias de animación.",
        "settingsBackupAutomatedHeading": "Copias de Seguridad Automáticas",
        "settingsBackupManualHeading": "Acciones Manuales",
        "settingsBackupDangerHeading": "Zona de Peligro",
        "settingsDataStorageStatusHeading": "Estado del Almacenamiento",
        "settingsDataPersistenceHeading": "Persistencia y Copia de Seguridad",
        "settingsDataLoggingHeading": "Registro",
        "settingsAboutHeading": "Acerca de y Soporte",

        // Rules view
        "rulesViewTitle": "Reglas Automáticas de Equipos",
        "rulesViewSubtitle": "Gestiona las adiciones automáticas de equipos según tu selección de equipamiento.",
        "buttonAddRule": "Añadir Regla",
        "rulesEmptyTitle": "No hay reglas definidas",
        "rulesEmptyText": "Crea tu primera regla para automatizar tu lista de kit.",
        "ruleBadgeAlways": "Siempre",
        "ruleTagConditions": "Condiciones",
        "ruleTagItemsAdded": "Artículos Añadidos",
        "confirmDeleteRule": "¿Estás seguro de que deseas eliminar esta regla?",
        "modalTitleCreateRule": "Crear Regla",
        "modalTitleEditRule": "Editar Regla",
        "tabGeneral": "General",
        "tabContext": "Contexto",
        "tabCamera": "Cámara",
        "tabMonitoring": "Monitoreo",
        "tabSupport": "Soporte",
        "tabCrew": "Equipo",
        "tabActions": "Acciones",
        "labelRuleName": "Nombre de la Regla",
        "labelRuleEnabled": "Regla Activada",
        "labelRuleAlways": "Aplicar Siempre",
        "helpRuleAlways": "Anula todas las demás condiciones.",
        "placeholderRuleName": "p.ej. Añadir Baterías para Monitor",
        "sectionScenarios": "Escenarios",
        "sectionCameraModels": "Modelos de Cámara",
        "sectionMatteboxes": "Matteboxes",
        "sectionViewfinders": "Visores / Top Handles (Extensiones)",
        "sectionMonitors": "Monitores",
        "sectionWireless": "Inalámbrico",
        "sectionTripodHeads": "Cabezales de Trípode",
        "sectionBowlSize": "Tamaño de Bowl",
        "sectionLegTypes": "Tipos de Patas",
        "sectionSpreaders": "Separadores",
        "sectionCrewPresent": "Equipo Presente",
        "sectionCrewAbsent": "Equipo Ausente",
        "sectionItemsToAdd": "Artículos a Añadir",
        "sectionItemsToRemove": "Artículos a Eliminar",
        "buttonAddItem": "+ Añadir Artículo",
        "labelItemName": "Nombre del Artículo",
        "placeholderItemSearch": "Buscar...",
        "labelCategory": "Categoría",
        "labelQty": "Cant.",
        "buttonAdd": "Añadir",
        "textNoOptions": "No hay opciones disponibles.",
        "textNoItems": "No hay artículos definidos.",
        "buttonSaveRule": "Guardar Regla",
        "buttonCancel": "Cancelar",
        "buttonEdit": "Editar",
        "buttonDelete": "Eliminar",
        "alertEnterRuleName": "Por favor, introduce un nombre de regla.",

        // Contacts view
        "contactsViewTitle": "Contactos",
        "contactsViewSubtitle": "Gestiona tus contactos de equipo y proveedores.",
        "buttonAddContact": "Añadir Contacto",
        "buttonAddFirstContact": "+ Añadir Primer Contacto",
        "contactsEmptyTitle": "No se encontraron contactos",
        "contactsEmptyText": "Añade personas y empresas a tu lista de contactos para asignarlos rápidamente a proyectos.",
        "linkWebsite": "Sitio Web",
        "contactUnnamed": "Contacto Sin Nombre",
        "contactNoRole": "Sin Rol",
        "modalTitleDeleteContact": "Eliminar Contacto",
        "confirmDeleteContact": "¿Estás seguro de que deseas eliminar este contacto? Esta acción no se puede deshacer.",
        "buttonDeleteRed": "Eliminar",
        "modalTitleNewContact": "Nuevo Contacto",
        "modalTitleEditContact": "Editar Contacto",
        "buttonUploadPhoto": "Subir Foto",
        "buttonRemovePhoto": "Eliminar",
        "labelName": "Nombre",
        "labelRole": "Rol",
        "labelPhone": "Teléfono",
        "labelEmail": "Correo Electrónico",
        "labelWebsite": "Sitio Web / Enlace",
        "labelNotes": "Notas",
        "placeholderFullName": "Nombre Completo",
        "placeholderRole": "p.ej. 1er AC",
        "placeholderPhone": "+34 123 456 789",
        "placeholderEmail": "email@ejemplo.com",
        "placeholderWebsite": "https://...",
        "placeholderNotes": "Detalles adicionales...",
        "buttonSaveContact": "Guardar Contacto",
        "alertEnterName": "Por favor, introduce un nombre.",

        // Owned gear view
        "ownGearViewTitle": "Equipo Propio",
        "ownGearViewSubtitle": "Gestiona tu inventario de equipamiento personal.",
        "buttonAddGearItem": "Añadir Artículo",
        "buttonAddFirstGearItem": "+ Añadir Primer Artículo",
        "ownGearEmptyTitle": "No se encontró equipamiento",
        "ownGearEmptyText": "Añade artículos a tu inventario personal para añadirlos rápidamente a proyectos.",
        "labelQtyPrefix": "Cant.: ",
        "labelSourcePrefix": "Fuente: ",
        "confirmDeleteGearItem": "¿Estás seguro de que deseas eliminar este artículo?",
        "modalTitleNewGearItem": "Nuevo Artículo de Equipamiento",
        "modalTitleEditGearItem": "Editar Artículo de Equipamiento",
        "placeholderGearName": "p.ej. Arri Alexa Mini",
        "placeholderGearQty": "1",
        "placeholderGearNotes": "Condición, número de serie, etc...",
        "buttonSaveGearItem": "Guardar Artículo",
        "alertInvalidItemData": "Datos de artículo inválidos.",
        "alertSaveItemFailed": "Error al guardar el artículo.",
        "labelQuantity": "Cantidad",

        // Settings buttons and labels
        "buttonDownloadBackup": "Descargar Copia de Seguridad",
        "buttonDownloadFullBackup": "Descargar Copia Completa",
        "buttonRestore": "Restaurar",
        "buttonRestoreRehearsal": "Restauración de Prueba",
        "buttonFactoryReset": "Restablecer de Fábrica",
        "buttonCompareVersions": "Comparar Versiones",
        "buttonReset": "Restablecer",
        "buttonUploadSvg": "Subir SVG",
        "buttonClose": "Cerrar",
        "buttonExportLog": "Exportar Registro",
        "buttonChooseFile": "Elegir Archivo",
        "buttonSupport": "Soporte",
        "buttonReportBug": "Reportar Error",
        "buttonSuggestFeature": "Sugerir Función",
        "buttonRequestPersistence": "Solicitar Almacenamiento Persistente",
        "labelBackupRetention": "Retención de Copias (copias por proyecto)",
        "labelBaselineVersion": "Versión Base",
        "labelComparisonVersion": "Versión de Comparación",
        "labelIncidentNotes": "Notas del Incidente",
        "labelSelectFile": "Seleccionar Archivo",
        "labelNoFileSelected": "Ningún archivo seleccionado",
        "labelLatestProjectSave": "Último Guardado del Proyecto",
        "labelLatestAutoBackup": "Última Copia Automática",
        "labelLatestFullBackup": "Última Copia Completa",
        "tableHeaderData": "Datos",
        "tableHeaderDifference": "Diferencia",
        "labelLogLevel": "Nivel de Registro",
        "labelHistoryLimit": "Límite del Historial",
        "labelNamespaceFilter": "Filtro de Espacio de Nombres",
        "placeholderIncidentNotes": "Contexto para esta comparación...",
        "checkboxAutoBackupList": "Mostrar copias automáticas en lista de proyectos",
        "checkboxHighContrast": "Elementos de Alto Contraste",
        "checkboxReduceMotion": "Reducir Movimiento",
        "checkboxRelaxedSpacing": "Espaciado Relajado",
        "checkboxMirrorConsole": "Reflejar en Consola",
        "checkboxCaptureConsole": "Capturar Salida de Consola",
        "checkboxCaptureGlobalErrors": "Capturar Errores Globales",
        "checkboxPersistSession": "Mantener Sesión entre Recargas",
        "brandingNoLogo": "Sin logo personalizado establecido",
        "documentationTrackerEmptyShort": "Sin lanzamientos rastreados.",
        "settingsFactoryResetHelp": "Restablece la aplicación a su estado inicial. Se eliminarán todos los datos.",
        "backupDiffModalTitle": "Comparación de Versiones",
        "backupDiffModalSubtitle": "Selecciona dos guardados manuales o copias automáticas para inspeccionar cambios.",
        "backupDiffEmptyState": "Selecciona versiones para ver diferencias.",
        "rehearsalModalSubtitle": "Carga una copia en un espacio de trabajo desechable para verificarla antes de una restauración completa.",
        "rehearsalModalSourceLabel": "Elige una fuente de prueba",
        "rehearsalModalSourceBackup": "Copia completa de la app (.json)",
        "rehearsalModalSourceProject": "Paquete de proyecto (.json)",
        "textManageLocalData": "Gestiona tus datos locales.",
        "textRequestPersistence": "Solicita verificación de almacenamiento persistente para evitar eliminación del navegador.",
        "statusCheckingPersistence": "Verificando protección de almacenamiento...",
        "textNoLogEntries": "Sin entradas de registro.",
        "optionLogLevelAll": "Todos los niveles",
        "optionLogLevelInfo": "Info y superior",
        "optionLogLevelWarn": "Advertencias y errores",
        "optionLogLevelError": "Solo errores",
        "appCreator": "Creado por Luca Zanner",

        // Onboarding
        "onboardingTour.steps.projectRequirements.title": "Refinar requisitos de producción",
        "onboardingTour.steps.projectRequirements.body": "Revisa el resumen de Requisitos de Producción regenerado junto a la lista de kit. Confirma que las casillas de resumen, cobertura de equipo y logística reflejen los datos que acabas de guardar, luego vuelve a ejecutar exportaciones o copias de seguridad para que los equipos posteriores reciban el contexto actualizado con cada compartición.",

        // V2 Dashboard
        "v2.dashboard.projectLocked": "El proyecto '{projectName}' ya está abierto en otra pestaña.",

        // Category names
        "categoryNames.other": "Otros"
    },

    fr: {
        // Settings tabs
        "settingsTabBackup": "Sauvegarde et Restauration",
        "settingsTabData": "Données et Stockage",
        "settingsTabAbout": "À propos et Support",
        "generalSectionInterfaceHeading": "Interface et Accessibilité",
        "generalSectionInterfaceHelp": "Gérez les tailles de police, le mode contraste élevé et les préférences d'animation.",
        "settingsBackupAutomatedHeading": "Sauvegardes Automatiques",
        "settingsBackupManualHeading": "Actions Manuelles",
        "settingsBackupDangerHeading": "Zone de Danger",
        "settingsDataStorageStatusHeading": "État du Stockage",
        "settingsDataPersistenceHeading": "Persistance et Sauvegarde",
        "settingsDataLoggingHeading": "Journalisation",
        "settingsAboutHeading": "À propos et Support",

        // Rules view
        "rulesViewTitle": "Règles d'Équipement Automatique",
        "rulesViewSubtitle": "Gérez les ajouts automatiques d'équipements en fonction de votre sélection de matériel.",
        "buttonAddRule": "Ajouter une Règle",
        "rulesEmptyTitle": "Aucune règle définie",
        "rulesEmptyText": "Créez votre première règle pour automatiser votre liste de kit.",
        "ruleBadgeAlways": "Toujours",
        "ruleTagConditions": "Conditions",
        "ruleTagItemsAdded": "Articles Ajoutés",
        "confirmDeleteRule": "Êtes-vous sûr de vouloir supprimer cette règle ?",
        "modalTitleCreateRule": "Créer une Règle",
        "modalTitleEditRule": "Modifier la Règle",
        "tabGeneral": "Général",
        "tabContext": "Contexte",
        "tabCamera": "Caméra",
        "tabMonitoring": "Monitoring",
        "tabSupport": "Support",
        "tabCrew": "Équipe",
        "tabActions": "Actions",
        "labelRuleName": "Nom de la Règle",
        "labelRuleEnabled": "Règle Activée",
        "labelRuleAlways": "Toujours Appliquer",
        "helpRuleAlways": "Remplace toutes les autres conditions.",
        "placeholderRuleName": "ex. Ajouter des Batteries pour Moniteur",
        "sectionScenarios": "Scénarios",
        "sectionCameraModels": "Modèles de Caméra",
        "sectionMatteboxes": "Matteboxes",
        "sectionViewfinders": "Viseurs / Poignées Supérieures (Extensions)",
        "sectionMonitors": "Moniteurs",
        "sectionWireless": "Sans Fil",
        "sectionTripodHeads": "Têtes de Trépied",
        "sectionBowlSize": "Taille de Cuvette",
        "sectionLegTypes": "Types de Pieds",
        "sectionSpreaders": "Écarteurs",
        "sectionCrewPresent": "Équipe Présente",
        "sectionCrewAbsent": "Équipe Absente",
        "sectionItemsToAdd": "Articles à Ajouter",
        "sectionItemsToRemove": "Articles à Supprimer",
        "buttonAddItem": "+ Ajouter un Article",
        "labelItemName": "Nom de l'Article",
        "placeholderItemSearch": "Rechercher...",
        "labelCategory": "Catégorie",
        "labelQty": "Qté",
        "buttonAdd": "Ajouter",
        "textNoOptions": "Aucune option disponible.",
        "textNoItems": "Aucun article défini.",
        "buttonSaveRule": "Enregistrer la Règle",
        "buttonCancel": "Annuler",
        "buttonEdit": "Modifier",
        "buttonDelete": "Supprimer",
        "alertEnterRuleName": "Veuillez entrer un nom de règle.",

        // Contacts view
        "contactsViewTitle": "Contacts",
        "contactsViewSubtitle": "Gérez vos contacts d'équipe et de fournisseurs.",
        "buttonAddContact": "Ajouter un Contact",
        "buttonAddFirstContact": "+ Ajouter le Premier Contact",
        "contactsEmptyTitle": "Aucun contact trouvé",
        "contactsEmptyText": "Ajoutez des personnes et des entreprises à votre liste de contacts pour les assigner rapidement aux projets.",
        "linkWebsite": "Site Web",
        "contactUnnamed": "Contact Sans Nom",
        "contactNoRole": "Aucun Rôle",
        "modalTitleDeleteContact": "Supprimer le Contact",
        "confirmDeleteContact": "Êtes-vous sûr de vouloir supprimer ce contact ? Cette action est irréversible.",
        "buttonDeleteRed": "Supprimer",
        "modalTitleNewContact": "Nouveau Contact",
        "modalTitleEditContact": "Modifier le Contact",
        "buttonUploadPhoto": "Télécharger une Photo",
        "buttonRemovePhoto": "Supprimer",
        "labelName": "Nom",
        "labelRole": "Rôle",
        "labelPhone": "Téléphone",
        "labelEmail": "E-mail",
        "labelWebsite": "Site Web / Lien",
        "labelNotes": "Notes",
        "placeholderFullName": "Nom Complet",
        "placeholderRole": "ex. 1er Assistant Caméra",
        "placeholderPhone": "+33 1 23 45 67 89",
        "placeholderEmail": "email@exemple.fr",
        "placeholderWebsite": "https://...",
        "placeholderNotes": "Détails supplémentaires...",
        "buttonSaveContact": "Enregistrer le Contact",
        "alertEnterName": "Veuillez entrer un nom.",

        // Owned gear view
        "ownGearViewTitle": "Équipement Personnel",
        "ownGearViewSubtitle": "Gérez votre inventaire d'équipement personnel.",
        "buttonAddGearItem": "Ajouter un Article",
        "buttonAddFirstGearItem": "+ Ajouter le Premier Article",
        "ownGearEmptyTitle": "Aucun équipement trouvé",
        "ownGearEmptyText": "Ajoutez des articles à votre inventaire personnel pour les ajouter rapidement aux projets.",
        "labelQtyPrefix": "Qté : ",
        "labelSourcePrefix": "Source : ",
        "confirmDeleteGearItem": "Êtes-vous sûr de vouloir supprimer cet article ?",
        "modalTitleNewGearItem": "Nouvel Article d'Équipement",
        "modalTitleEditGearItem": "Modifier l'Article d'Équipement",
        "placeholderGearName": "ex. Arri Alexa Mini",
        "placeholderGearQty": "1",
        "placeholderGearNotes": "État, numéro de série, etc...",
        "buttonSaveGearItem": "Enregistrer l'Article",
        "alertInvalidItemData": "Données d'article invalides.",
        "alertSaveItemFailed": "Échec de l'enregistrement de l'article.",
        "labelQuantity": "Quantité",

        // Settings buttons and labels
        "buttonDownloadBackup": "Télécharger la Sauvegarde",
        "buttonDownloadFullBackup": "Télécharger la Sauvegarde Complète",
        "buttonRestore": "Restaurer",
        "buttonRestoreRehearsal": "Restauration de Test",
        "buttonFactoryReset": "Réinitialisation d'Usine",
        "buttonCompareVersions": "Comparer les Versions",
        "buttonReset": "Réinitialiser",
        "buttonUploadSvg": "Télécharger SVG",
        "buttonClose": "Fermer",
        "buttonExportLog": "Exporter le Journal",
        "buttonChooseFile": "Choisir un Fichier",
        "buttonSupport": "Support",
        "buttonReportBug": "Signaler un Bug",
        "buttonSuggestFeature": "Suggérer une Fonctionnalité",
        "buttonRequestPersistence": "Demander un Stockage Persistant",
        "labelBackupRetention": "Rétention des Sauvegardes (copies par projet)",
        "labelBaselineVersion": "Version de Base",
        "labelComparisonVersion": "Version de Comparaison",
        "labelIncidentNotes": "Notes d'Incident",
        "labelSelectFile": "Sélectionner un Fichier",
        "labelNoFileSelected": "Aucun fichier sélectionné",
        "labelLatestProjectSave": "Dernier Enregistrement du Projet",
        "labelLatestAutoBackup": "Dernière Sauvegarde Automatique",
        "labelLatestFullBackup": "Dernière Sauvegarde Complète",
        "tableHeaderData": "Données",
        "tableHeaderDifference": "Différence",
        "labelLogLevel": "Niveau de Journal",
        "labelHistoryLimit": "Limite d'Historique",
        "labelNamespaceFilter": "Filtre d'Espace de Noms",
        "placeholderIncidentNotes": "Contexte pour cette comparaison...",
        "checkboxAutoBackupList": "Afficher les sauvegardes auto dans la liste des projets",
        "checkboxHighContrast": "Éléments à Contraste Élevé",
        "checkboxReduceMotion": "Réduire les Animations",
        "checkboxRelaxedSpacing": "Espacement Détendu",
        "checkboxMirrorConsole": "Refléter dans la Console",
        "checkboxCaptureConsole": "Capturer la Sortie Console",
        "checkboxCaptureGlobalErrors": "Capturer les Erreurs Globales",
        "checkboxPersistSession": "Maintenir la Session entre les Rechargements",
        "brandingNoLogo": "Aucun logo personnalisé défini",
        "documentationTrackerEmptyShort": "Aucune version suivie.",
        "settingsFactoryResetHelp": "Réinitialise l'application à son état initial. Toutes les données seront supprimées.",
        "backupDiffModalTitle": "Comparaison des Versions",
        "backupDiffModalSubtitle": "Choisissez deux sauvegardes manuelles ou automatiques pour inspecter les changements.",
        "backupDiffEmptyState": "Sélectionnez des versions pour voir les différences.",
        "rehearsalModalSubtitle": "Chargez une sauvegarde dans un espace de travail temporaire pour la vérifier avant une restauration complète.",
        "rehearsalModalSourceLabel": "Choisissez une source de test",
        "rehearsalModalSourceBackup": "Sauvegarde complète de l'app (.json)",
        "rehearsalModalSourceProject": "Bundle de projet (.json)",
        "textManageLocalData": "Gérez vos données locales.",
        "textRequestPersistence": "Demandez une vérification de stockage persistant pour éviter l'éviction par le navigateur.",
        "statusCheckingPersistence": "Vérification de la protection du stockage...",
        "textNoLogEntries": "Aucune entrée de journal.",
        "optionLogLevelAll": "Tous les niveaux",
        "optionLogLevelInfo": "Info et supérieur",
        "optionLogLevelWarn": "Avertissements et erreurs",
        "optionLogLevelError": "Erreurs uniquement",
        "appCreator": "Créé par Luca Zanner",

        // Onboarding
        "onboardingTour.steps.projectRequirements.title": "Affiner les exigences de production",
        "onboardingTour.steps.projectRequirements.body": "Examinez le résumé des Exigences de Production régénéré à côté de la liste de kit. Confirmez que les cases de résumé, couverture d'équipe et logistique reflètent les données que vous venez d'enregistrer, puis relancez les exportations ou sauvegardes pour que les équipes en aval reçoivent le contexte mis à jour avec chaque partage.",

        // V2 Dashboard
        "v2.dashboard.projectLocked": "Le projet '{projectName}' est déjà ouvert dans un autre onglet.",

        // Category names
        "categoryNames.other": "Autre"
    },

    it: {
        // Settings tabs
        "settingsTabBackup": "Backup e Ripristino",
        "settingsTabData": "Dati e Archiviazione",
        "settingsTabAbout": "Informazioni e Supporto",
        "generalSectionInterfaceHeading": "Interfaccia e Accessibilità",
        "generalSectionInterfaceHelp": "Gestisce le dimensioni dei caratteri, la modalità ad alto contrasto e le preferenze di animazione.",
        "settingsBackupAutomatedHeading": "Backup Automatici",
        "settingsBackupManualHeading": "Azioni Manuali",
        "settingsBackupDangerHeading": "Zona di Pericolo",
        "settingsDataStorageStatusHeading": "Stato Archiviazione",
        "settingsDataPersistenceHeading": "Persistenza e Backup",
        "settingsDataLoggingHeading": "Registrazione",
        "settingsAboutHeading": "Informazioni e Supporto",

        // Rules view
        "rulesViewTitle": "Regole Automatiche Attrezzature",
        "rulesViewSubtitle": "Gestisci le aggiunte automatiche di attrezzature in base alla tua selezione di equipaggiamento.",
        "buttonAddRule": "Aggiungi Regola",
        "rulesEmptyTitle": "Nessuna regola definita",
        "rulesEmptyText": "Crea la tua prima regola per automatizzare la tua lista kit.",
        "ruleBadgeAlways": "Sempre",
        "ruleTagConditions": "Condizioni",
        "ruleTagItemsAdded": "Articoli Aggiunti",
        "confirmDeleteRule": "Sei sicuro di voler eliminare questa regola?",
        "modalTitleCreateRule": "Crea Regola",
        "modalTitleEditRule": "Modifica Regola",
        "tabGeneral": "Generale",
        "tabContext": "Contesto",
        "tabCamera": "Camera",
        "tabMonitoring": "Monitoraggio",
        "tabSupport": "Supporto",
        "tabCrew": "Troupe",
        "tabActions": "Azioni",
        "labelRuleName": "Nome Regola",
        "labelRuleEnabled": "Regola Attivata",
        "labelRuleAlways": "Applica Sempre",
        "helpRuleAlways": "Sostituisce tutte le altre condizioni.",
        "placeholderRuleName": "es. Aggiungi Batterie per Monitor",
        "sectionScenarios": "Scenari",
        "sectionCameraModels": "Modelli di Camera",
        "sectionMatteboxes": "Mattebox",
        "sectionViewfinders": "Mirini / Impugnature Superiori (Estensioni)",
        "sectionMonitors": "Monitor",
        "sectionWireless": "Wireless",
        "sectionTripodHeads": "Teste per Treppiede",
        "sectionBowlSize": "Dimensione Bowl",
        "sectionLegTypes": "Tipi di Gambe",
        "sectionSpreaders": "Divaricatori",
        "sectionCrewPresent": "Troupe Presente",
        "sectionCrewAbsent": "Troupe Assente",
        "sectionItemsToAdd": "Articoli da Aggiungere",
        "sectionItemsToRemove": "Articoli da Rimuovere",
        "buttonAddItem": "+ Aggiungi Articolo",
        "labelItemName": "Nome Articolo",
        "placeholderItemSearch": "Cerca...",
        "labelCategory": "Categoria",
        "labelQty": "Qtà",
        "buttonAdd": "Aggiungi",
        "textNoOptions": "Nessuna opzione disponibile.",
        "textNoItems": "Nessun articolo definito.",
        "buttonSaveRule": "Salva Regola",
        "buttonCancel": "Annulla",
        "buttonEdit": "Modifica",
        "buttonDelete": "Elimina",
        "alertEnterRuleName": "Inserisci un nome per la regola.",

        // Contacts view
        "contactsViewTitle": "Contatti",
        "contactsViewSubtitle": "Gestisci i tuoi contatti di troupe e fornitori.",
        "buttonAddContact": "Aggiungi Contatto",
        "buttonAddFirstContact": "+ Aggiungi Primo Contatto",
        "contactsEmptyTitle": "Nessun contatto trovato",
        "contactsEmptyText": "Aggiungi persone e aziende alla tua lista contatti per assegnarli rapidamente ai progetti.",
        "linkWebsite": "Sito Web",
        "contactUnnamed": "Contatto Senza Nome",
        "contactNoRole": "Nessun Ruolo",
        "modalTitleDeleteContact": "Elimina Contatto",
        "confirmDeleteContact": "Sei sicuro di voler eliminare questo contatto? Questa azione non può essere annullata.",
        "buttonDeleteRed": "Elimina",
        "modalTitleNewContact": "Nuovo Contatto",
        "modalTitleEditContact": "Modifica Contatto",
        "buttonUploadPhoto": "Carica Foto",
        "buttonRemovePhoto": "Rimuovi",
        "labelName": "Nome",
        "labelRole": "Ruolo",
        "labelPhone": "Telefono",
        "labelEmail": "Email",
        "labelWebsite": "Sito Web / Link",
        "labelNotes": "Note",
        "placeholderFullName": "Nome Completo",
        "placeholderRole": "es. 1° Assistente Camera",
        "placeholderPhone": "+39 123 456 7890",
        "placeholderEmail": "email@esempio.it",
        "placeholderWebsite": "https://...",
        "placeholderNotes": "Dettagli aggiuntivi...",
        "buttonSaveContact": "Salva Contatto",
        "alertEnterName": "Inserisci un nome.",

        // Owned gear view
        "ownGearViewTitle": "Attrezzatura Propria",
        "ownGearViewSubtitle": "Gestisci il tuo inventario di equipaggiamento personale.",
        "buttonAddGearItem": "Aggiungi Articolo",
        "buttonAddFirstGearItem": "+ Aggiungi Primo Articolo",
        "ownGearEmptyTitle": "Nessuna attrezzatura trovata",
        "ownGearEmptyText": "Aggiungi articoli al tuo inventario personale per aggiungerli rapidamente ai progetti.",
        "labelQtyPrefix": "Qtà: ",
        "labelSourcePrefix": "Fonte: ",
        "confirmDeleteGearItem": "Sei sicuro di voler eliminare questo articolo?",
        "modalTitleNewGearItem": "Nuovo Articolo Attrezzatura",
        "modalTitleEditGearItem": "Modifica Articolo Attrezzatura",
        "placeholderGearName": "es. Arri Alexa Mini",
        "placeholderGearQty": "1",
        "placeholderGearNotes": "Condizione, numero di serie, ecc...",
        "buttonSaveGearItem": "Salva Articolo",
        "alertInvalidItemData": "Dati articolo non validi.",
        "alertSaveItemFailed": "Salvataggio articolo fallito.",
        "labelQuantity": "Quantità",

        // Settings buttons and labels
        "buttonDownloadBackup": "Scarica Backup",
        "buttonDownloadFullBackup": "Scarica Backup Completo",
        "buttonRestore": "Ripristina",
        "buttonRestoreRehearsal": "Ripristino di Prova",
        "buttonFactoryReset": "Reset di Fabbrica",
        "buttonCompareVersions": "Confronta Versioni",
        "buttonReset": "Reimposta",
        "buttonUploadSvg": "Carica SVG",
        "buttonClose": "Chiudi",
        "buttonExportLog": "Esporta Registro",
        "buttonChooseFile": "Scegli File",
        "buttonSupport": "Supporto",
        "buttonReportBug": "Segnala Bug",
        "buttonSuggestFeature": "Suggerisci Funzionalità",
        "buttonRequestPersistence": "Richiedi Archiviazione Persistente",
        "labelBackupRetention": "Conservazione Backup (copie per progetto)",
        "labelBaselineVersion": "Versione Base",
        "labelComparisonVersion": "Versione di Confronto",
        "labelIncidentNotes": "Note Incidente",
        "labelSelectFile": "Seleziona File",
        "labelNoFileSelected": "Nessun file selezionato",
        "labelLatestProjectSave": "Ultimo Salvataggio Progetto",
        "labelLatestAutoBackup": "Ultimo Backup Automatico",
        "labelLatestFullBackup": "Ultimo Backup Completo",
        "tableHeaderData": "Dati",
        "tableHeaderDifference": "Differenza",
        "labelLogLevel": "Livello Registro",
        "labelHistoryLimit": "Limite Cronologia",
        "labelNamespaceFilter": "Filtro Namespace",
        "placeholderIncidentNotes": "Contesto per questo confronto...",
        "checkboxAutoBackupList": "Mostra backup automatici nella lista progetti",
        "checkboxHighContrast": "Elementi ad Alto Contrasto",
        "checkboxReduceMotion": "Riduci Movimento",
        "checkboxRelaxedSpacing": "Spaziatura Rilassata",
        "checkboxMirrorConsole": "Rifletti su Console",
        "checkboxCaptureConsole": "Cattura Output Console",
        "checkboxCaptureGlobalErrors": "Cattura Errori Globali",
        "checkboxPersistSession": "Mantieni Sessione tra Ricariche",
        "brandingNoLogo": "Nessun logo personalizzato impostato",
        "documentationTrackerEmptyShort": "Nessun rilascio tracciato.",
        "settingsFactoryResetHelp": "Reimposta l'applicazione al suo stato iniziale. Tutti i dati verranno eliminati.",
        "backupDiffModalTitle": "Confronto Versioni",
        "backupDiffModalSubtitle": "Scegli due salvataggi manuali o backup automatici per ispezionare le modifiche.",
        "backupDiffEmptyState": "Seleziona le versioni per vedere le differenze.",
        "rehearsalModalSubtitle": "Carica un backup in uno spazio di lavoro temporaneo per verificarlo prima di un ripristino completo.",
        "rehearsalModalSourceLabel": "Scegli una fonte di prova",
        "rehearsalModalSourceBackup": "Backup completo app (.json)",
        "rehearsalModalSourceProject": "Bundle progetto (.json)",
        "textManageLocalData": "Gestisci i tuoi dati locali.",
        "textRequestPersistence": "Richiedi la verifica dell'archiviazione persistente per prevenire l'eliminazione del browser.",
        "statusCheckingPersistence": "Verifica protezione archiviazione...",
        "textNoLogEntries": "Nessuna voce di registro.",
        "optionLogLevelAll": "Tutti i livelli",
        "optionLogLevelInfo": "Info e superiore",
        "optionLogLevelWarn": "Avvisi ed errori",
        "optionLogLevelError": "Solo errori",
        "appCreator": "Creato da Luca Zanner",

        // Onboarding
        "onboardingTour.steps.projectRequirements.title": "Affina i requisiti di produzione",
        "onboardingTour.steps.projectRequirements.body": "Rivedi il riepilogo dei Requisiti di Produzione rigenerato accanto alla lista kit. Conferma che le caselle di riepilogo, copertura troupe e logistica riflettano i dati appena salvati, poi riesegui le esportazioni o i backup in modo che i team a valle ricevano il contesto aggiornato con ogni condivisione.",

        // V2 Dashboard
        "v2.dashboard.projectLocked": "Il progetto '{projectName}' è già aperto in un'altra scheda.",

        // Category names
        "categoryNames.other": "Altro"
    }
};

// Function to replace [NEEDS TRANSLATION] placeholders in a file
function applyTranslations(locale) {
    const filePath = path.join(TARGET_DIR, `${locale}.js`);
    let content = fs.readFileSync(filePath, 'utf8');

    const localeTranslations = translations[locale];
    let replacedCount = 0;

    for (const [key, translation] of Object.entries(localeTranslations)) {
        // Build regex to find the placeholder pattern for this key
        // We need to handle nested keys like "onboardingTour.steps.projectRequirements.title"
        const escapedKey = key.replace(/\./g, '\\.');

        // Pattern for flat keys like "settingsTabBackup"
        const flatPattern = new RegExp(
            `"${escapedKey}":\\s*"\\[NEEDS TRANSLATION\\][^"]*"`,
            'g'
        );

        const replacement = `"${key}": ${JSON.stringify(translation)}`;

        const before = content;
        content = content.replace(flatPattern, replacement);

        if (before !== content) {
            replacedCount++;
        }
    }

    fs.writeFileSync(filePath, content, 'utf8');
    console.log(`${locale}: Replaced ${replacedCount} placeholders`);
}

// Main execution
async function main() {
    console.log('Applying translations to locale files...\n');

    for (const locale of Object.keys(translations)) {
        applyTranslations(locale);
    }

    console.log('\nDone! Run the key checker to verify remaining placeholders.');
}

main().catch(err => console.error(err));
